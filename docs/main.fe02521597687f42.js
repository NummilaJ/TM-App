"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{937:(Or,Zt,ye)=>{function D(e){return"function"==typeof e}function j(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const N=j(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pe(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Be{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(s){t=s instanceof N?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{gt(s)}catch(o){t=t??[],o instanceof N?t=[...t,...o.errors]:t.push(o)}}if(t)throw new N(t)}}add(t){var n;if(t&&t!==this)if(this.closed)gt(t);else{if(t instanceof Be){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&pe(n,t)}remove(t){const{_finalizers:n}=this;n&&pe(n,t),t instanceof Be&&t._removeParent(this)}}Be.EMPTY=(()=>{const e=new Be;return e.closed=!0,e})();const Dt=Be.EMPTY;function Bt(e){return e instanceof Be||e&&"closed"in e&&D(e.remove)&&D(e.add)&&D(e.unsubscribe)}function gt(e){D(e)?e():e.unsubscribe()}const Xe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},W={setTimeout(e,t,...n){const{delegate:r}=W;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=W;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function X(e){W.setTimeout(()=>{const{onUnhandledError:t}=Xe;if(!t)throw e;t(e)})}function de(){}const Ae=Ge("C",void 0,void 0);function Ge(e,t,n){return{kind:e,value:t,error:n}}let we=null;function be(e){if(Xe.useDeprecatedSynchronousErrorHandling){const t=!we;if(t&&(we={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=we;if(we=null,n)throw r}}else e()}class Pt extends Be{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Bt(t)&&t.add(this)):this.destination=yt}static create(t,n,r){return new jt(t,n,r)}next(t){this.isStopped?Ke(function qt(e){return Ge("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ke(function rt(e){return Ge("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ke(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function at(e,t){return Ue.call(e,t)}class $n{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ke(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ke(r)}else ke(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ke(n)}}}class jt extends Pt{constructor(t,n,r){let i;if(super(),D(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xe.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&at(t.next,s),error:t.error&&at(t.error,s),complete:t.complete&&at(t.complete,s)}):i=t}this.destination=new $n(i)}}function ke(e){Xe.useDeprecatedSynchronousErrorHandling?function on(e){Xe.useDeprecatedSynchronousErrorHandling&&we&&(we.errorThrown=!0,we.error=e)}(e):X(e)}function Ke(e,t){const{onStoppedNotification:n}=Xe;n&&W.setTimeout(()=>n(e,t))}const yt={closed:!0,next:de,error:function J(e){throw e},complete:de},Ft="function"==typeof Symbol&&Symbol.observable||"@@observable";function Kt(e){return e}let Oe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function V(e){return e&&e instanceof Pt||function ci(e){return e&&D(e.next)&&D(e.error)&&D(e.complete)}(e)&&Bt(e)}(n)?n:new jt(n,r,i);return be(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Mn(r))((i,s)=>{const o=new jt({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ft](){return this}pipe(...n){return function _r(e){return 0===e.length?Kt:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Mn(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function Mn(e){var t;return null!==(t=e??Xe.Promise)&&void 0!==t?t:Promise}const U=j(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class e extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new L(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new U}next(n){be(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){be(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){be(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Dt:(this.currentObservers=null,s.push(n),new Be(()=>{this.currentObservers=null,pe(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Oe;return n.source=this,n}}return e.create=(t,n)=>new L(t,n),e})();class L extends F{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Dt}}function z(e){return t=>{if(function q(e){return D(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(e,t,n,r,i){return new Ve(e,t,n,r,i)}class Ve extends Pt{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Me(e,t){return z((n,r)=>{let i=0;n.subscribe(ie(r,s=>{r.next(e.call(t,s,i++))}))})}var _e=ye(582);const Ye=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function wt(e){return D(e?.then)}function mt(e){return D(e[Ft])}function bt(e){return Symbol.asyncIterator&&D(e?.[Symbol.asyncIterator])}function $t(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const an=function Yt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rn(e){return D(e?.[an])}function ir(e){return(0,_e.FC)(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield(0,_e.qq)(n.read());if(i)return yield(0,_e.qq)(void 0);yield yield(0,_e.qq)(r)}}finally{n.releaseLock()}})}function kr(e){return D(e?.getReader)}function Qe(e){if(e instanceof Oe)return e;if(null!=e){if(mt(e))return function Fr(e){return new Oe(t=>{const n=e[Ft]();if(D(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Ye(e))return function Lr(e){return new Oe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(wt(e))return function vr(e){return new Oe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,X)})}(e);if(bt(e))return dn(e);if(Rn(e))return function yr(e){return new Oe(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(kr(e))return function Wn(e){return dn(ir(e))}(e)}throw $t(e)}function dn(e){return new Oe(t=>{(function zn(e,t){var n,r,i,s;return(0,_e.mG)(this,void 0,void 0,function*(){try{for(n=(0,_e.KL)(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function sr(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function In(e,t,n=1/0){return D(t)?In((r,i)=>Me((s,o)=>t(r,s,i,o))(Qe(e(r,i))),n):("number"==typeof t&&(n=t),z((r,i)=>function hn(e,t,n,r,i,s,o,a){const c=[];let d=0,p=0,g=!1;const _=()=>{g&&!c.length&&!d&&t.complete()},I=O=>d<r?T(O):c.push(O),T=O=>{s&&t.next(O),d++;let H=!1;Qe(n(O,p++)).subscribe(ie(t,te=>{i?.(te),s?I(te):t.next(te)},()=>{H=!0},void 0,()=>{if(H)try{for(d--;c.length&&d<r;){const te=c.shift();o?sr(t,o,()=>T(te)):T(te)}_()}catch(te){t.error(te)}}))};return e.subscribe(ie(t,I,()=>{g=!0,_()})),()=>{a?.()}}(r,i,e,n)))}function Vr(e=1/0){return In(Kt,e)}const Dn=new Oe(e=>e.complete());function Ot(e){return e&&D(e.schedule)}function Er(e){return e[e.length-1]}function Cr(e){return D(Er(e))?e.pop():void 0}function Br(e){return Ot(Er(e))?e.pop():void 0}function Wt(e,t=0){return z((n,r)=>{n.subscribe(ie(r,i=>sr(r,e,()=>r.next(i),t),()=>sr(r,e,()=>r.complete(),t),i=>sr(r,e,()=>r.error(i),t)))})}function mn(e,t=0){return z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Ur(e,t){if(!e)throw new Error("Iterable cannot be null");return new Oe(n=>{sr(n,t,()=>{const r=e[Symbol.asyncIterator]();sr(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function E(e,t){return t?function b(e,t){if(null!=e){if(mt(e))return function Gn(e,t){return Qe(e).pipe(mn(t),Wt(t))}(e,t);if(Ye(e))return function bi(e,t){return new Oe(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(wt(e))return function _s(e,t){return Qe(e).pipe(mn(t),Wt(t))}(e,t);if(bt(e))return Ur(e,t);if(Rn(e))return function qi(e,t){return new Oe(n=>{let r;return sr(n,t,()=>{r=e[an](),sr(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(e,t);if(kr(e))return function S(e,t){return Ur(ir(e),t)}(e,t)}throw $t(e)}(e,t):Qe(e)}function C(...e){const t=Br(e),n=function Qt(e,t){return"number"==typeof Er(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Qe(r[0]):Vr(n)(E(r,t)):Dn}class v extends F{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function P(...e){return E(e,Br(e))}function $(e={}){const{connector:t=(()=>new F),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,c,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},I=()=>{_(),o=c=void 0,p=g=!1},T=()=>{const O=o;I(),O?.unsubscribe()};return z((O,H)=>{d++,!g&&!p&&_();const te=c=c??t();H.add(()=>{d--,0===d&&!g&&!p&&(a=le(T,i))}),te.subscribe(H),!o&&d>0&&(o=new jt({next:B=>te.next(B),error:B=>{g=!0,_(),a=le(I,n,B),te.error(B)},complete:()=>{p=!0,_(),a=le(I,r),te.complete()}}),Qe(O).subscribe(o))})(s)}}function le(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new jt({next:()=>{r.unsubscribe(),e()}});return Qe(t(...n)).subscribe(r)}function he(e,t){return z((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ie(r,c=>{i?.unsubscribe();let d=0;const p=s++;Qe(e(c,p)).subscribe(i=ie(r,g=>r.next(t?t(c,g,p,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Se(e,t=Kt){return e=e??st,z((n,r)=>{let i,s=!0;n.subscribe(ie(r,o=>{const a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}function st(e,t){return e===t}function oe(e){for(let t in e)if(e[t]===oe)return t;throw Error("Could not find renamed property on target object.")}function ut(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function me(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(me).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Jt(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Ki=oe({__forward_ref__:oe});function x(e){return e.__forward_ref__=x,e.toString=function(){return me(this())},e}function M(e){return ee(e)?e():e}function ee(e){return"function"==typeof e&&e.hasOwnProperty(Ki)&&e.__forward_ref__===x}function ge(e){return e&&!!e.\u0275providers}class G extends Error{constructor(t,n){super(function zt(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function ue(e){return"string"==typeof e?e:null==e?"":String(e)}function Ql(e,t){throw new G(-201,!1)}function or(e,t){null==e&&function Ee(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Le(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ar(e){return{providers:e.providers||[],imports:e.imports||[]}}function ca(e){return Jl(e,vs)||Jl(e,ua)}function Jl(e,t){return e.hasOwnProperty(t)?e[t]:null}function lo(e){return e&&(e.hasOwnProperty(ec)||e.hasOwnProperty(Qp))?e[ec]:null}const vs=oe({\u0275prov:oe}),ec=oe({\u0275inj:oe}),ua=oe({ngInjectableDef:oe}),Qp=oe({ngInjectorDef:oe});var je=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(je||{});let ys;function Nn(e){const t=ys;return ys=e,t}function ha(e,t,n){const r=ca(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&je.Optional?null:void 0!==t?t:void Ql(me(e))}const dt=globalThis,fo={},po="__NG_DI_FLAG__",pa="ngTempTokenPath",Xp=/\n/gm,Rd="__source";let Es;function Pn(e){const t=Es;return Es=e,t}function eg(e,t=je.Default){if(void 0===Es)throw new G(-203,!1);return null===Es?ha(e,void 0,t):Es.get(e,t&je.Optional?null:void 0,t)}function re(e,t=je.Default){return(function da(){return ys}()||eg)(M(e),t)}function _t(e,t=je.Default){return re(e,Is(t))}function Is(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ir(e){const t=[];for(let n=0;n<e.length;n++){const r=M(e[n]);if(Array.isArray(r)){if(0===r.length)throw new G(900,!1);let i,s=je.Default;for(let o=0;o<r.length;o++){const a=r[o],c=go(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}t.push(re(i,s))}else t.push(re(r))}return t}function Hr(e,t){return e[po]=t,e.prototype[po]=t,e}function go(e){return e[po]}function di(e){return{toString:e}.toString()}var ga=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ga||{}),_n=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(_n||{});const jr={},Je=[],ma=oe({\u0275cmp:oe}),_a=oe({\u0275dir:oe}),mo=oe({\u0275pipe:oe}),Zn=oe({\u0275mod:oe}),$r=oe({\u0275fac:oe}),_o=oe({__NG_ELEMENT_ID__:oe}),va=oe({__NG_ENV_ID__:oe});function vo(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function ya(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];Nd(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function sc(e){return 3===e||4===e||6===e}function Nd(e){return 64===e.charCodeAt(0)}function Qi(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Ea(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Ea(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}const Ca="ng-template";function Ia(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==vo(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Da(e){return 4===e.type&&e.value!==Ca}function Pd(e,t,n){return t===(4!==e.type||n?e.value:Ca)}function oc(e,t,n){let r=4;const i=e.attrs||[],s=function Od(e){for(let t=0;t<e.length;t++)if(sc(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Pd(e,c,n)||""===c&&1===t.length){if(lr(r))return!1;o=!0}}else{const d=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!Ia(e.attrs,d,n)){if(lr(r))return!1;o=!0}continue}const g=ac(8&r?"class":c,i,Da(e),n);if(-1===g){if(lr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const I=8&r?_:null;if(I&&-1!==vo(I,d,0)||2&r&&d!==_){if(lr(r))return!1;o=!0}}}}else{if(!o&&!lr(r)&&!lr(c))return!1;if(o&&lr(c))continue;o=!1,r=c|1&r}}return lr(r)||o}function lr(e){return 0==(1&e)}function ac(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function cc(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function yo(e,t,n=!1){for(let r=0;r<t.length;r++)if(oc(e,t[r],n))return!0;return!1}function wa(e,t){return e?":not("+t.trim()+")":t}function rg(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!lr(o)&&(t+=wa(s,i),i=""),r=o,s=s||!lr(r);n++}return""!==i&&(t+=wa(s,i)),t}function Eo(e){return di(()=>{const t=Sa(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ga.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||_n.Emulated,styles:e.styles||Je,_:null,schemas:e.schemas||null,tView:null,id:""};kd(n);const r=e.dependencies;return n.directiveDefs=Ds(r,!1),n.pipeDefs=Ds(r,!0),n.id=function pc(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function dc(e){return tt(e)||Xt(e)}function hc(e){return null!==e}function qn(e){return di(()=>({type:e.type,bootstrap:e.bootstrap||Je,declarations:e.declarations||Je,imports:e.imports||Je,exports:e.exports||Je,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ba(e,t){if(null==e)return jr;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function Ce(e){return di(()=>{const t=Sa(e);return kd(t),t})}function tt(e){return e[ma]||null}function Xt(e){return e[_a]||null}function wn(e){return e[mo]||null}function Sa(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||jr,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Je,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ba(e.inputs,t),outputs:ba(e.outputs)}}function kd(e){e.features?.forEach(t=>t(e))}function Ds(e,t){if(!e)return null;const n=t?wn:dc;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(hc)}const Lt=0,ae=1,Te=2,Tt=3,Dr=4,Xi=5,yn=6,Ai=7,Ut=8,Wr=9,ws=10,De=11,Io=12,Ta=13,bs=14,xt=15,Do=16,Mi=17,zr=18,wo=19,gc=20,Gr=21,hi=22,Zr=23,Ss=24,$e=25,mc=1,Fd=2,qr=7,bo=9,en=11;function xn(e){return Array.isArray(e)&&"object"==typeof e[mc]}function kn(e){return Array.isArray(e)&&!0===e[mc]}function Ld(e){return 0!=(4&e.flags)}function Ts(e){return e.componentOffset>-1}function vc(e){return 1==(1&e.flags)}function Kr(e){return!!e.template}function So(e){return 0!=(512&e[Te])}function wr(e,t){return e.hasOwnProperty($r)?e[$r]:null}let nn=null,Ma=!1;function Fn(e){const t=nn;return nn=e,t}const Hd={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ic(e){if(!To(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Wd(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Dc(e){e.dirty=!0,function $d(e){if(void 0===e.liveConsumerNode)return;const t=Ma;Ma=!0;try{for(const n of e.liveConsumerNode)n.dirty||Dc(n)}finally{Ma=t}}(e),e.consumerMarkedDirty?.(e)}function ts(e){return e&&(e.nextProducerIndex=0),Fn(e)}function Ms(e,t){if(Fn(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(To(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Rs(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Wd(e){Ni(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Ic(n),r!==n.version))return!0}return!1}function Ra(e){if(Ni(e),To(e))for(let t=0;t<e.producerNode.length;t++)Rs(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Rs(e,t){if(function bc(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ni(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Rs(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ni(i),i.producerIndexOfThis[r]=t}}function To(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ni(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Gd=null;const Yd=()=>{},mg=(()=>({...Hd,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Yd}))();class Tc{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yr(){return Pa}function Pa(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ac),_g}function _g(){const e=Oa(this),t=e?.current;if(t){const n=e.previous;if(n===jr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Ac(e,t,n,r){const i=this.declaredInputs[n],s=Oa(e)||function xa(e,t){return e[Qd]=t}(e,{previous:jr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Tc(c&&c.currentValue,t,a===jr),e[r]=t}Yr.ngInherit=!0;const Qd="__ngSimpleChanges__";function Oa(e){return e[Qd]||null}const cr=function(e,t,n){};function ht(e){for(;Array.isArray(e);)e=e[Lt];return e}function ka(e,t){return ht(t[e])}function Ln(e,t){return ht(t[e.index])}function Nc(e,t){return e.data[t]}function Kn(e,t){const n=t[e];return xn(n)?n:n[Lt]}function Oi(e,t){return null==t?null:e[t]}function Fa(e){e[Mi]=0}function xc(e){1024&e[Te]||(e[Te]|=1024,Os(e,1))}function Xd(e){1024&e[Te]&&(e[Te]&=-1025,Os(e,-1))}function Os(e,t){let n=e[Tt];if(null===n)return;n[Xi]+=t;let r=n;for(n=n[Tt];null!==n&&(1===t&&1===r[Xi]||-1===t&&0===r[Xi]);)n[Xi]+=t,r=n,n=n[Tt]}const Ie={lFrame:ah(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kc(){return Ie.bindingsEnabled}function K(){return Ie.lFrame.lView}function nt(){return Ie.lFrame.tView}function ns(e){return Ie.lFrame.contextLView=e,e[Ut]}function Mo(e){return Ie.lFrame.contextLView=null,e}function rn(){let e=Va();for(;null!==e&&64===e.type;)e=e.parent;return e}function Va(){return Ie.lFrame.currentTNode}function br(e,t){const n=Ie.lFrame;n.currentTNode=e,n.isParent=t}function Ro(){return Ie.lFrame.isParent}function ks(){return Ie.lFrame.bindingIndex++}function Tg(e,t){const n=Ie.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ha(t)}function Ha(e){Ie.lFrame.currentDirectiveIndex=e}function No(){return Ie.lFrame.currentQueryIndex}function Hc(e){Ie.lFrame.currentQueryIndex=e}function Mg(e){const t=e[ae];return 2===t.type?t.declTNode:1===t.type?e[yn]:null}function sh(e,t,n){if(n&je.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&je.Host||(i=Mg(s),null===i||(s=s[bs],10&i.type))););if(null===i)return!1;t=i,e=s}const r=Ie.lFrame=oh();return r.currentTNode=t,r.lView=e,!0}function jc(e){const t=oh(),n=e[ae];Ie.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function oh(){const e=Ie.lFrame,t=null===e?null:e.child;return null===t?ah(e):t}function ah(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function lh(){const e=Ie.lFrame;return Ie.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ch=lh;function Po(){const e=lh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Sn(){return Ie.lFrame.selectedIndex}function is(e){Ie.lFrame.selectedIndex=e}let hh=!0;function Fs(){return hh}function Jr(e){hh=e}function Ls(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),d&&((e.viewHooks??=[]).push(n,d),(e.viewCheckHooks??=[]).push(n,d)),null!=p&&(e.destroyHooks??=[]).push(n,p)}}function ja(e,t,n){$a(e,t,3,n)}function Oo(e,t,n,r){(3&e[Te])===n&&$a(e,t,n,r)}function $c(e,t){let n=e[Te];(3&n)===t&&(n&=8191,n+=1,e[Te]=n)}function $a(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let c=void 0!==r?65535&e[Mi]:0;c<o;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[Mi]+=65536),(a<s||-1==s)&&(QE(e,n,t,c),e[Mi]=(4294901760&e[Mi])+c+2),c++}function fh(e,t){cr(4,e,t);const n=Fn(null);try{t.call(e)}finally{Fn(n),cr(5,e,t)}}function QE(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];i?e[Te]>>13<e[Mi]>>16&&(3&e[Te])===t&&(e[Te]+=8192,fh(a,s)):fh(a,s)}const xi=-1;class Vs{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ga(e){return e!==xi}function xo(e){return 32767&e}function h(e,t){let n=function tC(e){return e>>16}(e),r=t;for(;n>0;)r=r[bs],n--;return r}let l=!0;function u(e){const t=l;return l=e,t}const m=255,y=5;let R=0;const k={};function ce(e,t){const n=Ze(e,t);if(-1!==n)return n;const r=t[ae];r.firstCreatePass&&(e.injectorIndex=t.length,ve(r.data,e),ve(t,null),ve(r.blueprint,null));const i=fn(e,t),s=e.injectorIndex;if(Ga(i)){const o=xo(i),a=h(i,t),c=a[ae].data;for(let d=0;d<8;d++)t[s+d]=a[o+d]|c[o+d]}return t[s+8]=i,s}function ve(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ze(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function fn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=nC(i),null===r)return xi;if(n++,i=i[bs],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return xi}function Xr(e,t,n){!function Q(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(_o)&&(r=n[_o]),null==r&&(r=n[_o]=R++);const i=r&m;t.data[e+(i>>y)]|=1<<i}(e,t,n)}function Wc(e,t,n){if(n&je.Optional||void 0!==e)return e;Ql()}function qa(e,t,n,r){if(n&je.Optional&&void 0===r&&(r=null),!(n&(je.Self|je.Host))){const i=e[Wr],s=Nn(void 0);try{return i?i.get(t,r,n&je.Optional):ha(t,r,n&je.Optional)}finally{Nn(s)}}return Wc(r,0,n)}function zc(e,t,n,r=je.Default,i){if(null!==e){if(2048&t[Te]&&!(r&je.Self)){const o=function kR(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&2048&o[Te]&&!(512&o[Te]);){const a=Gc(s,o,n,r|je.Self,k);if(a!==k)return a;let c=s.parent;if(!c){const d=o[gc];if(d){const p=d.get(n,k,r);if(p!==k)return p}c=nC(o),o=o[bs]}s=c}return i}(e,t,n,r,k);if(o!==k)return o}const s=Gc(e,t,n,r,k);if(s!==k)return s}return qa(t,n,r,i)}function Gc(e,t,n,r,i){const s=function qc(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(_o)?e[_o]:void 0;return"number"==typeof t?t>=0?t&m:xR:t}(n);if("function"==typeof s){if(!sh(t,e,r))return r&je.Host?Wc(i,0,r):qa(t,n,r,i);try{let o;if(o=s(r),null!=o||r&je.Optional)return o;Ql()}finally{ch()}}else if("number"==typeof s){let o=null,a=Ze(e,t),c=xi,d=r&je.Host?t[xt][yn]:null;for((-1===a||r&je.SkipSelf)&&(c=-1===a?fn(e,t):t[a+8],c!==xi&&ph(r,!1)?(o=t[ae],a=xo(c),t=h(c,t)):a=-1);-1!==a;){const p=t[ae];if(Kc(s,a,p.data)){const g=Zc(a,t,n,o,r,d);if(g!==k)return g}c=t[a+8],c!==xi&&ph(r,t[ae].data[a+8]===d)&&Kc(s,a,t)?(o=p,a=xo(c),t=h(c,t)):a=-1}}return i}function Zc(e,t,n,r,i,s){const o=t[ae],a=o.data[e+8],p=ko(a,o,n,null==r?Ts(a)&&l:r!=o&&0!=(3&a.type),i&je.Host&&s===a);return null!==p?ki(t,o,p,a):k}function ko(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,p=s>>20,_=i?a+p:e.directiveEnd;for(let I=r?a:a+p;I<_;I++){const T=o[I];if(I<c&&n===T||I>=c&&T.type===n)return I}if(i){const I=o[c];if(I&&Kr(I)&&I.type===n)return c}return null}function ki(e,t,n,r){let i=e[n];const s=t.data;if(function Wa(e){return e instanceof Vs}(i)){const o=i;o.resolving&&function Yi(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new G(-200,`Circular dependency in DI detected for ${e}${n}`)}(function He(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ue(e)}(s[n]));const a=u(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Nn(o.injectImpl):null;sh(e,r,je.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function kg(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=Pa(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}(n,s[n],t)}finally{null!==d&&Nn(d),u(a),o.resolving=!1,ch()}}return i}function Kc(e,t,n){return!!(n[t+(e>>y)]&1<<e)}function ph(e,t){return!(e&je.Self||e&je.Host&&t)}class Yn{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return zc(this._tNode,this._lView,t,Is(r),n)}}function xR(){return new Yn(rn(),K())}function Vn(e){return di(()=>{const t=e.prototype.constructor,n=t[$r]||Ug(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[$r]||Ug(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ug(e){return ee(e)?()=>{const t=Ug(M(e));return t&&t()}:wr(e)}function nC(e){const t=e[ae],n=t.type;return 2===n?t.declTNode:1===n?e[yn]:null}const Ya="__parameters__";function Ja(e,t,n){return di(()=>{const r=function jg(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,d,p){const g=c.hasOwnProperty(Ya)?c[Ya]:Object.defineProperty(c,Ya,{value:[]})[Ya];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function el(e,t){e.forEach(n=>Array.isArray(n)?el(n,t):t(n))}function iC(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function gh(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Sr(e,t,n){let r=tl(e,t);return r>=0?e[1|r]=n:(r=~r,function jR(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function $g(e,t){const n=tl(e,t);if(n>=0)return e[1|n]}function tl(e,t){return function sC(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const ti=Hr(Ja("Optional"),8),zg=Hr(Ja("SkipSelf"),4);function Ch(e){return 128==(128&e.flags)}var Bs=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Bs||{});const Kg=new Map;let hN=0;const Qg="__ngContext__";function Bn(e,t){xn(t)?(e[Qg]=t[wo],function pN(e){Kg.set(e[wo],e)}(t)):e[Qg]=t}let Jg;function Xg(e,t){return Jg(e,t)}function eu(e){const t=e[Tt];return kn(t)?t[Tt]:t}function bC(e){return TC(e[Io])}function SC(e){return TC(e[Dr])}function TC(e){for(;null!==e&&!kn(e);)e=e[Dr];return e}function il(e,t,n,r,i){if(null!=r){let s,o=!1;kn(r)?s=r:xn(r)&&(o=!0,r=r[Lt]);const a=ht(r);0===e&&null!==n?null==i?NC(t,n,a):Fo(t,n,a,i||null,!0):1===e&&null!==n?Fo(t,n,a,i||null,!0):2===e?function Ah(e,t,n){const r=Sh(e,t);r&&function ON(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function FN(e,t,n,r,i){const s=n[qr];s!==ht(n)&&il(t,e,r,s,i);for(let a=en;a<n.length;a++){const c=n[a];nu(c[ae],c,e,t,r,s)}}(t,e,s,n,i)}}function wh(e,t,n){return e.createElement(t,n)}function MC(e,t){const n=e[bo],r=n.indexOf(t);Xd(t),n.splice(r,1)}function bh(e,t){if(e.length<=en)return;const n=en+t,r=e[n];if(r){const i=r[Do];null!==i&&i!==e&&MC(i,r),t>0&&(e[n-1][Dr]=r[Dr]);const s=gh(e,en+t);!function bN(e,t){nu(e,t,t[De],2,null,null),t[Lt]=null,t[yn]=null}(r[ae],r);const o=s[zr];null!==o&&o.detachView(s[ae]),r[Tt]=null,r[Dr]=null,r[Te]&=-129}return r}function tm(e,t){if(!(256&t[Te])){const n=t[De];t[Zr]&&Ra(t[Zr]),t[Ss]&&Ra(t[Ss]),n.destroyNode&&nu(e,t,n,3,null,null),function AN(e){let t=e[Io];if(!t)return nm(e[ae],e);for(;t;){let n=null;if(xn(t))n=t[Io];else{const r=t[en];r&&(n=r)}if(!n){for(;t&&!t[Dr]&&t!==e;)xn(t)&&nm(t[ae],t),t=t[Tt];null===t&&(t=e),xn(t)&&nm(t[ae],t),n=t&&t[Dr]}t=n}}(t)}}function nm(e,t){if(!(256&t[Te])){t[Te]&=-129,t[Te]|=256,function PN(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Vs)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];cr(4,a,c);try{c.call(a)}finally{cr(5,a,c)}}else{cr(4,i,s);try{s.call(i)}finally{cr(5,i,s)}}}}}(e,t),function NN(e,t){const n=e.cleanup,r=t[Ai];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(t[Ai]=null);const i=t[Gr];if(null!==i){t[Gr]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(e,t),1===t[ae].type&&t[De].destroy();const n=t[Do];if(null!==n&&kn(t[Tt])){n!==t[Tt]&&MC(n,t);const r=t[zr];null!==r&&r.detachView(e)}!function gN(e){Kg.delete(e[wo])}(t)}}function rm(e,t,n){return function RC(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Lt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===_n.None||s===_n.Emulated)return null}return Ln(r,n)}}(e,t.parent,n)}function Fo(e,t,n,r,i){e.insertBefore(t,n,r,i)}function NC(e,t,n){e.appendChild(t,n)}function PC(e,t,n,r,i){null!==r?Fo(e,t,n,r,i):NC(e,t,n)}function Sh(e,t){return e.parentNode(t)}let im,lm,kC=function xC(e,t,n){return 40&e.type?Ln(e,n):null};function Th(e,t,n,r){const i=rm(e,r,t),s=t[De],a=function OC(e,t,n){return kC(e,t,n)}(r.parent||t[yn],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)PC(s,i,n[c],a,!1);else PC(s,i,n,a,!1);void 0!==im&&im(s,r,t,n,i)}function tu(e,t){if(null!==t){const n=t.type;if(3&n)return Ln(t,e);if(4&n)return sm(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return tu(e,r);{const i=e[t.index];return kn(i)?sm(-1,i):ht(i)}}if(32&n)return Xg(t,e)()||ht(e[t.index]);{const r=LC(e,t);return null!==r?Array.isArray(r)?r[0]:tu(eu(e[xt]),r):tu(e,t.next)}}return null}function LC(e,t){return null!==t?e[xt][yn].projection[t.projection]:null}function sm(e,t){const n=en+e+1;if(n<t.length){const r=t[n],i=r[ae].firstChild;if(null!==i)return tu(r,i)}return t[qr]}function om(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&Bn(ht(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)om(e,t,n.child,r,i,s,!1),il(t,e,i,a,s);else if(32&c){const d=Xg(n,r);let p;for(;p=d();)il(t,e,i,p,s);il(t,e,i,a,s)}else 16&c?BC(e,t,r,n,i,s):il(t,e,i,a,s);n=o?n.projectionNext:n.next}}function nu(e,t,n,r,i,s){om(n,r,e.firstChild,t,i,s,!1)}function BC(e,t,n,r,i,s){const o=n[xt],c=o[yn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)il(t,e,i,c[d],s);else{let d=c;const p=o[Tt];Ch(r)&&(d.flags|=128),om(e,t,d,p,i,s,!0)}}function UC(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function HC(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&ya(e,t,r),null!==i&&UC(e,t,i),null!==s&&function VN(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class zC{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class se{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ph=new se("ENVIRONMENT_INITIALIZER"),eI=new se("INJECTOR",-1),tI=new se("INJECTOR_DEF_TYPES");class pm{get(t,n=fo){if(n===fo){const r=new Error(`NullInjectorError: No provider for ${me(t)}!`);throw r.name="NullInjectorError",r}return n}}function hP(...e){return{\u0275providers:rI(0,e),\u0275fromNgModule:!0}}function rI(e,...t){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return el(t,o=>{const a=o;Oh(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&iI(i,s),n}function iI(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];gm(i,s=>{t(s,r)})}}function Oh(e,t,n,r){if(!(e=M(e)))return!1;let i=null,s=lo(e);const o=!s&&tt(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const c=e.ngModule;if(s=lo(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of c)Oh(d,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{el(s.imports,p=>{Oh(p,t,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&iI(d,t)}if(!a){const d=wr(i)||(()=>new i);t({provide:i,useFactory:d,deps:Je},i),t({provide:tI,useValue:i,multi:!0},i),t({provide:Ph,useValue:()=>re(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const d=e;gm(c,p=>{t(p,d)})}}}return i!==e&&void 0!==e.providers}function gm(e,t){for(let n of e)ge(n)&&(n=n.\u0275providers),Array.isArray(n)?gm(n,t):t(n)}const fP=oe({provide:String,useValue:oe});function mm(e){return null!==e&&"object"==typeof e&&fP in e}function Lo(e){return"function"==typeof e}const _m=new se("Set Injector scope."),xh={},gP={};let vm;function kh(){return void 0===vm&&(vm=new pm),vm}class as{}class Fh extends as{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Em(t,o=>this.processProvider(o)),this.records.set(eI,ll(void 0,this)),i.has("environment")&&this.records.set(as,ll(void 0,this));const s=this.records.get(_m);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tI.multi,Je,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Pn(this),r=Nn(void 0);try{return t()}finally{Pn(n),Nn(r)}}get(t,n=fo,r=je.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(va))return t[va](this);r=Is(r);const s=Pn(this),o=Nn(void 0);try{if(!(r&je.SkipSelf)){let c=this.records.get(t);if(void 0===c){const d=function EP(e){return"function"==typeof e||"object"==typeof e&&e instanceof se}(t)&&ca(t);c=d&&this.injectableDefInScope(d)?ll(ym(t),xh):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&je.Self?kh():this.parent).get(t,n=r&je.Optional&&n===fo?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[pa]=a[pa]||[]).unshift(me(t)),s)throw a;return function tg(e,t,n,r){const i=e[pa];throw t[Rd]&&i.unshift(t[Rd]),e.message=function ng(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=me(t);if(Array.isArray(t))i=t.map(me).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):me(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Xp,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[pa]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Nn(o),Pn(s)}}resolveInjectorInitializers(){const t=Pn(this),n=Nn(void 0);try{const i=this.get(Ph.multi,Je,je.Self);for(const s of i)s()}finally{Pn(t),Nn(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(me(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(t){let n=Lo(t=M(t))?t:M(t&&t.provide);const r=function _P(e){return mm(e)?ll(void 0,e.useValue):ll(aI(e),xh)}(t);if(Lo(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ll(void 0,xh,!0),i.factory=()=>Ir(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===xh&&(n.value=gP,n.value=n.factory()),"object"==typeof n.value&&n.value&&function yP(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=M(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function ym(e){const t=ca(e),n=null!==t?t.factory:wr(e);if(null!==n)return n;if(e instanceof se)throw new G(204,!1);if(e instanceof Function)return function mP(e){const t=e.length;if(t>0)throw function Qc(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new G(204,!1);const n=function Xl(e){return e&&(e[vs]||e[ua])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new G(204,!1)}function aI(e,t,n){let r;if(Lo(e)){const i=M(e);return wr(i)||ym(i)}if(mm(e))r=()=>M(e.useValue);else if(function oI(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ir(e.deps||[]));else if(function sI(e){return!(!e||!e.useExisting)}(e))r=()=>re(M(e.useExisting));else{const i=M(e&&(e.useClass||e.provide));if(!function vP(e){return!!e.deps}(e))return wr(i)||ym(i);r=()=>new i(...Ir(e.deps))}return r}function ll(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Em(e,t){for(const n of e)Array.isArray(n)?Em(n,t):n&&ge(n)?Em(n.\u0275providers,t):t(n)}const Lh=new se("AppId",{providedIn:"root",factory:()=>CP}),CP="ng",lI=new se("Platform Initializer"),Fi=new se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cI=new se("CSP nonce",{providedIn:"root",factory:()=>function ol(){if(void 0!==lm)return lm;if(typeof document<"u")return document;throw new G(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let uI=(e,t,n)=>null;function Am(e,t,n=!1){return uI(e,t,n)}class NP{}class fI{}class OP{resolveComponentFactory(t){throw function PP(e){const t=Error(`No component factory found for ${me(e)}.`);return t.ngComponent=e,t}(t)}}let $h=(()=>{class e{static#e=this.NULL=new OP}return e})();function xP(){return dl(rn(),K())}function dl(e,t){return new Qn(Ln(e,t))}let Qn=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=xP}return e})();function kP(e){return e instanceof Qn?e.nativeElement:e}class gI{}let Vo=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function FP(){const e=K(),n=Kn(rn().index,e);return(xn(n)?n:e)[De]}()}return e})(),LP=(()=>{class e{static#e=this.\u0275prov=Le({token:e,providedIn:"root",factory:()=>null})}return e})();class lu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const mI=new lu("16.2.8"),Nm={};function EI(e,t=null,n=null,r){const i=CI(e,t,n,r);return i.resolveInjectorInitializers(),i}function CI(e,t=null,n=null,r,i=new Set){const s=[n||Je,hP(e)];return r=r||("object"==typeof e?void 0:me(e)),new Fh(s,t||kh(),r||null,i)}let Tr=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=fo;static#t=this.NULL=new pm;static create(n,r){if(Array.isArray(n))return EI({name:""},r,n,"");{const i=n.name??"";return EI({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Le({token:e,providedIn:"any",factory:()=>re(eI)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function Om(e){return e.ngOriginalError}class ls{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Om(t);for(;n&&Om(n);)n=Om(n);return n||null}}function km(e){return t=>{setTimeout(e,void 0,t)}}const Et=class WP extends F{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=km(s),i&&(i=km(i)),o&&(o=km(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof Be&&t.add(a),a}};function DI(...e){}class it{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function zP(){const e="function"==typeof dt.requestAnimationFrame;let t=dt[e?"requestAnimationFrame":"setTimeout"],n=dt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function qP(e){const t=()=>{!function ZP(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(dt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Lm(e),e.isCheckStableRunning=!0,Fm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Lm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function YP(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return wI(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),bI(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return wI(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),bI(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Lm(e),Fm(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new G(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,GP,DI,DI);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const GP={};function Fm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function wI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bI(e){e._nesting--,Fm(e)}class KP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const SI=new se("",{providedIn:"root",factory:TI});function TI(){const e=_t(it);let t=!0;return C(new Oe(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Oe(i=>{let s;e.runOutsideAngular(()=>{s=e.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const o=e.onUnstable.subscribe(()=>{it.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe($()))}let Vm=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Le({token:e,providedIn:"root",factory:()=>new e})}return e})();function cu(e){for(;e;){e[Te]|=64;const t=eu(e);if(So(e)&&!t)return e;e=t}return null}const PI=new se("",{providedIn:"root",factory:()=>!1});let zh=null;function FI(e,t){return e[t]??BI()}function LI(e,t){const n=BI();n.producerNode?.length&&(e[t]=zh,n.lView=e,zh=VI())}const oO={...Hd,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{cu(e.lView)},lView:null};function VI(){return Object.create(oO)}function BI(){return zh??=VI(),zh}const Ne={};function ni(e){UI(nt(),K(),Sn()+e,!1)}function UI(e,t,n,r){if(!r)if(3==(3&t[Te])){const s=e.preOrderCheckHooks;null!==s&&ja(t,s,n)}else{const s=e.preOrderHooks;null!==s&&Oo(t,s,0,n)}is(n)}function Y(e,t=je.Default){const n=K();return null===n?re(e,t):zc(rn(),n,M(e),t)}function Gh(e,t,n,r,i,s,o,a,c,d,p){const g=t.blueprint.slice();return g[Lt]=i,g[Te]=140|r,(null!==d||e&&2048&e[Te])&&(g[Te]|=2048),Fa(g),g[Tt]=g[bs]=e,g[Ut]=n,g[ws]=o||e&&e[ws],g[De]=a||e&&e[De],g[Wr]=c||e&&e[Wr]||null,g[yn]=s,g[wo]=function fN(){return hN++}(),g[hi]=p,g[gc]=d,g[xt]=2==t.type?e[xt]:g,g}function pl(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Bm(e,t,n,r,i){const s=Va(),o=Ro(),c=e.data[t]=function gO(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,a=0;return function xs(){return null!==Ie.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(e,t,n,r,i),function Sg(){return Ie.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function rs(){const e=Ie.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return br(s,!0),s}function uu(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function HI(e,t,n,r,i){const s=FI(t,Zr),o=Sn(),a=2&r;try{is(-1),a&&t.length>$e&&UI(e,t,$e,!1),cr(a?2:0,i);const d=a?s:null,p=ts(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{Ms(d,p)}}finally{a&&null===t[Zr]&&LI(t,Zr),is(o),cr(a?3:1,i)}}function Um(e,t,n){if(Ld(t)){const r=Fn(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Fn(r)}}}function Hm(e,t,n){kc()&&(function IO(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;Ts(n)&&function MO(e,t,n){const r=Ln(t,e),i=jI(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Zh(e,Gh(e,i,null,o,r,t,null,e[ws].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||ce(n,t),Bn(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const c=e.data[a],d=ki(t,e,a,n);Bn(d,t),null!==o&&RO(0,a-i,d,c,0,o),Kr(c)&&(Kn(n.index,t)[Ut]=ki(t,e,a,n))}}(e,t,n,Ln(n,t)),64==(64&n.flags)&&ZI(e,t,n))}function jm(e,t,n=Ln){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function jI(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=$m(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function $m(e,t,n,r,i,s,o,a,c,d,p){const g=$e+r,_=g+i,I=function cO(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ne);return n}(g,_),T="function"==typeof d?d():d;return I[ae]={type:e,blueprint:I,template:n,queries:null,viewQuery:a,declTNode:t,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:p}}let $I=e=>null;function WI(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?zI(n,t,i,s):r.hasOwnProperty(i)&&zI(n,t,r[i],s)}return n}function zI(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Wm(e,t,n,r){if(kc()){const i=null===r?null:{"":-1},s=function wO(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(yo(t,o.selectors,!1))if(r||(r=[]),Kr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),zm(e,t,a.length)}else r.unshift(o),zm(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&GI(e,t,n,o,i,a),i&&function bO(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new G(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=Qi(n.mergedAttrs,n.attrs)}function GI(e,t,n,r,i,s){for(let d=0;d<r.length;d++)Xr(ce(n,t),e,r[d].type);!function TO(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,c=uu(e,t,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=Qi(n.mergedAttrs,p.hostAttrs),AO(e,n,t,c,p),SO(c,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function mO(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let c=null,d=null;for(let p=t.directiveStart;p<i;p++){const g=s[p],_=n?n.get(g):null,T=_?_.outputs:null;c=WI(g.inputs,p,c,_?_.inputs:null),d=WI(g.outputs,p,d,T);const O=null===c||null===o||Da(t)?null:NO(c,p,o);a.push(O)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=d}(e,n,s)}function ZI(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Ag(){return Ie.lFrame.currentDirectiveIndex}();try{is(s);for(let a=r;a<i;a++){const c=e.data[a],d=t[a];Ha(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&DO(c,d)}}finally{is(-1),Ha(o)}}function DO(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function zm(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function SO(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Kr(t)&&(n[""]=e)}}function AO(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=wr(i.type)),o=new Vs(s,Kr(i),Y);e.blueprint[r]=o,n[r]=o,function EO(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function CO(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,uu(e,n,i.hostVars,Ne),i)}function RO(e,t,n,r,i,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)qI(r,n,o[a++],o[a++],o[a++])}function qI(e,t,n,r,i){const s=Fn(null);try{const o=e.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{Fn(s)}}function NO(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function KI(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function YI(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=e.data[s];Hc(n[r]),o.contentQueries(2,t[s],s)}}}function Zh(e,t){return e[Io]?e[Ta][Dr]=t:e[Io]=t,e[Ta]=t,t}function Zm(e,t,n){Hc(0);const r=Fn(null);try{t(e,n)}finally{Fn(r)}}function QI(e){return e[Ai]||(e[Ai]=[])}function JI(e){return e.cleanup||(e.cleanup=[])}function eD(e,t){const n=e[Wr],r=n?n.get(ls,null):null;r&&r.handleError(t)}function qm(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];qI(e.data[o],t[o],r,a,i)}}function PO(e,t){const n=Kn(t,e),r=n[ae];!function OO(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[Lt];null!==i&&null===n[hi]&&(n[hi]=Am(i,n[Wr])),Km(r,n,n[Ut])}function Km(e,t,n){jc(t);try{const r=e.viewQuery;null!==r&&Zm(1,r,n);const i=e.template;null!==i&&HI(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&YI(e,t),e.staticViewQueries&&Zm(2,e.viewQuery,n);const s=e.components;null!==s&&function xO(e,t){for(let n=0;n<t.length;n++)PO(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Te]&=-5,Po()}}let tD=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Kd(e,t,n){const r=Object.create(mg);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Dc(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Wd(r))return;r.hasRun=!0;const o=ts(r);try{r.cleanupFn(),r.cleanupFn=Yd,r.fn(i)}finally{Ms(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Le({token:e,providedIn:"root",factory:()=>new e})}return e})();function qh(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=Jt(i,a):2==s&&(r=Jt(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function du(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];null!==s&&r.push(ht(s)),kn(s)&&nD(s,r);const o=n.type;if(8&o)du(e,t,n.child,r);else if(32&o){const a=Xg(n,t);let c;for(;c=a();)r.push(c)}else if(16&o){const a=LC(t,n);if(Array.isArray(a))r.push(...a);else{const c=eu(t[xt]);du(c[ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function nD(e,t){for(let n=en;n<e.length;n++){const r=e[n],i=r[ae].firstChild;null!==i&&du(r[ae],r,i,t)}e[qr]!==e[Lt]&&t.push(e[qr])}function Kh(e,t,n,r=!0){const i=t[ws],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{rD(e,t,e.template,n)}catch(c){throw r&&eD(t,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function rD(e,t,n,r){const i=t[Te];if(256!=(256&i)){t[ws].effectManager?.flush(),jc(t);try{Fa(t),function Ba(e){return Ie.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&HI(e,t,n,2,r);const o=3==(3&i);if(o){const d=e.preOrderCheckHooks;null!==d&&ja(t,d,null)}else{const d=e.preOrderHooks;null!==d&&Oo(t,d,0,null),$c(t,0)}if(function LO(e){for(let t=bC(e);null!==t;t=SC(t)){if(!t[Fd])continue;const n=t[bo];for(let r=0;r<n.length;r++){xc(n[r])}}}(t),iD(t,2),null!==e.contentQueries&&YI(e,t),o){const d=e.contentCheckHooks;null!==d&&ja(t,d)}else{const d=e.contentHooks;null!==d&&Oo(t,d,1),$c(t,1)}!function lO(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=FI(t,Ss);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)is(~s);else{const o=s,a=n[++i],c=n[++i];Tg(a,o),r.dirty=!1;const d=ts(r);try{c(2,t[o])}finally{Ms(r,d)}}}}finally{null===t[Ss]&&LI(t,Ss),is(-1)}}(e,t);const a=e.components;null!==a&&oD(t,a,0);const c=e.viewQuery;if(null!==c&&Zm(2,c,r),o){const d=e.viewCheckHooks;null!==d&&ja(t,d)}else{const d=e.viewHooks;null!==d&&Oo(t,d,2),$c(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Te]&=-73,Xd(t)}finally{Po()}}}function iD(e,t){for(let n=bC(e);null!==n;n=SC(n))for(let r=en;r<n.length;r++)sD(n[r],t)}function VO(e,t,n){sD(Kn(t,e),n)}function sD(e,t){if(!function yg(e){return 128==(128&e[Te])}(e))return;const n=e[ae],r=e[Te];if(80&r&&0===t||1024&r||2===t)rD(n,e,n.template,e[Ut]);else if(e[Xi]>0){iD(e,1);const i=n.components;null!==i&&oD(e,i,1)}}function oD(e,t,n){for(let r=0;r<t.length;r++)VO(e,t[r],n)}class hu{get rootNodes(){const t=this._lView,n=t[ae];return du(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(t){this._lView[Ut]=t}get destroyed(){return 256==(256&this._lView[Te])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Tt];if(kn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(bh(t,r),gh(n,r))}this._attachedToViewContainer=!1}tm(this._lView[ae],this._lView)}onDestroy(t){!function eh(e,t){if(256==(256&e[Te]))throw new G(911,!1);null===e[Gr]&&(e[Gr]=[]),e[Gr].push(t)}(this._lView,t)}markForCheck(){cu(this._cdRefInjectingView||this._lView)}detach(){this._lView[Te]&=-129}reattach(){this._lView[Te]|=128}detectChanges(){Kh(this._lView[ae],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function TN(e,t){nu(e,t,t[De],2,null,null)}(this._lView[ae],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=t}}class BO extends hu{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Kh(t[ae],t,t[Ut],!1)}checkNoChanges(){}get context(){return null}}class aD extends $h{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=tt(t);return new fu(n,this.ngModule)}}function lD(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class HO{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Is(r);const i=this.injector.get(t,Nm,r);return i!==Nm||n===Nm?i:this.parentInjector.get(t,n,r)}}class fu extends fI{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=lD(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return lD(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function uc(e){return e.map(rg).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof as?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new HO(t,s):t,a=o.get(gI,null);if(null===a)throw new G(407,!1);const g={rendererFactory:a,sanitizer:o.get(LP,null),effectManager:o.get(tD,null),afterRenderEventManager:o.get(Vm,null)},_=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function uO(e,t,n,r){const s=r.get(PI,!1)||n===_n.ShadowDom,o=e.selectRootElement(t,s);return function dO(e){$I(e)}(o),o}(_,r,this.componentDef.encapsulation,o):wh(_,I,function UO(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(I)),te=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let B=null;null!==T&&(B=Am(T,o,!0));const ne=$m(0,null,null,1,0,null,null,null,null,null,null),fe=Gh(null,ne,null,te,null,null,g,_,o,null,B);let Pe,mr;jc(fe);try{const ms=this.componentDef;let Yl,IE=null;ms.findHostDirectiveDefs?(Yl=[],IE=new Map,ms.findHostDirectiveDefs(ms,Yl,IE),Yl.push(ms)):Yl=[ms];const r3=function $O(e,t){const n=e[ae],r=$e;return e[r]=t,pl(n,r,2,"#host",null)}(fe,T),i3=function WO(e,t,n,r,i,s,o){const a=i[ae];!function zO(e,t,n,r){for(const i of e)t.mergedAttrs=Qi(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(qh(t,t.mergedAttrs,!0),null!==n&&HC(r,n,t))}(r,e,t,o);let c=null;null!==t&&(c=Am(t,i[Wr]));const d=s.rendererFactory.createRenderer(t,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=Gh(i,jI(n),null,p,i[e.index],e,s,d,null,null,c);return a.firstCreatePass&&zm(a,e,r.length-1),Zh(i,g),i[e.index]=g}(r3,T,ms,Yl,fe,g,_);mr=Nc(ne,$e),T&&function ZO(e,t,n,r){if(r)ya(e,n,["ng-version",mI.full]);else{const{attrs:i,classes:s}=function ig(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!lr(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&ya(e,n,i),s&&s.length>0&&UC(e,n,s.join(" "))}}(_,ms,T,r),void 0!==n&&function qO(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(mr,this.ngContentSelectors,n),Pe=function GO(e,t,n,r,i,s){const o=rn(),a=i[ae],c=Ln(o,i);GI(a,i,o,n,null,r);for(let p=0;p<n.length;p++)Bn(ki(i,a,o.directiveStart+p,o),i);ZI(a,i,o),c&&Bn(c,i);const d=ki(i,a,o.directiveStart+o.componentOffset,o);if(e[Ut]=i[Ut]=d,null!==s)for(const p of s)p(d,t);return Um(a,o,e),d}(i3,ms,Yl,IE,fe,[KO]),Km(ne,fe,null)}finally{Po()}return new jO(this.componentType,Pe,dl(mr,fe),fe,mr)}}class jO extends NP{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new BO(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const s=this._rootLView;qm(s[ae],s,i,t,n),this.previousInputValues.set(t,n),cu(Kn(this._tNode.index,s))}}get injector(){return new Yn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function KO(){const e=rn();Ls(K()[ae],e)}function vt(e){let t=function cD(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(Kr(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new G(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const o=e;o.inputs=Yh(e.inputs),o.inputTransforms=Yh(e.inputTransforms),o.declaredInputs=Yh(e.declaredInputs),o.outputs=Yh(e.outputs);const a=i.hostBindings;a&&XO(e,a);const c=i.viewQuery,d=i.contentQueries;if(c&&QO(e,c),d&&JO(e,d),ut(e.inputs,i.inputs),ut(e.declaredInputs,i.declaredInputs),ut(e.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),ut(o.inputTransforms,i.inputTransforms)),Kr(i)&&i.data.animation){const p=e.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(e),a===vt&&(n=!1)}}t=Object.getPrototypeOf(t)}!function YO(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Qi(i.hostAttrs,n=Qi(n,i.hostAttrs))}}(r)}function Yh(e){return e===jr?{}:e===Je?[]:e}function QO(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function JO(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,s)=>{t(r,i,s),n(r,i,s)}:t}function XO(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function Qh(e){return!!function Ym(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Un(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Uo(e,t,n,r,i,s,o,a){const c=K(),d=nt(),p=e+$e,g=d.firstCreatePass?function bx(e,t,n,r,i,s,o,a,c){const d=t.consts,p=pl(t,e,4,o||null,Oi(d,a));Wm(t,n,p,Oi(d,c)),Ls(t,p);const g=p.tView=$m(2,p,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return null!==t.queries&&(t.queries.template(t,p),g.queries=t.queries.embeddedTView(p)),p}(p,d,c,t,n,r,i,s,o):d.data[p];br(g,!1);const _=bD(d,c,g,e);Fs()&&Th(d,c,_,g),Bn(_,c),Zh(c,c[p]=KI(_,c,_,g)),vc(g)&&Hm(d,c,g),null!=o&&jm(c,g,a)}let bD=function SD(e,t,n,r){return Jr(!0),t[De].createComment("")};function pi(e,t,n){const r=K();return Un(r,ks(),t)&&function Ar(e,t,n,r,i,s,o,a){const c=Ln(t,n);let p,d=t.inputs;!a&&null!=d&&(p=d[r])?(qm(e,n,p,r,i),Ts(t)&&function vO(e,t){const n=Kn(t,e);16&n[Te]||(n[Te]|=64)}(n,t.index)):3&t.type&&(r=function _O(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(c,r,i))}(nt(),function kt(){const e=Ie.lFrame;return Nc(e.tView,e.selectedIndex)}(),r,e,t,r[De],n,!1),pi}function n_(e,t,n,r,i){const o=i?"class":"style";qm(e,n,t.inputs[o],o,r)}function ln(e,t,n,r){const i=K(),s=nt(),o=$e+e,a=i[De],c=s.firstCreatePass?function Rx(e,t,n,r,i,s){const o=t.consts,c=pl(t,e,2,r,Oi(o,i));return Wm(t,n,c,Oi(o,s)),null!==c.attrs&&qh(c,c.attrs,!1),null!==c.mergedAttrs&&qh(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,t,n,r):s.data[o],d=TD(s,i,c,a,t,e);i[o]=d;const p=vc(c);return br(c,!0),HC(a,d,c),32!=(32&c.flags)&&Fs()&&Th(s,i,d,c),0===function Cg(){return Ie.lFrame.elementDepthCount}()&&Bn(d,i),function nh(){Ie.lFrame.elementDepthCount++}(),p&&(Hm(s,i,c),Um(s,c,i)),null!==r&&jm(i,c),ln}function cn(){let e=rn();Ro()?function Vc(){Ie.lFrame.isParent=!1}():(e=e.parent,br(e,!1));const t=e;(function Ig(e){return Ie.skipHydrationRootTNode===e})(t)&&function Lc(){Ie.skipHydrationRootTNode=null}(),function rh(){Ie.lFrame.elementDepthCount--}();const n=nt();return n.firstCreatePass&&(Ls(n,e),Ld(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Lg(e){return 0!=(8&e.flags)}(t)&&n_(n,t,K(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Vg(e){return 0!=(16&e.flags)}(t)&&n_(n,t,K(),t.stylesWithoutHost,!1),cn}function Ho(e,t,n,r){return ln(e,t,n,r),cn(),Ho}let TD=(e,t,n,r,i,s)=>(Jr(!0),wh(r,i,function dh(){return Ie.lFrame.currentNamespace}()));function s_(){return K()}function nf(e){return!!e&&"function"==typeof e.then}function RD(e){return!!e&&"function"==typeof e.subscribe}function Tn(e,t,n,r){const i=K(),s=nt(),o=rn();return function PD(e,t,n,r,i,s,o){const a=vc(r),d=e.firstCreatePass&&JI(e),p=t[Ut],g=QI(t);let _=!0;if(3&r.type||o){const O=Ln(r,t),H=o?o(O):O,te=g.length,B=o?fe=>o(ht(fe[r.index])):r.index;let ne=null;if(!o&&a&&(ne=function Fx(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[Ai],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==ne)(ne.__ngLastListenerFn__||ne).__ngNextListenerFn__=s,ne.__ngLastListenerFn__=s,_=!1;else{s=xD(r,t,p,s,!1);const fe=n.listen(H,i,s);g.push(s,fe),d&&d.push(i,B,te,te+1)}}else s=xD(r,t,p,s,!1);const I=r.outputs;let T;if(_&&null!==I&&(T=I[i])){const O=T.length;if(O)for(let H=0;H<O;H+=2){const Pe=t[T[H]][T[H+1]].subscribe(s),mr=g.length;g.push(s,Pe),d&&d.push(i,r.index,mr,-(mr+1))}}}(s,i,i[De],o,e,t,r),Tn}function OD(e,t,n,r){try{return cr(6,t,n),!1!==n(r)}catch(i){return eD(e,i),!1}finally{cr(7,t,n)}}function xD(e,t,n,r,i){return function s(o){if(o===Function)return r;cu(e.componentOffset>-1?Kn(e.index,t):t);let c=OD(t,n,r,o),d=s.__ngNextListenerFn__;for(;d;)c=OD(t,n,d,o)&&c,d=d.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function wl(e=1){return function Rg(e){return(Ie.lFrame.contextLView=function Ng(e,t){for(;e>0;)t=t[bs],e--;return t}(e,Ie.lFrame.contextLView))[Ut]}(e)}function rf(e,t){return e<<17|t<<2}function Hs(e){return e>>17&32767}function a_(e){return 2|e}function jo(e){return(131068&e)>>2}function l_(e,t){return-131069&e|t<<2}function c_(e){return 1|e}function WD(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Hs(s):jo(s),c=!1;for(;0!==a&&(!1===c||o);){const p=e[a+1];zx(e[a],t)&&(c=!0,e[a+1]=r?c_(p):a_(p)),a=r?Hs(p):jo(p)}c&&(e[n+1]=r?a_(s):c_(s))}function zx(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&tl(e,t)>=0}function Sl(e,t){return function gi(e,t,n,r){const i=K(),s=nt(),o=function fi(e){const t=Ie.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);s.firstUpdatePass&&function XD(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[Sn()],o=function JD(e,t){return t>=e.expandoStartIndex}(e,n);(function rw(e,t){return 0!=(e.flags&(t?8:16))})(s,r)&&null===t&&!o&&(t=!1),t=function ek(e,t,n,r){const i=function Uc(e){const t=Ie.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=vu(n=u_(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=u_(i,e,t,n,r),null===s){let c=function tk(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==jo(r))return e[Hs(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=u_(null,e,t,c[1],r),c=vu(c,t.attrs,r),function nk(e,t,n,r){e[Hs(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else s=function rk(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=vu(r,e[s].hostAttrs,n);return vu(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function $x(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Hs(o),c=jo(o);e[r]=n;let p,d=!1;if(Array.isArray(n)?(p=n[1],(null===p||tl(n,p)>0)&&(d=!0)):p=n,i)if(0!==c){const _=Hs(e[a+1]);e[r+1]=rf(_,a),0!==_&&(e[_+1]=l_(e[_+1],r)),e[a+1]=function Hx(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=rf(a,0),0!==a&&(e[a+1]=l_(e[a+1],r)),a=r;else e[r+1]=rf(c,0),0===a?a=r:e[c+1]=l_(e[c+1],r),c=r;d&&(e[r+1]=a_(e[r+1])),WD(e,p,r,!0),WD(e,p,r,!1),function Wx(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&tl(s,t)>=0&&(n[r+1]=c_(n[r+1]))}(t,p,e,r,s),o=rf(a,c),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}(s,e,o,r),t!==Ne&&Un(i,o,t)&&function tw(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,d=c[a+1],p=function jx(e){return 1==(1&e)}(d)?nw(c,t,n,i,jo(d),o):void 0;sf(p)||(sf(s)||function Ux(e){return 2==(2&e)}(d)&&(s=nw(c,null,n,i,a,o)),function LN(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Bs.DashCase;null==i?e.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Bs.Important),e.setStyle(n,r,i,s))}}(r,o,ka(Sn(),n),i,s))}(s,s.data[Sn()],i,i[De],e,i[o+1]=function ak(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=me(function Us(e){return e instanceof zC?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,o)}(e,t,null,!0),Sl}function u_(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=vu(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function vu(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Sr(e,o,!!n||t[++s]))}return void 0===e?null:e}function nw(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const c=e[i],d=Array.isArray(c),p=d?c[1]:c,g=null===p;let _=n[i+1];_===Ne&&(_=g?Je:void 0);let I=g?$g(_,r):p===r?_:void 0;if(d&&!sf(I)&&(I=$g(c,r)),sf(I)&&(a=I,o))return a;const T=e[i+1];i=o?Hs(T):jo(T)}if(null!==t){let c=s?t.residualClasses:t.residualStyles;null!=c&&(a=$g(c,r))}return a}function sf(e){return void 0!==e}function ji(e,t=""){const n=K(),r=nt(),i=e+$e,s=r.firstCreatePass?pl(r,i,1,t,null):r.data[i],o=iw(r,n,s,t,e);n[i]=o,Fs()&&Th(r,n,o,s),br(s,!1)}let iw=(e,t,n,r,i)=>(Jr(!0),function Dh(e,t){return e.createText(t)}(t[De],r));function af(e){return lf("",e,""),af}function lf(e,t,n){const r=K(),i=function ml(e,t,n,r){return Un(e,ks(),n)?t+ue(n)+r:Ne}(r,e,t,n);return i!==Ne&&function us(e,t,n){const r=ka(t,e);!function AC(e,t,n){e.setValue(t,n)}(e[De],r,n)}(r,Sn(),i),lf}const Al="en-US";let Sw=Al;function f_(e,t,n,r,i){if(e=M(e),Array.isArray(e))for(let s=0;s<e.length;s++)f_(e[s],t,n,r,i);else{const s=nt(),o=K(),a=rn();let c=Lo(e)?e:M(e.provide);const d=aI(e),p=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Lo(e)||!e.multi){const I=new Vs(d,i,Y),T=g_(c,t,i?p:p+_,g);-1===T?(Xr(ce(a,o),s,c),p_(s,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(I),o.push(I)):(n[T]=I,o[T]=I)}else{const I=g_(c,t,p+_,g),T=g_(c,t,p,p+_),H=T>=0&&n[T];if(i&&!H||!i&&!(I>=0&&n[I])){Xr(ce(a,o),s,c);const te=function AF(e,t,n,r,i){const s=new Vs(e,n,Y);return s.multi=[],s.index=t,s.componentProviders=0,Qw(s,i,r&&!n),s}(i?TF:SF,n.length,i,r,d);!i&&H&&(n[T].providerFactory=te),p_(s,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(te),o.push(te)}else p_(s,e,I>-1?I:T,Qw(n[i?T:I],d,!i&&r));!i&&r&&H&&n[T].componentProviders++}}}function p_(e,t,n,r){const i=Lo(t),s=function pP(e){return!!e.useClass}(t);if(i||s){const c=(s?M(t.useClass):t).prototype.ngOnDestroy;if(c){const d=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const p=d.indexOf(n);-1===p?d.push(n,[r,c]):d[p+1].push(r,c)}else d.push(n,c)}}}function Qw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function g_(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function SF(e,t,n,r){return m_(this.multi,[])}function TF(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ki(n,n[ae],this.providerFactory.index,r);s=a.slice(0,o),m_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],m_(i,s);return s}function m_(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ft(e,t=[]){return n=>{n.providersResolver=(r,i)=>function bF(e,t,n){const r=nt();if(r.firstCreatePass){const i=Kr(e);f_(n,r.data,r.blueprint,i,!0),f_(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class Wo{}class MF{}class __ extends Wo{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aD(this);const i=function On(e,t){const n=e[Zn]||null;if(!n&&!0===t)throw new Error(`Type ${me(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function cs(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=CI(t,n,[{provide:Wo,useValue:this},{provide:$h,useValue:this.componentFactoryResolver},...r],me(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class v_ extends MF{constructor(t){super(),this.moduleType=t}create(t){return new __(this.moduleType,t,[])}}function oL(){return this._results[Symbol.iterator]()}class E_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Et)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=E_.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=oL)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function ei(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function UR(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function lL(e,t,n,r=!0){const i=t[ae];if(function MN(e,t,n,r){const i=en+r,s=n.length;r>0&&(n[i-1][Dr]=t),r<s-en?(t[Dr]=n[i],iC(n,en+r,t)):(n.push(t),t[Dr]=null),t[Tt]=n;const o=t[Do];null!==o&&n!==o&&function RN(e,t){const n=e[bo];t[xt]!==t[Tt][Tt][xt]&&(e[Fd]=!0),null===n?e[bo]=[t]:n.push(t)}(o,t);const a=t[zr];null!==a&&a.insertView(e),t[Te]|=128}(i,t,e,n),r){const s=sm(n,e),o=t[De],a=Sh(o,e[qr]);null!==a&&function SN(e,t,n,r,i,s){r[Lt]=i,r[yn]=t,nu(e,r,n,1,i,s)}(i,e[yn],o,t,a,s)}}let _i=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=dL}return e})();const cL=_i,uL=class extends cL{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function aL(e,t,n,r){const i=t.tView,a=Gh(e,i,n,4096&e[Te]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Do]=e[t.index];const d=e[zr];return null!==d&&(a[zr]=d.createEmbeddedView(i)),Km(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new hu(i)}};function dL(){return ff(rn(),K())}function ff(e,t){return 4&e.type?new uL(t,e,dl(e,t)):null}let vi=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=_L}return e})();function _L(){return mb(rn(),K())}const vL=vi,pb=class extends vL{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return dl(this._hostTNode,this._hostLView)}get injector(){return new Yn(this._hostTNode,this._hostLView)}get parentInjector(){const t=fn(this._hostTNode,this._hostLView);if(Ga(t)){const n=h(t,this._hostLView),r=xo(t);return new Yn(n[ae].data[r+8],n)}return new Yn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=gb(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-en}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,s){const o=t&&!function Yc(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const O=n||{};a=O.index,r=O.injector,i=O.projectableNodes,s=O.environmentInjector||O.ngModuleRef}const c=o?t:new fu(tt(t)),d=r||this.parentInjector;if(!s&&null==c.ngModule){const H=(o?d:this.parentInjector).get(as,null);H&&(s=H)}tt(c.componentType??{});const I=c.create(d,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function Oc(e){return kn(e[Tt])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=i[Tt],p=new pb(d,d[yn],d[Tt]);p.detach(p.indexOf(t))}}const o=this._adjustIndex(n),a=this._lContainer;return lL(a,i,o,!r),t.attachToViewContainerRef(),iC(C_(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=gb(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=bh(this._lContainer,n);r&&(gh(C_(this._lContainer),n),tm(r[ae],r))}detach(t){const n=this._adjustIndex(t,-1),r=bh(this._lContainer,n);return r&&null!=gh(C_(this._lContainer),n)?new hu(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function gb(e){return e[8]}function C_(e){return e[8]||(e[8]=[])}function mb(e,t){let n;const r=t[e.index];return kn(r)?n=r:(n=KI(r,t,null,e),t[e.index]=n,Zh(t,n)),_b(n,t,e,r),new pb(n,e,t)}let _b=function vb(e,t,n,r){if(e[qr])return;let i;i=8&n.type?ht(r):function yL(e,t){const n=e[De],r=n.createComment(""),i=Ln(t,e);return Fo(n,Sh(n,i),r,function xN(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[qr]=i};class I_{constructor(t){this.queryList=t,this.matches=null}clone(){return new I_(this.queryList)}setDirty(){this.queryList.setDirty()}}class D_{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new D_(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Db(t,n).matches&&this.queries[n].setDirty()}}class yb{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class w_{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new w_(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class b_{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new b_(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,n,IL(n,s)),this.matchTNodeWithReadOption(t,n,ko(n,t,s,!1,!1))}else r===_i?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ko(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Qn||i===vi||i===_i&&4&n.type)this.addMatch(n.index,-2);else{const s=ko(n,t,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function IL(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function wL(e,t,n,r){return-1===n?function DL(e,t){return 11&e.type?dl(e,t):4&e.type?ff(e,t):null}(t,e):-2===n?function bL(e,t,n){return n===Qn?dl(t,e):n===_i?ff(t,e):n===vi?mb(t,e):void 0}(e,t,r):ki(e,e[ae],n,t)}function Eb(e,t,n,r){const i=t[zr].queries[r];if(null===i.matches){const s=e.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){const d=o[c];a.push(d<0?null:wL(t,s[d],o[c+1],n.metadata.read))}i.matches=a}return i.matches}function S_(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Eb(e,t,i,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const d=s[a+1],p=t[-c];for(let g=en;g<p.length;g++){const _=p[g];_[Do]===_[Tt]&&S_(_[ae],_,d,r)}if(null!==p[bo]){const g=p[bo];for(let _=0;_<g.length;_++){const I=g[_];S_(I[ae],I,d,r)}}}}}return r}function gf(e){const t=K(),n=nt(),r=No();Hc(r+1);const i=Db(n,r);if(e.dirty&&function Pc(e){return 4==(4&e[Te])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?S_(n,t,r,[]):Eb(n,t,i,r);e.reset(s,kP),e.notifyOnChanges()}return!0}return!1}function mf(e,t,n,r){const i=nt();if(i.firstCreatePass){const s=rn();(function Ib(e,t,n){null===e.queries&&(e.queries=new w_),e.queries.track(new b_(t,n))})(i,new yb(t,n,r),s.index),function AL(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function Cb(e,t,n){const r=new E_(4==(4&n));(function pO(e,t,n,r){const i=QI(t);i.push(n),e.firstCreatePass&&JI(e).push(r,i.length-1)})(e,t,r,r.destroy),null===t[zr]&&(t[zr]=new D_),t[zr].queries.push(new I_(r))}(i,K(),n)}function _f(){return function TL(e,t){return e[zr].queries[t].queryList}(K(),No())}function Db(e,t){return e.queries.getByIndex(t)}const YL=new se("Application Initializer");let N_=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=_t(YL,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(nf(s))n.push(s);else if(RD(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ds=new se("LocaleId",{providedIn:"root",factory:()=>_t(ds,je.Optional|je.SkipSelf)||function JL(){return typeof $localize<"u"&&$localize.locale||Al}()});let t1=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Wb=new se(""),Ef=new se("");let F_,x_=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,F_||(function D1(e){F_=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(re(it),re(k_),re(Ef))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})(),k_=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return F_?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),js=null;const zb=new se("AllowMultipleToken"),L_=new se("PlatformDestroyListeners"),Gb=new se("appBootstrapListener");function Kb(e,t,n=[]){const r=`Platform: ${t}`,i=new se(r);return(s=[])=>{let o=V_();if(!o||o.injector.get(zb,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function S1(e){if(js&&!js.get(zb,!1))throw new G(400,!1);(function Zb(){!function dg(e){Gd=e}(()=>{throw new G(600,!1)})})(),js=e;const t=e.get(Qb);(function qb(e){e.get(lI,null)?.forEach(n=>n())})(e)}(function Yb(e=[],t){return Tr.create({name:t,providers:[{provide:_m,useValue:"platform"},{provide:L_,useValue:new Set([()=>js=null])},...e]})}(a,r))}return function A1(e){const t=V_();if(!t)throw new G(401,!1);return t}()}}function V_(){return js?.get(Qb)??null}let Qb=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function M1(e="zone.js",t){return"noop"===e?new KP:"zone.js"===e?new it(t):e}(r?.ngZone,function Jb(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function NF(e,t,n){return new __(e,t,n)}(n.moduleType,this.injector,function rS(e){return[{provide:it,useFactory:e},{provide:Ph,multi:!0,useFactory:()=>{const t=_t(N1,{optional:!0});return()=>t.initialize()}},{provide:nS,useFactory:R1},{provide:SI,useFactory:TI}]}(()=>i)),o=s.injector.get(ls,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Cf(this._modules,s),a.unsubscribe()})}),function Xb(e,t,n){try{const r=n();return nf(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(N_);return a.runInitializers(),a.donePromise.then(()=>(function Tw(e){or(e,"Expected localeId to be defined"),"string"==typeof e&&(Sw=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ds,Al)||Al),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=eS({},r);return function w1(e,t,n){const r=new v_(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Au);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new G(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new G(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(L_,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(re(Tr))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function eS(e,t){return Array.isArray(t)?t.reduce(eS,e):{...e,...t}}let Au=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_t(nS),this.zoneIsStable=_t(SI),this.componentTypes=[],this.components=[],this.isStable=_t(t1).hasPendingTasks.pipe(he(n=>n?P(!1):this.zoneIsStable),Se(),$()),this._injector=_t(as)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof fI;if(!this._injector.get(N_).done)throw!i&&function Ji(e){const t=tt(e)||Xt(e)||wn(e);return null!==t&&t.standalone}(n),new G(405,!1);let o;o=i?n:this._injector.get($h).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function b1(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Wo),d=o.create(Tr.NULL,[],r||o.selector,a),p=d.location.nativeElement,g=d.injector.get(Wb,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Cf(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new G(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Cf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Gb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Cf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Cf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const nS=new se("",{providedIn:"root",factory:()=>_t(ls).handleError.bind(void 0)});function R1(){const e=_t(it),t=_t(ls);return n=>e.runOutsideAngular(()=>t.handleError(n))}let N1=(()=>{class e{constructor(){this.zone=_t(it),this.applicationRef=_t(Au)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let If=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=O1}return e})();function O1(e){return function x1(e,t,n){if(Ts(e)&&!n){const r=Kn(e.index,t);return new hu(r,r)}return 47&e.type?new hu(t[xt],t):null}(rn(),K(),16==(16&e))}class lS{constructor(){}supports(t){return Qh(t)}create(t){return new U1(t)}}const B1=(e,t)=>t;class U1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||B1}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<uS(r,i,s)?n:r,a=uS(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=c-i;if(d!=p){for(let _=0;_<d;_++){const I=_<s.length?s[_]:s[_]=0,T=I+_;p<=T&&T<d&&(s[_]=I+1)}s[o.previousIndex]=p-d}}a!==c&&t(o,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Qh(t))throw new G(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function ax(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new H1(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new cS),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class H1{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class j1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class cS{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new j1,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uS(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function hS(){return new bf([new lS])}let bf=(()=>{class e{static#e=this.\u0275prov=Le({token:e,providedIn:"root",factory:hS});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||hS()),deps:[[e,new zg,new ti]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new G(901,!1)}}return e})();const Z1=Kb(null,"core",[]);let q1=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(re(Au))};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({})}return e})();let z_=null;function Ru(){return z_}class aV{}const Mr=new se("DocumentToken");class YV{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let PS=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new YV(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),OS(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{OS(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Y(vi),Y(_i),Y(bf))};static#t=this.\u0275dir=Ce({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function OS(e,t){e.context.$implicit=t.item}let xS=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new QV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){kS("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){kS("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Y(vi),Y(_i))};static#t=this.\u0275dir=Ce({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class QV{constructor(){this.$implicit=null,this.ngIf=null}}function kS(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${me(t)}'.`)}let IB=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({})}return e})();const VS="browser";function ov(e){return"server"===e}class QB extends aV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cv extends QB{static makeCurrent(){!function oV(e){z_||(z_=e)}(new cv)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function JB(){return xu=xu||document.querySelector("base"),xu?xu.getAttribute("href"):null}();return null==n?null:function XB(e){Bf=Bf||document.createElement("a"),Bf.setAttribute("href",e);const t=Bf.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function ZV(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Bf,xu=null,tU=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();const uv=new se("EventManagerPlugins");let $S=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(re(uv),re(it))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();class WS{constructor(t){this._doc=t}}const dv="ng-app-id";let zS=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ov(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${dv}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(dv),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(dv,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(re(Mr),re(Lh),re(cI,8),re(Fi))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();const hv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fv=/%COMP%/g,sU=new se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ZS(e,t){return t.map(n=>n.replace(fv,e))}let qS=(()=>{class e{constructor(n,r,i,s,o,a,c,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ov(a),this.defaultRenderer=new pv(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_n.ShadowDom&&(r={...r,encapsulation:_n.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof YS?i.applyToHost(n):i instanceof gv&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case _n.Emulated:s=new YS(c,d,r,this.appId,p,o,a,g);break;case _n.ShadowDom:return new cU(c,d,n,r,o,a,this.nonce,g);default:s=new gv(c,d,r,p,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(re($S),re(zS),re(Lh),re(sU),re(Mr),re(Fi),re(it),re(cI))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();class pv{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(hv[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(KS(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(KS(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=hv[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=hv[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Bs.DashCase|Bs.Important)?t.style.setProperty(n,r,i&Bs.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Bs.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Ru().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function KS(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class cU extends pv{constructor(t,n,r,i,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=ZS(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gv extends pv{constructor(t,n,r,i,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?ZS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class YS extends gv{constructor(t,n,r,i,s,o,a,c){const d=i+"-"+r.id;super(t,n,r,s,o,a,c,d),this.contentAttr=function oU(e){return"_ngcontent-%COMP%".replace(fv,e)}(d),this.hostAttr=function aU(e){return"_nghost-%COMP%".replace(fv,e)}(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let uU=(()=>{class e extends WS{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(re(Mr))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();const QS=["alt","control","meta","shift"],dU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hU={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let fU=(()=>{class e extends WS{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ru().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),QS.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=dU[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),QS.forEach(o=>{o!==i&&(0,hU[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(re(Mr))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();const _U=Kb(Z1,"browser",[{provide:Fi,useValue:VS},{provide:lI,useValue:function pU(){cv.makeCurrent()},multi:!0},{provide:Mr,useFactory:function mU(){return function jN(e){lm=e}(document),document},deps:[]}]),vU=new se(""),e0=[{provide:Ef,useClass:class eU{addToWindow(t){dt.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new G(5103,!1);return s},dt.getAllAngularTestabilities=()=>t.getAllTestabilities(),dt.getAllAngularRootElements=()=>t.getAllRootElements(),dt.frameworkStabilizers||(dt.frameworkStabilizers=[]),dt.frameworkStabilizers.push(r=>{const i=dt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Ru().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Wb,useClass:x_,deps:[it,k_,Ef]},{provide:x_,useClass:x_,deps:[it,k_,Ef]}],t0=[{provide:_m,useValue:"root"},{provide:ls,useFactory:function gU(){return new ls},deps:[]},{provide:uv,useClass:uU,multi:!0,deps:[Mr,it,Fi]},{provide:uv,useClass:fU,multi:!0,deps:[Mr]},qS,zS,$S,{provide:gI,useExisting:qS},{provide:class AB{},useClass:tU,deps:[]},[]];let yU=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Lh,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(re(vU,12))};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({providers:[...t0,...e0],imports:[IB,q1]})}return e})();typeof window<"u"&&window;const{isArray:SU}=Array,{getPrototypeOf:TU,prototype:AU,keys:MU}=Object;const{isArray:PU}=Array;function xU(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}let a0=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Vo),Y(Qn))};static#t=this.\u0275dir=Ce({type:e})}return e})(),Go=(()=>{class e extends a0{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Vn(e)))(i||e)}}();static#t=this.\u0275dir=Ce({type:e,features:[vt]})}return e})();const $i=new se("NgValueAccessor"),FU={provide:$i,useExisting:x(()=>_v),multi:!0};let _v=(()=>{class e extends Go{writeValue(n){this.setProperty("checked",n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Vn(e)))(i||e)}}();static#t=this.\u0275dir=Ce({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&Tn("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[ft([FU]),vt]})}return e})();const LU={provide:$i,useExisting:x(()=>Uf),multi:!0},BU=new se("CompositionEventMode");let Uf=(()=>{class e extends a0{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function VU(){const e=Ru()?Ru().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Vo),Y(Qn),Y(BU,8))};static#t=this.\u0275dir=Ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Tn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ft([LU]),vt]})}return e})();const Hn=new se("NgValidators"),zs=new se("NgAsyncValidators");function _0(e){return null!=e}function v0(e){return nf(e)?E(e):e}function y0(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function E0(e,t){return t.map(n=>n(e))}function C0(e){return e.map(t=>function HU(e){return!e.validate}(t)?t:n=>t.validate(n))}function vv(e){return null!=e?function I0(e){if(!e)return null;const t=e.filter(_0);return 0==t.length?null:function(n){return y0(E0(n,t))}}(C0(e)):null}function D0(e){if(!e)return null;const t=e.filter(_0);return 0==t.length?null:function(n){return function kU(...e){const t=Cr(e),{args:n,keys:r}=function RU(e){if(1===e.length){const t=e[0];if(SU(t))return{args:t,keys:null};if(function NU(e){return e&&"object"==typeof e&&TU(e)===AU}(t)){const n=MU(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e),i=new Oe(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,d=o;for(let p=0;p<o;p++){let g=!1;Qe(n[p]).subscribe(ie(s,_=>{g||(g=!0,d--),a[p]=_},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?xU(r,a):a),s.complete())}))}});return t?i.pipe(function o0(e){return Me(t=>function OU(e,t){return PU(t)?e(...t):e(t)}(e,t))}(t)):i}(E0(n,t).map(v0)).pipe(Me(y0))}}function yv(e){return null!=e?D0(C0(e)):null}function w0(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Ev(e){return e?Array.isArray(e)?e:[e]:[]}function jf(e,t){return Array.isArray(e)?e.includes(t):e===t}function T0(e,t){const n=Ev(t);return Ev(e).forEach(i=>{jf(n,i)||n.push(i)}),n}function A0(e,t){return Ev(t).filter(n=>!jf(e,n))}class M0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=yv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class tr extends M0{get formDirective(){return null}get path(){return null}}class Gs extends M0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class R0{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let N0=(()=>{class e extends R0{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Gs,2))};static#t=this.\u0275dir=Ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Sl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[vt]})}return e})();const ku="VALID",Wf="INVALID",Pl="PENDING",Fu="DISABLED";function zf(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class k0{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ku}get invalid(){return this.status===Wf}get pending(){return this.status==Pl}get disabled(){return this.status===Fu}get enabled(){return this.status!==Fu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(T0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(T0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(A0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(A0(t,this._rawAsyncValidators))}hasValidator(t){return jf(this._rawValidators,t)}hasAsyncValidator(t){return jf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Pl,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Fu,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=ku,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ku||this.status===Pl)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fu:ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Pl,this._hasOwnPendingAsyncValidator=!0;const n=v0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Fu:this.errors?Wf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pl)?Pl:this._anyControlsHaveStatus(Wf)?Wf:ku}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){zf(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function GU(e){return Array.isArray(e)?vv(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function ZU(e){return Array.isArray(e)?yv(e):e||null}(this._rawAsyncValidators)}}const Ol=new se("CallSetDisabledState",{providedIn:"root",factory:()=>Gf}),Gf="always";function Lu(e,t,n=Gf){(function Sv(e,t){const n=function b0(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(w0(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function S0(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(w0(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();Kf(t._rawValidators,i),Kf(t._rawAsyncValidators,i)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function YU(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&F0(e,t)})}(e,t),function JU(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function QU(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&F0(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function KU(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Kf(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function F0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function B0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function U0(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const H0=class extends k0{constructor(t=null,n,r){super(function Dv(e){return(zf(e)?e.validators:e)||null}(n),function wv(e,t){return(zf(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=U0(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){B0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){B0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){U0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},a2={provide:Gs,useExisting:x(()=>Nv)},W0=(()=>Promise.resolve())();let Nv=(()=>{class e extends Gs{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new H0,this._registered=!1,this.name="",this.update=new Et,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Mv(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(s=>{s.constructor===Uf?n=s:function t2(e){return Object.getPrototypeOf(e.constructor)===Go}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Av(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){W0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function W_(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);W0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Zf(e,t){return[...t.path,e]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||e)(Y(tr,9),Y(Hn,10),Y(zs,10),Y($i,10),Y(If,8),Y(Ol,8))};static#t=this.\u0275dir=Ce({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ft([a2]),vt,Yr]})}return e})(),G0=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({})}return e})(),P2=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({imports:[G0]})}return e})(),x2=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ol,useValue:n.callSetDisabledState??Gf}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=qn({type:e});static#n=this.\u0275inj=ar({imports:[P2]})}return e})();class k2{constructor(t){this.text=t,this.done=!1,this.comments=[],this.showComment=!1,this.newComment=""}}var nr=ye(534);(0,nr.registerVersion)("firebase","10.5.2","app");class V2 extends Be{constructor(t,n){super()}schedule(t,n=0){return this}}const Qf={setInterval(e,t,...n){const{delegate:r}=Qf;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=Qf;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class Jf extends V2{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return Qf.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Qf.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pe(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}const Vv={now:()=>(Vv.delegate||Date).now(),delegate:void 0};class Bu{constructor(t,n=Bu.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Bu.now=Vv.now;class Xf extends Bu{constructor(t,n=Bu.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const H2=new class U2 extends Xf{}(class B2 extends Jf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}}),Uu=new Xf(Jf),j2=Uu;function uT(e,t,n){const r=D(e)||t||n?{next:e,error:t,complete:n}:e;return r?z((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ie(s,c=>{var d;null===(d=r.next)||void 0===d||d.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,c),s.error(c)},()=>{var c,d;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Kt}const Bv=new lu("ANGULARFIRE2_VERSION");const Uv=(e,t)=>{const n=t?[t]:(0,nr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class Hv{constructor(){return Uv($2)}}const $2="app-check";function xl(){}class hT{zone;delegate;constructor(t,n=H2){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{t.apply(this,[o])})},n,r)}}class W2{zone;task=null;constructor(t){this.zone=t}call(t,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xl,{},xl,xl)),n.pipe(uT({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ep=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new hT(Zone.current)),this.insideAngular=n.run(()=>new hT(Zone.current,Uu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(re(it))};static \u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kl(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function qo(e){return kl().ngZone.run(()=>e())}function Zs(e){return function G2(e){return function(n){return(n=n.lift(new W2(e.ngZone))).pipe(mn(e.outsideAngular),Wt(e.insideAngular))}}(kl())(e)}const Z2=(e,t)=>function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),qo(()=>e.apply(void 0,r))},fT=(e,t)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(t&&(n||=qo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xl,{},xl,xl))),r[s]=Z2(r[s],n));const i=function z2(e){return kl().ngZone.runOutsideAngular(()=>e())}(()=>e.apply(this,r));if(!t){if(i instanceof Oe){const s=kl();return i.pipe(mn(s.outsideAngular),Wt(s.insideAngular))}return qo(()=>i)}return i instanceof Oe?i.pipe(Zs):i instanceof Promise?qo(()=>new Promise((s,o)=>i.then(a=>qo(()=>s(a)),a=>qo(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:qo(()=>i)};var tp=ye(106);tp.Z.registerVersion("firebase","10.5.2","app-compat");const Y2=["ngOnDestroy"];class pT{constructor(t){return t}}const jv=new se("angularfire2.app.options"),$v=new se("angularfire2.app.name");function Wv(e,t,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=tp.Z.apps.filter(a=>a&&a.name===i.name)[0]||t.runOutsideAngular(()=>tp.Z.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(o.options)){const a=!!module.hot;X2("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pT(o)}const X2=(e,...t)=>{};function gT(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(s)return function eH(e,t){try{return e.toString()===t.toString()}catch{return e===t}}(i,o)||(mT("error",`${t} was already initialized on the ${n} Firebase App with different settings.${tH?" You may need to reload as Firebase is not HMR aware.":""}`),mT("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([e,a,i]),a}}const tH=typeof module<"u"&&!!module.hot,mT=(e,...t)=>{};globalThis.\u0275AngularfireInstanceCache||=[],ye(365);class nH extends F{constructor(t=1/0,n=1/0,r=Vv){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(t),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!t.closed;o+=r?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){const{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*t;if(t<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function _T(e,t,n){let r,i=!1;return e&&"object"==typeof e?({bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:n}=e):r=e??1/0,$({connector:()=>new nH(r,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const vT=j(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function zv(e,t){return z((n,r)=>{let i=0;n.subscribe(ie(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Gv(e){return e<=0?()=>Dn:z((t,n)=>{let r=0;t.subscribe(ie(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function iH(e=sH){return z((t,n)=>{let r=!1;t.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function sH(){return new vT}function yT(e,t){return D(t)?he(()=>e,t):he(()=>e)}const ET=new se("angularfire2.auth.use-emulator"),CT=new se("angularfire2.auth.settings"),IT=new se("angularfire2.auth.tenant-id"),DT=new se("angularfire2.auth.langugage-code"),wT=new se("angularfire2.auth.use-device-language"),bT=new se("angularfire.auth.persistence"),ST=(e,t,n,r,i,s,o,a)=>gT(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))c.settings[d]=p;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let TT=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,d,p,g,_,I){const T=new F,O=P(void 0).pipe(Wt(o.outsideAngular),he(()=>s.runOutsideAngular(()=>Promise.resolve().then(ye.bind(ye,365)))),Me(()=>Wv(n,s,r)),Me(H=>ST(H,s,a,d,p,g,c,_)),_T({bufferSize:1,refCount:!1}));if(ov(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=P(null);else{O.pipe(function oH(e,t){const n=arguments.length>=2;return r=>r.pipe(e?zv((i,s)=>e(i,s,r)):Kt,Gv(1),n?function rH(e){return z((t,n)=>{let r=!1;t.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}(t):iH(()=>new vT))}()).subscribe();const H=O.pipe(he(ne=>ne.getRedirectResult().then(fe=>fe,()=>null)),Zs,_T({bufferSize:1,refCount:!1})),te=O.pipe(he(ne=>new Oe(fe=>({unsubscribe:s.runOutsideAngular(()=>ne.onAuthStateChanged(Pe=>fe.next(Pe),Pe=>fe.error(Pe),()=>fe.complete()))})))),B=O.pipe(he(ne=>new Oe(fe=>({unsubscribe:s.runOutsideAngular(()=>ne.onIdTokenChanged(Pe=>fe.next(Pe),Pe=>fe.error(Pe),()=>fe.complete()))}))));this.authState=H.pipe(yT(te),mn(o.outsideAngular),Wt(o.insideAngular)),this.user=H.pipe(yT(B),mn(o.outsideAngular),Wt(o.insideAngular)),this.idToken=this.user.pipe(he(ne=>ne?E(ne.getIdToken()):P(null))),this.idTokenResult=this.user.pipe(he(ne=>ne?E(ne.getIdTokenResult()):P(null))),this.credential=C(H,T,this.authState.pipe(zv(ne=>!ne))).pipe(Me(ne=>ne?.user?ne:null),mn(o.outsideAngular),Wt(o.insideAngular))}return((e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{if(e[s])return r?.spy?.get&&r.spy.get(s,e[s]),e[s];if(Y2.indexOf(s)>-1)return()=>{};const o=t.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(d=>n.run(()=>d)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,O,s,{spy:{apply:(H,te,B)=>{(H.startsWith("signIn")||H.startsWith("createUser"))&&B.then(ne=>T.next(ne))}}})}static \u0275fac=function(r){return new(r||e)(re(jv),re($v,8),re(Fi),re(it),re(ep),re(ET,8),re(CT,8),re(IT,8),re(DT,8),re(wT,8),re(bT,8),re(Hv,8))};static \u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();function AT(e,t){return z(function lH(e,t,n,r,i){return(s,o)=>{let a=n,c=t,d=0;s.subscribe(ie(o,p=>{const g=d++;c=a?e(c,p,g):(a=!0,p),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(e,t,arguments.length>=2,!0))}var Ko=ye(537),dH=ye(861),w=ye(58),Zv=ye(879);const MT="@firebase/database";let qv="";function Kv(e){qv=e}class hH{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){null==n?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,w.Wl)(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return null==n?null:(0,w.cI)(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class fH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){null==n?delete this.cache_[t]:this.cache_[t]=n}get(t){return(0,w.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const NT=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hH(t)}}catch{}return new fH},Yo=NT("localStorage"),Yv=NT("sessionStorage"),Fl=new Zv.Yd("@firebase/database"),PT=function(){let e=1;return function(){return e++}}(),OT=function(e){const t=(0,w.dS)(e),n=new w.gQ;n.update(t);const r=n.digest();return w.US.encodeByteArray(r)},Hu=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Hu.apply(null,r):t+="object"==typeof r?(0,w.Wl)(r):r,t+=" "}return t};let Qo=null,xT=!0;const kT=function(e,t){(0,w.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Fl.logLevel=Zv.in.VERBOSE,Qo=Fl.log.bind(Fl),t&&Yv.set("logging_enabled",!0)):"function"==typeof e?Qo=e:(Qo=null,Yv.remove("logging_enabled"))},En=function(...e){if(!0===xT&&(xT=!1,null===Qo&&!0===Yv.get("logging_enabled")&&kT(!0)),Qo){const t=Hu.apply(null,e);Qo(t)}},ju=function(e){return function(...t){En(e,...t)}},Qv=function(...e){const t="FIREBASE INTERNAL ERROR: "+Hu(...e);Fl.error(t)},Wi=function(...e){const t=`FIREBASE FATAL ERROR: ${Hu(...e)}`;throw Fl.error(t),new Error(t)},jn=function(...e){const t="FIREBASE WARNING: "+Hu(...e);Fl.warn(t)},np=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},qs="[MIN_NAME]",ps="[MAX_NAME]",Jo=function(e,t){if(e===t)return 0;if(e===qs||t===ps)return-1;if(t===qs||e===ps)return 1;{const n=VT(e),r=VT(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},mH=function(e,t){return e===t?0:e<t?-1:1},$u=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,w.Wl)(t))},Jv=function(e){if("object"!=typeof e||null===e)return(0,w.Wl)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,w.Wl)(t[r]),n+=":",n+=Jv(e[t[r]]);return n+="}",n},FT=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function Cn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const LT=function(e){(0,w.hu)(!np(e),"Invalid JSON number");const r=1023;let i,s,o,a,c;0===e?(s=0,o=0,i=1/e==-1/0?1:0):(i=e<0,(e=Math.abs(e))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=a+r,o=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(e/Math.pow(2,-1074))));const d=[];for(c=52;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=11;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(i?1:0),d.reverse();const p=d.join("");let g="";for(c=0;c<64;c+=8){let _=parseInt(p.substr(c,8),2).toString(16);1===_.length&&(_="0"+_),g+=_}return g.toLowerCase()},EH=new RegExp("^-?(0*)\\d{1,10}$"),VT=function(e){if(EH.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ll=function(e){try{e()}catch(t){setTimeout(()=>{throw jn("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Wu=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class wH{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){jn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bH{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&"auth/token-not-initialized"===n.code?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jn(t)}}let zu=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const $T=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GT="websocket",ZT="long_polling";class ey{constructor(t,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yo.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Yo.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qT(e,t,n){let r;if((0,w.hu)("string"==typeof t,"typeof type must == string"),(0,w.hu)("object"==typeof n,"typeof params must == object"),t===GT)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ZT)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function SH(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Cn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class TH{constructor(){this.counters_={}}incrementCounter(t,n=1){(0,w.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return(0,w.p$)(this.counters_)}}const ty={},ny={};function ry(e){const t=e.toString();return ty[t]||(ty[t]=new TH),ty[t]}class MH{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ll(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ks{constructor(t,n,r,i,s,o,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ju(t),this.stats_=ry(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),qT(n,ZT,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new MH(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,w.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iy((...s)=>{const[o,a,c,d,p]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=c;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&$T.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ks.forceAllow_=!0}static forceDisallow(){Ks.forceDisallow_=!0}static isAvailable(){return!((0,w.Yr)()||!Ks.forceAllow_&&(Ks.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=(0,w.Wl)(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=(0,w.h$)(n),i=FT(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if((0,w.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=(0,w.Wl)(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class iy{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,w.Yr)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=PT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=iy.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){En("frame writing exception"),a.stack&&En(a.stack),En(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||En("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,n){(0,w.Yr)()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{En("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ip=null;typeof MozWebSocket<"u"?ip=MozWebSocket:typeof WebSocket<"u"&&(ip=WebSocket);let Vl=(()=>{class e{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ju(this.connId),this.stats_=ry(r),this.connURL=e.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return!(0,w.Yr)()&&typeof location<"u"&&location.hostname&&$T.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),qT(n,GT,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yo.set("previous_websocket_failure",!0);try{let i;if((0,w.Yr)()){i={headers:{"User-Agent":`Firebase/5/${qv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ip(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==ip&&!e.forceDisallow_}static previouslyFailed(){return Yo.isInMemoryStorage||!0===Yo.get("previous_websocket_failure")}markConnectionHealthy(){Yo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,w.cI)(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,w.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=(0,w.Wl)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=FT(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),tA=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ks,Vl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=Vl&&Vl.isAvailable();let i=r&&!Vl.previouslyFailed();if(n.webSocketOnly&&(r||jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vl];else{const s=this.transports_=[];for(const o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class lA{constructor(t,n,r,i,s,o,a,c,d,p){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ju("c:"+this.id+":"),this.transportManager_=new tA(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const n=t.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=$u("t",t),r=$u("d",t);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=$u("t",t),r=$u("d",t);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=$u("t",t);if("d"in t){const r=t.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?Qv("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qv("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cA{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}class uA{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,w.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(t){(0,w.hu)(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class sp extends uA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,w.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sp}getInitialEvent(t){return(0,w.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class pt{constructor(t,n){if(void 0===n){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(t+="/"+this.pieces_[n]);return t||"/"}}function ot(){return new pt("")}function We(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ys(e){return e.pieces_.length-e.pieceNum_}function It(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new pt(e.pieces_,t)}function oy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Gu(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function fA(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pt(t,0)}function Vt(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof pt)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pt(n,0)}function ze(e){return e.pieceNum_>=e.pieces_.length}function rr(e,t){const n=We(e),r=We(t);if(null===n)return t;if(n===r)return rr(It(e),It(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function QH(e,t){const n=Gu(e,0),r=Gu(t,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Jo(n[i],r[i]);if(0!==s)return s}return n.length===r.length?0:n.length<r.length?-1:1}function ay(e,t){if(Ys(e)!==Ys(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function oi(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ys(e)>Ys(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class JH{constructor(t,n){this.errorPrefix_=n,this.parts_=Gu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,w.ug)(this.parts_[r]);pA(this)}}function pA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Xo(e))}function Xo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ly extends uA{constructor(){let t,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ly}getInitialEvent(t){return(0,w.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Zu=1e3;let ap,ea=(()=>{class e extends cA{constructor(n,r,i,s,o,a,c,d){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=e.nextPersistentConnectionId_++,this.log_=ju("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zu,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!(0,w.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ly.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&sp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_((0,w.Wl)(o)),(0,w.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new w.BH,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,w.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,w.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,c=>{const d=c.d,p=c.s;e.warnOnListenWarnings_(d,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),"ok"!==p&&this.removeListen_(i,s),n.onComplete&&n.onComplete(p,d))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&(0,w.r3)(n,"w")){const i=(0,w.DV)(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,w.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=(0,w.w9)(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,w.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,w.Wl)(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):Qv("Unrecognized action received from server: "+(0,w.Wl)(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,w.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,dH.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+e.nextConnectionId_++,a=n.lastSessionId;let c=!1,d=null;const p=function(){d?d.close():(c=!0,s())};n.realtime_={close:p,sendRequest:function(I){(0,w.hu)(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(I)}};const _=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[I,T]=yield Promise.all([n.authTokenProvider_.getToken(_),n.appCheckTokenProvider_.getToken(_)]);c?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),n.authToken_=I&&I.accessToken,n.appCheckToken_=T&&T.token,d=new lA(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,O=>{jn(O+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(I){n.log_("Failed to get token: "+I),c||(n.repoInfo_.nodeAdmin&&jn(I),p())}}})()}interrupt(n){En("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){En("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,w.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>Jv(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new pt(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){En("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){En("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";(0,w.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+r+"."+qv.replace(/\./g,"-")]=1,(0,w.uI)()?n["framework.cordova"]=1:(0,w.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=sp.getInstance().currentlyOnline();return(0,w.xb)(this.interruptReasons_)&&n}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class qe{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new qe(t,n)}}class op{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new qe(qs,t),i=new qe(qs,n);return 0!==this.compare(r,i)}minPost(){return qe.MIN}}class _A extends op{static get __EMPTY_NODE(){return ap}static set __EMPTY_NODE(t){ap=t}compare(t,n){return Jo(t.name,n.name)}isDefinedOn(t){throw(0,w.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return qe.MIN}maxPost(){return new qe(ps,ap)}makePost(t,n){return(0,w.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qe(t,ap)}toString(){return".key"}}const zi=new _A;class lp{constructor(t,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,t=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let uy,Ci=(()=>{class e{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??e.RED,this.left=s??fr.EMPTY_NODE,this.right=o??fr.EMPTY_NODE}copy(n,r,i,s,o){return new e(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return fr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return fr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class fr{constructor(t,n=fr.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new fr(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ci.BLACK,null,null))}remove(t){return new fr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ci.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new lp(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new lp(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new lp(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new lp(this.root_,null,this.comparator_,!0,t)}}function oj(e,t){return Jo(e.name,t.name)}function cy(e,t){return Jo(e,t)}fr.EMPTY_NODE=new class sj{copy(t,n,r,i,s){return this}insert(t,n,r){return new Ci(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vA=function(e){return"number"==typeof e?"number:"+LT(e):"string:"+e},yA=function(e){if(e.isLeafNode()){const t=e.val();(0,w.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,w.r3)(t,".sv"),"Priority must be a string or number.")}else(0,w.hu)(e===uy||e.isEmpty(),"priority of unexpected type.");(0,w.hu)(e===uy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let EA,CA,IA,Bl=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,w.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yA(this.priorityNode_)}static set __childrenNodeConstructor(n){EA=n}static get __childrenNodeConstructor(){return EA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ze(n)?this:".priority"===We(n)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=We(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,w.hu)(".priority"!==i||1===Ys(n),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(It(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vA(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?LT(this.value_):this.value_,this.lazyHash_=OT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:((0,w.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(r),o=e.VALUE_TYPE_ORDER.indexOf(i);return(0,w.hu)(s>=0,"Unknown leaf type: "+r),(0,w.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const Rt=new class uj extends op{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?Jo(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(ps,new Bl("[PRIORITY-POST]",IA))}makePost(t,n){const r=CA(t);return new qe(n,new Bl("[PRIORITY-POST]",r))}toString(){return".priority"}},dj=Math.log(2);class hj{constructor(t){this.count=parseInt(Math.log(t+1)/dj,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const cp=function(e,t,n,r){e.sort(t);const i=function(c,d){const p=d-c;let g,_;if(0===p)return null;if(1===p)return g=e[c],_=n?n(g):g,new Ci(_,g.node,Ci.BLACK,null,null);{const I=parseInt(p/2,10)+c,T=i(c,I),O=i(I+1,d);return g=e[I],_=n?n(g):g,new Ci(_,g.node,Ci.BLACK,T,O)}},a=function(c){let d=null,p=null,g=e.length;const _=function(T,O){const H=g-T,te=g;g-=T;const B=i(H+1,te),ne=e[H],fe=n?n(ne):ne;I(new Ci(fe,ne.node,O,null,B))},I=function(T){d?(d.left=T,d=T):(p=T,d=T)};for(let T=0;T<c.count;++T){const O=c.nextBitIsOne(),H=Math.pow(2,c.count-(T+1));O?_(H,Ci.BLACK):(_(H,Ci.BLACK),_(H,Ci.RED))}return p}(new hj(e.length));return new fr(r||t,a)};let dy;const Ul={};class gs{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return(0,w.hu)(Ul&&Rt,"ChildrenNode.ts has not been loaded"),dy=dy||new gs({".priority":Ul},{".priority":Rt}),dy}get(t){const n=(0,w.DV)(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof fr?n:null}hasIndex(t){return(0,w.r3)(this.indexSet_,t.toString())}addIndex(t,n){(0,w.hu)(t!==zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(qe.Wrap);let a,o=s.getNext();for(;o;)i=i||t.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?cp(r,t.getCompare()):Ul;const c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;const p=Object.assign({},this.indexes_);return p[c]=a,new gs(p,d)}addToIndexes(t,n){const r=(0,w.UI)(this.indexes_,(i,s)=>{const o=(0,w.DV)(this.indexSet_,s);if((0,w.hu)(o,"Missing index implementation for "+s),i===Ul){if(o.isDefinedOn(t.node)){const a=[],c=n.getIterator(qe.Wrap);let d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),cp(a,o.getCompare())}return Ul}{const a=n.get(t.name);let c=i;return a&&(c=c.remove(new qe(t.name,a))),c.insert(t,t.node)}});return new gs(r,this.indexSet_)}removeFromIndexes(t,n){const r=(0,w.UI)(this.indexes_,i=>{if(i===Ul)return i;{const s=n.get(t.name);return s?i.remove(new qe(t.name,s)):i}});return new gs(r,this.indexSet_)}}let qu,xe=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yA(this.priorityNode_),this.children_.isEmpty()&&(0,w.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qu||(qu=new e(new fr(cy),null,gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qu}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?qu:r}}getChild(n){const r=We(n);return null===r?this:this.getImmediateChild(r).getChild(It(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if((0,w.hu)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new qe(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?qu:this.priorityNode_;return new e(s,a,o)}}updateChild(n,r){const i=We(n);if(null===i)return r;{(0,w.hu)(".priority"!==We(n)||1===Ys(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(It(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Rt,(a,c)=>{r[a]=c.val(n),i++,o&&e.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+vA(this.getPriority().val())+":"),this.forEachChild(Rt,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":OT(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new qe(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new qe(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new qe(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,qe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,qe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ku?-1:0}withIndex(n){if(n===zi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===zi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rt),s=r.getIterator(Rt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===zi?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const Ku=new class fj extends xe{constructor(){super(new fr(cy),xe.EMPTY_NODE,gs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return xe.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(qe,{MIN:{value:new qe(qs,xe.EMPTY_NODE)},MAX:{value:new qe(ps,Ku)}}),_A.__EMPTY_NODE=xe.EMPTY_NODE,Bl.__childrenNodeConstructor=xe,function aj(e){uy=e}(Ku),function cj(e){IA=e}(Ku);const pj=!0;function Ht(e,t=null){if(null===e)return xe.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,w.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Bl(e,Ht(t));if(e instanceof Array||!pj){let n=xe.EMPTY_NODE;return Cn(e,(r,i)=>{if((0,w.r3)(e,r)&&"."!==r.substring(0,1)){const s=Ht(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ht(t))}{const n=[];let r=!1;if(Cn(e,(o,a)=>{if("."!==o.substring(0,1)){const c=Ht(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new qe(o,c)))}}),0===n.length)return xe.EMPTY_NODE;const s=cp(n,oj,o=>o.name,cy);if(r){const o=cp(n,Rt.getCompare());return new xe(s,Ht(t),new gs({".priority":o},{".priority":Rt}))}return new xe(s,Ht(t),gs.Default)}}!function lj(e){CA=e}(Ht);class hy extends op{constructor(t){super(),this.indexPath_=t,(0,w.hu)(!ze(t)&&".priority"!==We(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?Jo(t.name,n.name):s}makePost(t,n){const r=Ht(t),i=xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(n,i)}maxPost(){const t=xe.EMPTY_NODE.updateChild(this.indexPath_,Ku);return new qe(ps,t)}toString(){return Gu(this.indexPath_,0).join("/")}}const fy=new class gj extends op{compare(t,n){const r=t.node.compareTo(n.node);return 0===r?Jo(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(t,n){const r=Ht(t);return new qe(n,r)}toString(){return".value"}};function DA(e){return{type:"value",snapshotNode:e}}function Hl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Yu(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Qu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class py{constructor(t){this.index_=t}updateChild(t,n,r,i,s,o){(0,w.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?t.hasChild(n)?o.trackChildChange(Yu(n,a)):(0,w.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Hl(n,r)):o.trackChildChange(Qu(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Rt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Yu(i,s))}),n.isLeafNode()||n.forEachChild(Rt,(i,s)=>{if(t.hasChild(i)){const o=t.getImmediateChild(i);o.equals(s)||r.trackChildChange(Qu(i,s,o))}else r.trackChildChange(Hl(i,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?xe.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ju{constructor(t){this.indexedFilter_=new py(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ju.getStartPost_(t),this.endPost_=Ju.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,s,o){return this.matches(new qe(n,r))||(r=xe.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,o)}updateFullNode(t,n,r){n.isLeafNode()&&(n=xe.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(xe.EMPTY_NODE);const s=this;return n.forEachChild(Rt,(o,a)=>{s.matches(new qe(o,a))||(i=i.updateImmediateChild(o,xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}return t.getIndex().maxPost()}}class _j{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ju(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,s,o){return this.rangedFilter_.matches(new qe(n,r))||(r=xe.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,o):this.fullLimitUpdateChild_(t,n,r,s,o)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=xe.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;i=xe.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=n.withIndex(this.index_),i=i.updatePriority(xe.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,s){let o;if(this.reverse_){const g=this.index_.getCompare();o=(_,I)=>g(I,_)}else o=this.index_.getCompare();const a=t;(0,w.hu)(a.numChildren()===this.limit_,"");const c=new qe(n,r),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(c);if(a.hasChild(n)){const g=a.getImmediateChild(n);let _=i.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=_&&(_.name===n||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const I=null==_?1:o(_,c);if(p&&!r.isEmpty()&&I>=0)return s?.trackChildChange(Qu(n,r,g)),a.updateImmediateChild(n,r);{s?.trackChildChange(Yu(n,g));const O=a.updateImmediateChild(n,xe.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(s?.trackChildChange(Hl(_.name,_.node)),O.updateImmediateChild(_.name,_.node)):O}}return r.isEmpty()?t:p&&o(d,c)>=0?(null!=s&&(s.trackChildChange(Yu(d.name,d.node)),s.trackChildChange(Hl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(d.name,xe.EMPTY_NODE)):t}}class up{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,w.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rt}copy(){const t=new up;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function gy(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function my(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function dp(e,t){const n=e.copy();return n.index_=t,n}function wA(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Rt?n="$priority":e.index_===fy?n="$value":e.index_===zi?n="$key":((0,w.hu)(e.index_ instanceof hy,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,w.Wl)(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=(0,w.Wl)(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+(0,w.Wl)(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=(0,w.Wl)(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+(0,w.Wl)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function bA(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Rt&&(t.i=e.index_.toString()),t}class hp extends cA{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ju("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return void 0!==n?"tag$"+n:((0,w.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=hp.getListenId_(t,r),a={};this.listens_[o]=a;const c=wA(t._queryParams);this.restRequest_(s+".json",c,(d,p)=>{let g=p;if(404===d&&(g=null,d=null),null===d&&this.onDataUpdate_(s,g,!1,r),(0,w.DV)(this.listens_,o)===a){let _;_=d?401===d?"permission_denied":"rest_error:"+d:"ok",i(_,null)}})}unlisten(t,n){const r=hp.getListenId_(t,n);delete this.listens_[r]}get(t){const n=wA(t._queryParams),r=t._path.toString(),i=new w.BH;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,w.xO)(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=(0,w.cI)(a.responseText)}catch{jn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&jn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Dj{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function fp(){return{value:null,children:new Map}}function jl(e,t,n){if(ze(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=We(t);e.children.has(r)||e.children.set(r,fp()),jl(e.children.get(r),t=It(t),n)}}function _y(e,t){if(ze(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Rt,(r,i)=>{jl(e,new pt(r),i)}),_y(e,t)}}if(e.children.size>0){const n=We(t);return t=It(t),e.children.has(n)&&_y(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function vy(e,t,n){null!==e.value?n(t,e.value):function wj(e,t){e.children.forEach((n,r)=>{t(r,n)})}(e,(r,i)=>{vy(i,new pt(t.toString()+"/"+r),n)})}class bj{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Cn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}class Aj{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new bj(t);const r=1e4+2e4*Math.random();Wu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;Cn(t,(i,s)=>{s>0&&(0,w.r3)(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Wu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gi=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Gi||{});function Cy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class pp{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Gi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(ze(this.path)){if(null!=this.affectedTree.value)return(0,w.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new pt(t));return new pp(ot(),n,this.revert)}}return(0,w.hu)(We(this.path)===t,"operationForChild called for unrelated child."),new pp(It(this.path),this.affectedTree,this.revert)}}class Xu{constructor(t,n){this.source=t,this.path=n,this.type=Gi.LISTEN_COMPLETE}operationForChild(t){return ze(this.path)?new Xu(this.source,ot()):new Xu(this.source,It(this.path))}}class ta{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Gi.OVERWRITE}operationForChild(t){return ze(this.path)?new ta(this.source,ot(),this.snap.getImmediateChild(t)):new ta(this.source,It(this.path),this.snap)}}class $l{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Gi.MERGE}operationForChild(t){if(ze(this.path)){const n=this.children.subtree(new pt(t));return n.isEmpty()?null:n.value?new ta(this.source,ot(),n.value):new $l(this.source,ot(),n)}return(0,w.hu)(We(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new $l(this.source,It(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qs{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ze(t))return this.isFullyInitialized()&&!this.filtered_;const n=We(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Mj{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function ed(e,t,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>function Pj(e,t,n){if(null==t.childName||null==n.childName)throw(0,w.g5)("Should only compare child_ events.");const r=new qe(t.childName,t.snapshotNode),i=new qe(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,a,c)),o.forEach(a=>{const c=function Nj(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,a,s);i.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,e.query_))})})}function gp(e,t){return{eventCache:e,serverCache:t}}function td(e,t,n,r){return gp(new Qs(t,n,r),e.serverCache)}function TA(e,t,n,r){return gp(e.eventCache,new Qs(t,n,r))}function mp(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function na(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Iy;class Nt{constructor(t,n=(()=>(Iy||(Iy=new fr(mH)),Iy))()){this.value=t,this.children=n}static fromObject(t){let n=new Nt(null);return Cn(t,(r,i)=>{n=n.set(new pt(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(null!=this.value&&n(this.value))return{path:ot(),value:this.value};if(ze(t))return null;{const r=We(t),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(It(t),n);return null!=s?{path:Vt(new pt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ze(t))return this;{const n=We(t),r=this.children.get(n);return null!==r?r.subtree(It(t)):new Nt(null)}}set(t,n){if(ze(t))return new Nt(n,this.children);{const r=We(t),s=(this.children.get(r)||new Nt(null)).set(It(t),n),o=this.children.insert(r,s);return new Nt(this.value,o)}}remove(t){if(ze(t))return this.children.isEmpty()?new Nt(null):new Nt(null,this.children);{const n=We(t),r=this.children.get(n);if(r){const i=r.remove(It(t));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Nt(null):new Nt(this.value,s)}return this}}get(t){if(ze(t))return this.value;{const n=We(t),r=this.children.get(n);return r?r.get(It(t)):null}}setTree(t,n){if(ze(t))return n;{const r=We(t),s=(this.children.get(r)||new Nt(null)).setTree(It(t),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Nt(this.value,o)}}fold(t){return this.fold_(ot(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Vt(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,ot(),n)}findOnPath_(t,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(ze(t))return null;{const s=We(t),o=this.children.get(s);return o?o.findOnPath_(It(t),Vt(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ot(),n)}foreachOnPath_(t,n,r){if(ze(t))return this;{this.value&&r(n,this.value);const i=We(t),s=this.children.get(i);return s?s.foreachOnPath_(It(t),Vt(n,i),r):new Nt(null)}}foreach(t){this.foreach_(ot(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Vt(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}class Ii{constructor(t){this.writeTree_=t}static empty(){return new Ii(new Nt(null))}}function nd(e,t,n){if(ze(t))return new Ii(new Nt(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=rr(i,t);return s=s.updateChild(o,n),new Ii(e.writeTree_.set(i,s))}{const i=new Nt(n),s=e.writeTree_.setTree(t,i);return new Ii(s)}}}function Dy(e,t,n){let r=e;return Cn(n,(i,s)=>{r=nd(r,Vt(t,i),s)}),r}function AA(e,t){if(ze(t))return Ii.empty();{const n=e.writeTree_.setTree(t,new Nt(null));return new Ii(n)}}function wy(e,t){return null!=ra(e,t)}function ra(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(rr(n.path,t)):null}function MA(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Rt,(r,i)=>{t.push(new qe(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new qe(r,i.value))}),t}function Js(e,t){if(ze(t))return e;{const n=ra(e,t);return new Ii(null!=n?new Nt(n):e.writeTree_.subtree(t))}}function by(e){return e.writeTree_.isEmpty()}function Wl(e,t){return RA(ot(),e.writeTree_,t)}function RA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{".priority"===i?((0,w.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=RA(Vt(e,i),s,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(Vt(e,".priority"),r)),n}}function _p(e,t){return kA(t,e)}function Vj(e,t){if(e.snap)return oi(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&oi(Vt(e.path,n),t))return!0;return!1}function Uj(e){return e.visible}function NA(e,t,n){let r=Ii.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const o=s.path;let a;if(s.snap)oi(n,o)?(a=rr(n,o),r=nd(r,a,s.snap)):oi(o,n)&&(a=rr(o,n),r=nd(r,ot(),s.snap.getChild(a)));else{if(!s.children)throw(0,w.g5)("WriteRecord should have .snap or .children");if(oi(n,o))a=rr(n,o),r=Dy(r,a,s.children);else if(oi(o,n))if(a=rr(o,n),ze(a))r=Dy(r,ot(),s.children);else{const c=(0,w.DV)(s.children,We(a));if(c){const d=c.getChild(It(a));r=nd(r,ot(),d)}}}}}return r}function PA(e,t,n,r,i){if(r||i){const s=Js(e.visibleWrites,t);return!i&&by(s)?n:i||null!=n||wy(s,ot())?Wl(NA(e.allWrites,function(d){return(d.visible||i)&&(!r||!~r.indexOf(d.writeId))&&(oi(d.path,t)||oi(t,d.path))},t),n||xe.EMPTY_NODE):null}{const s=ra(e.visibleWrites,t);if(null!=s)return s;{const o=Js(e.visibleWrites,t);return by(o)?n:null!=n||wy(o,ot())?Wl(o,n||xe.EMPTY_NODE):null}}}function vp(e,t,n,r){return PA(e.writeTree,e.treePath,t,n,r)}function Sy(e,t){return function Hj(e,t,n){let r=xe.EMPTY_NODE;const i=ra(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Rt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Js(e.visibleWrites,t);return n.forEachChild(Rt,(o,a)=>{const c=Wl(Js(s,new pt(o)),a);r=r.updateImmediateChild(o,c)}),MA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return MA(Js(e.visibleWrites,t)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(e.writeTree,e.treePath,t)}function OA(e,t,n,r){return function jj(e,t,n,r,i){(0,w.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Vt(t,n);if(wy(e.visibleWrites,s))return null;{const o=Js(e.visibleWrites,s);return by(o)?i.getChild(n):Wl(o,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function yp(e,t){return function Wj(e,t){return ra(e.visibleWrites,t)}(e.writeTree,Vt(e.treePath,t))}function Ty(e,t,n){return function $j(e,t,n,r){const i=Vt(t,n),s=ra(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Wl(Js(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xA(e,t){return kA(Vt(e.treePath,t),e.writeTree)}function kA(e,t){return{treePath:e,writeTree:t}}class qj{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;(0,w.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,w.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Qu(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,Yu(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,Hl(r,t.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw(0,w.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,Qu(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const FA=new class Kj{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}};class Ay{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ty(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:na(this.viewCache_),s=function Zj(e,t,n,r,i,s){return function zj(e,t,n,r,i,s,o){let a;const c=Js(e.visibleWrites,t),d=ra(c,ot());if(null!=d)a=d;else{if(null==n)return[];a=Wl(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const p=[],g=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let I=_.getNext();for(;I&&p.length<i;)0!==g(I,r)&&p.push(I),I=_.getNext();return p}}(e.writeTree,e.treePath,t,n,r,i,s)}(this.writes_,i,n,1,r,t);return 0===s.length?null:s[0]}}function LA(e,t,n,r,i,s){const o=t.eventCache;if(null!=yp(r,n))return t;{let a,c;if(ze(n))if((0,w.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=na(t),g=Sy(r,d instanceof xe?d:xe.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),g,s)}else{const d=vp(r,na(t));a=e.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const d=We(n);if(".priority"===d){(0,w.hu)(1===Ys(n),"Can't have a priority with additional path components");const p=o.getNode();c=t.serverCache.getNode();const g=OA(r,n,p,c);a=null!=g?e.filter.updatePriority(p,g):o.getNode()}else{const p=It(n);let g;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();const _=OA(r,n,o.getNode(),c);g=null!=_?o.getNode().getImmediateChild(d).updateChild(p,_):o.getNode().getImmediateChild(d)}else g=Ty(r,d,t.serverCache);a=null!=g?e.filter.updateChild(o.getNode(),d,g,p,i,s):o.getNode()}}return td(t,a,o.isFullyInitialized()||ze(n),e.filter.filtersNodes())}}function Ep(e,t,n,r,i,s,o,a){const c=t.serverCache;let d;const p=o?e.filter:e.filter.getIndexedFilter();if(ze(n))d=p.updateFullNode(c.getNode(),r,null);else if(p.filtersNodes()&&!c.isFiltered()){const I=c.getNode().updateChild(n,r);d=p.updateFullNode(c.getNode(),I,null)}else{const I=We(n);if(!c.isCompleteForPath(n)&&Ys(n)>1)return t;const T=It(n),H=c.getNode().getImmediateChild(I).updateChild(T,r);d=".priority"===I?p.updatePriority(c.getNode(),H):p.updateChild(c.getNode(),I,H,T,FA,null)}const g=TA(t,d,c.isFullyInitialized()||ze(n),p.filtersNodes());return LA(e,g,n,i,new Ay(i,g,s),a)}function My(e,t,n,r,i,s,o){const a=t.eventCache;let c,d;const p=new Ay(i,t,s);if(ze(n))d=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=td(t,d,!0,e.filter.filtersNodes());else{const g=We(n);if(".priority"===g)d=e.filter.updatePriority(t.eventCache.getNode(),r),c=td(t,d,a.isFullyInitialized(),a.isFiltered());else{const _=It(n),I=a.getNode().getImmediateChild(g);let T;if(ze(_))T=r;else{const O=p.getCompleteChild(g);T=null!=O?".priority"===oy(_)&&O.getChild(fA(_)).isEmpty()?O:O.updateChild(_,r):xe.EMPTY_NODE}c=I.equals(T)?t:td(t,e.filter.updateChild(a.getNode(),g,T,_,p,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function VA(e,t){return e.eventCache.isCompleteForChild(t)}function BA(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Ry(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d,c=t;d=ze(n)?r:new Nt(null).setTree(n,r);const p=t.serverCache.getNode();return d.children.inorderTraversal((g,_)=>{if(p.hasChild(g)){const T=BA(0,t.serverCache.getNode().getImmediateChild(g),_);c=Ep(e,c,new pt(g),T,i,s,o,a)}}),d.children.inorderTraversal((g,_)=>{const I=!t.serverCache.isCompleteForChild(g)&&null===_.value;if(!p.hasChild(g)&&!I){const O=BA(0,t.serverCache.getNode().getImmediateChild(g),_);c=Ep(e,c,new pt(g),O,i,s,o,a)}}),c}class i${constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new py(r.getIndex()),s=function vj(e){return e.loadsAllData()?new py(e.getIndex()):e.hasLimit()?new _j(e):new Ju(e)}(r);this.processor_=function Yj(e){return{filter:e}}(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(xe.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(xe.EMPTY_NODE,a.getNode(),null),p=new Qs(c,o.isFullyInitialized(),i.filtersNodes()),g=new Qs(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=gp(g,p),this.eventGenerator_=new Mj(this.query_)}get query(){return this.query_}}function a$(e,t){const n=na(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ze(t)&&!n.getImmediateChild(We(t)).isEmpty())?n.getChild(t):null}function UA(e){return 0===e.eventRegistrations_.length}function HA(e,t,n){const r=[];if(n){(0,w.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(t){let i=[];for(let s=0;s<e.eventRegistrations_.length;++s){const o=e.eventRegistrations_[s];if(o.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(s+1));break}}else i.push(o)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function jA(e,t,n,r){t.type===Gi.MERGE&&null!==t.source.queryId&&((0,w.hu)(na(e.viewCache_),"We should always have a full cache before handling merges"),(0,w.hu)(mp(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function Jj(e,t,n,r,i){const s=new qj;let o,a;if(n.type===Gi.OVERWRITE){const d=n;d.source.fromUser?o=My(e,t,d.path,d.snap,r,i,s):((0,w.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!ze(d.path),o=Ep(e,t,d.path,d.snap,r,i,a,s))}else if(n.type===Gi.MERGE){const d=n;d.source.fromUser?o=function e$(e,t,n,r,i,s,o){let a=t;return r.foreach((c,d)=>{const p=Vt(n,c);VA(t,We(p))&&(a=My(e,a,p,d,i,s,o))}),r.foreach((c,d)=>{const p=Vt(n,c);VA(t,We(p))||(a=My(e,a,p,d,i,s,o))}),a}(e,t,d.path,d.children,r,i,s):((0,w.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=Ry(e,t,d.path,d.children,r,i,a,s))}else if(n.type===Gi.ACK_USER_WRITE){const d=n;o=d.revert?function r$(e,t,n,r,i,s){let o;if(null!=yp(r,n))return t;{const a=new Ay(r,t,i),c=t.eventCache.getNode();let d;if(ze(n)||".priority"===We(n)){let p;if(t.serverCache.isFullyInitialized())p=vp(r,na(t));else{const g=t.serverCache.getNode();(0,w.hu)(g instanceof xe,"serverChildren would be complete if leaf node"),p=Sy(r,g)}d=e.filter.updateFullNode(c,p,s)}else{const p=We(n);let g=Ty(r,p,t.serverCache);null==g&&t.serverCache.isCompleteForChild(p)&&(g=c.getImmediateChild(p)),d=null!=g?e.filter.updateChild(c,p,g,It(n),a,s):t.eventCache.getNode().hasChild(p)?e.filter.updateChild(c,p,xe.EMPTY_NODE,It(n),a,s):c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=vp(r,na(t)),o.isLeafNode()&&(d=e.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=yp(r,ot()),td(t,d,o,e.filter.filtersNodes())}}(e,t,d.path,r,i,s):function t$(e,t,n,r,i,s,o){if(null!=yp(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(ze(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ep(e,t,n,c.getNode().getChild(n),i,s,a,o);if(ze(n)){let d=new Nt(null);return c.getNode().forEachChild(zi,(p,g)=>{d=d.set(new pt(p),g)}),Ry(e,t,n,d,i,s,a,o)}return t}{let d=new Nt(null);return r.foreach((p,g)=>{const _=Vt(n,p);c.isCompleteForPath(_)&&(d=d.set(p,c.getNode().getChild(_)))}),Ry(e,t,n,d,i,s,a,o)}}(e,t,d.path,d.affectedTree,r,i,s)}else{if(n.type!==Gi.LISTEN_COMPLETE)throw(0,w.g5)("Unknown operation type: "+n.type);o=function n$(e,t,n,r,i){const s=t.serverCache;return LA(e,TA(t,s.getNode(),s.isFullyInitialized()||ze(n),s.isFiltered()),n,r,FA,i)}(e,t,n.path,r,s)}const c=s.getChanges();return function Xj(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=mp(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(DA(mp(t)))}}(t,o,c),{viewCache:o,changes:c}}(e.processor_,i,t,n,r);return function Qj(e,t){(0,w.hu)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,w.hu)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,s.viewCache),(0,w.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,$A(e,s.changes,s.viewCache.eventCache.getNode(),null)}function $A(e,t,n,r){return function Rj(e,t,n,r){const i=[],s=[];return t.forEach(o=>{"child_changed"===o.type&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function mj(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(o.childName,o.snapshotNode))}),ed(e,i,"child_removed",t,r,n),ed(e,i,"child_added",t,r,n),ed(e,i,"child_moved",s,r,n),ed(e,i,"child_changed",t,r,n),ed(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let Cp,Dp;class WA{constructor(){this.views=new Map}}function Ny(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,w.hu)(null!=s,"SyncTree gave us an op for an invalid query."),jA(s,t,n,r)}{let s=[];for(const o of e.views.values())s=s.concat(jA(o,t,n,r));return s}}function zA(e,t,n,r,i){const o=e.views.get(t._queryIdentifier);if(!o){let a=vp(n,i?r:null),c=!1;a?c=!0:r instanceof xe?(a=Sy(n,r),c=!1):(a=xe.EMPTY_NODE,c=!1);const d=gp(new Qs(a,c,!1),new Qs(r,i,!1));return new i$(t,d)}return o}function GA(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Xs(e,t){let n=null;for(const r of e.views.values())n=n||a$(r,t);return n}function ZA(e,t){return t._queryParams.loadsAllData()?Ip(e):e.views.get(t._queryIdentifier)}function qA(e,t){return null!=ZA(e,t)}function eo(e){return null!=Ip(e)}function Ip(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let _$=1;class KA{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Nt(null),this.pendingWriteTree_=function Gj(){return{visibleWrites:Ii.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Py(e,t,n,r,i){return function xj(e,t,n,r,i){(0,w.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=nd(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?zl(e,new ta({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function to(e,t,n=!1){const r=function Fj(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function Lj(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);(0,w.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const a=e.allWrites[o];a.visible&&(o>=n&&Vj(a,r.path)?i=!1:oi(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Bj(e){e.visibleWrites=NA(e.allWrites,Uj,ot()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=AA(e.visibleWrites,r.path):Cn(r.children,c=>{e.visibleWrites=AA(e.visibleWrites,Vt(r.path,c))}),!0))}(e.pendingWriteTree_,t)){let s=new Nt(null);return null!=r.snap?s=s.set(ot(),!0):Cn(r.children,o=>{s=s.set(new pt(o),!0)}),zl(e,new pp(r.path,s,n))}return[]}function rd(e,t,n){return zl(e,new ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function wp(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||qA(o,t))){const c=function p$(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=eo(e);if("default"===i)for(const[c,d]of e.views.entries())o=o.concat(HA(d,n,r)),UA(d)&&(e.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=e.views.get(i);c&&(o=o.concat(HA(c,n,r)),UA(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!eo(e)&&s.push(new(function d$(){return(0,w.hu)(Cp,"Reference.ts has not been loaded"),Cp}())(t._repo,t._path)),{removed:s,events:o}}(o,t,n,r);(function h$(e){return 0===e.views.size})(o)&&(e.syncPointTree_=e.syncPointTree_.remove(s));const d=c.removed;if(a=c.events,!i){const p=-1!==d.findIndex(_=>_._queryParams.loadsAllData()),g=e.syncPointTree_.findOnPath(s,(_,I)=>eo(I));if(p&&!g){const _=e.syncPointTree_.subtree(s);if(!_.isEmpty()){const I=function w$(e){return e.fold((t,n,r)=>{if(n&&eo(n))return[Ip(n)];{let i=[];return n&&(i=GA(n)),Cn(r,(s,o)=>{i=i.concat(o)}),i}})}(_);for(let T=0;T<I.length;++T){const O=I[T],H=O.query,te=XA(e,O);e.listenProvider_.startListening(sd(H),id(e,H),te.hashFn,te.onComplete)}}}!g&&d.length>0&&!r&&(p?e.listenProvider_.stopListening(sd(t),null):d.forEach(_=>{const I=e.queryToTagMap.get(Sp(_));e.listenProvider_.stopListening(sd(_),I)}))}!function b$(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=Sp(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}(e,d)}return a}function YA(e,t,n,r){const i=xy(e,r);if(null!=i){const s=ky(i),o=s.path,a=s.queryId,c=rr(o,t);return Fy(e,o,new ta(Cy(a),c,n))}return[]}function Oy(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(_,I)=>{const T=rr(_,i);s=s||Xs(I,T),o=o||eo(I)});let c,a=e.syncPointTree_.get(i);a?(o=o||eo(a),s=s||Xs(a,ot())):(a=new WA,e.syncPointTree_=e.syncPointTree_.set(i,a)),null!=s?c=!0:(c=!1,s=xe.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((I,T)=>{const O=Xs(T,ot());O&&(s=s.updateImmediateChild(I,O))}));const d=qA(a,t);if(!d&&!t._queryParams.loadsAllData()){const _=Sp(t);(0,w.hu)(!e.queryToTagMap.has(_),"View does not exist, but we have a tag");const I=function S$(){return _$++}();e.queryToTagMap.set(_,I),e.tagToQueryMap.set(I,_)}let g=function f$(e,t,n,r,i,s){const o=zA(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function l$(e,t){e.eventRegistrations_.push(t)}(o,n),function c$(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rt,(s,o)=>{r.push(Hl(s,o))}),n.isFullyInitialized()&&r.push(DA(n.getNode())),$A(e,r,n.getNode(),t)}(o,n)}(a,t,n,_p(e.pendingWriteTree_,i),s,c);if(!d&&!o&&!r){const _=ZA(a,t);g=g.concat(function T$(e,t,n){const r=t._path,i=id(e,t),s=XA(e,n),o=e.listenProvider_.startListening(sd(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)(0,w.hu)(!eo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((d,p,g)=>{if(!ze(d)&&p&&eo(p))return[Ip(p).query];{let _=[];return p&&(_=_.concat(GA(p).map(I=>I.query))),Cn(g,(I,T)=>{_=_.concat(T)}),_}});for(let d=0;d<c.length;++d){const p=c[d];e.listenProvider_.stopListening(sd(p),id(e,p))}}return o}(e,t,_))}return g}function bp(e,t,n){const i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,a)=>{const d=Xs(a,rr(o,t));if(d)return d});return PA(i,t,s,n,!0)}function zl(e,t){return QA(t,e.syncPointTree_,null,_p(e.pendingWriteTree_,ot()))}function QA(e,t,n,r){if(ze(e.path))return JA(e,t,n,r);{const i=t.get(ot());null==n&&null!=i&&(n=Xs(i,ot()));let s=[];const o=We(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const d=n?n.getImmediateChild(o):null,p=xA(r,o);s=s.concat(QA(a,c,d,p))}return i&&(s=s.concat(Ny(i,e,r,n))),s}}function JA(e,t,n,r){const i=t.get(ot());null==n&&null!=i&&(n=Xs(i,ot()));let s=[];return t.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,d=xA(r,o),p=e.operationForChild(o);p&&(s=s.concat(JA(p,a,c,d)))}),i&&(s=s.concat(Ny(i,e,r,n))),s}function XA(e,t){const n=t.query,r=id(e,n);return{hashFn:()=>(function s$(e){return e.viewCache_.serverCache.getNode()}(t)||xe.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function C$(e,t,n){const r=xy(e,n);if(r){const i=ky(r),s=i.path,o=i.queryId,a=rr(s,t);return Fy(e,s,new Xu(Cy(o),a))}return[]}(e,n._path,r):function E$(e,t){return zl(e,new Xu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const s=function yH(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(i,n);return wp(e,n,null,s)}}}}function id(e,t){const n=Sp(t);return e.queryToTagMap.get(n)}function Sp(e){return e._path.toString()+"$"+e._queryIdentifier}function xy(e,t){return e.tagToQueryMap.get(t)}function ky(e){const t=e.indexOf("$");return(0,w.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pt(e.substr(0,t))}}function Fy(e,t,n){const r=e.syncPointTree_.get(t);return(0,w.hu)(r,"Missing sync point for query tag that we're tracking"),Ny(r,n,_p(e.pendingWriteTree_,t),null)}function sd(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function m$(){return(0,w.hu)(Dp,"Reference.ts has not been loaded"),Dp}())(e._repo,e._path):e}class Ly{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new Ly(n)}node(){return this.node_}}class Vy{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Vt(this.path_,t);return new Vy(this.syncTree_,n)}node(){return bp(this.syncTree_,this.path_)}}const A$=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},eM=function(e,t,n){return e&&"object"==typeof e?((0,w.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?M$(e[".sv"],t,n):"object"==typeof e[".sv"]?R$(e[".sv"],t):void(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},M$=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,w.hu)(!1,"Unexpected server value: "+e)},R$=function(e,t,n){e.hasOwnProperty("increment")||(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,w.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,w.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},tM=function(e,t,n,r){return Uy(t,new Vy(n,e),r)},By=function(e,t,n){return Uy(e,new Ly(t),n)};function Uy(e,t,n){const r=e.getPriority().val(),i=eM(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,a=eM(o.getValue(),t,n);return a!==o.getValue()||i!==o.getPriority().val()?new Bl(a,Ht(i)):e}{const o=e;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Bl(i))),o.forEachChild(Rt,(a,c)=>{const d=Uy(c,t.getImmediateChild(a),n);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}class Hy{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function Tp(e,t){let n=t instanceof pt?t:new pt(t),r=e,i=We(n);for(;null!==i;){const s=(0,w.DV)(r.node.children,i)||{children:{},childCount:0};r=new Hy(i,r,s),n=It(n),i=We(n)}return r}function ia(e){return e.node.value}function jy(e,t){e.node.value=t,$y(e)}function nM(e){return e.node.childCount>0}function Ap(e,t){Cn(e.node.children,(n,r)=>{t(new Hy(n,e,r))})}function rM(e,t,n,r){n&&!r&&t(e),Ap(e,i=>{rM(i,t,!0,r)}),n&&r&&t(e)}function od(e){return new pt(null===e.parent?e.name:od(e.parent)+"/"+e.name)}function $y(e){null!==e.parent&&function O$(e,t,n){const r=function N$(e){return void 0===ia(e)&&!nM(e)}(n),i=(0,w.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$y(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,$y(e))}(e.parent,e.name,e)}const x$=/[\[\].#$\/\u0000-\u001F\u007F]/,k$=/[\[\].#$\u0000-\u001F\u007F]/,Wy=10485760,Mp=function(e){return"string"==typeof e&&0!==e.length&&!x$.test(e)},iM=function(e){return"string"==typeof e&&0!==e.length&&!k$.test(e)},ad=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!np(e)||e&&"object"==typeof e&&(0,w.r3)(e,".sv")},Zi=function(e,t,n,r){r&&void 0===t||ld((0,w.gK)(e,"value"),t,n)},ld=function(e,t,n){const r=n instanceof pt?new JH(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Xo(r));if("function"==typeof t)throw new Error(e+"contains a function "+Xo(r)+" with contents = "+t.toString());if(np(t))throw new Error(e+"contains "+t.toString()+" "+Xo(r));if("string"==typeof t&&t.length>Wy/3&&(0,w.ug)(t)>Wy)throw new Error(e+"contains a string greater than "+Wy+" utf8 bytes "+Xo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,s=!1;if(Cn(t,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Mp(o)))throw new Error(e+" contains an invalid key ("+o+") "+Xo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function XH(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,w.ug)(t),pA(e)})(r,o),ld(e,a,r),function ej(e){const t=e.parts_.pop();e.byteLength_-=(0,w.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),i&&s)throw new Error(e+' contains ".value" child '+Xo(r)+" in addition to actual children.")}},sM=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,w.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Cn(t,(o,a)=>{const c=new pt(o);if(ld(i,a,Vt(n,c)),".priority"===oy(c)&&!ad(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const s=Gu(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Mp(s[o]))throw new Error(e+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(QH);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&oi(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},zy=function(e,t,n){if(!n||void 0!==t){if(np(t))throw new Error((0,w.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ad(t))throw new Error((0,w.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cd=function(e,t,n,r){if(!(r&&void 0===n||Mp(n)))throw new Error((0,w.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ud=function(e,t,n,r){if(!(r&&void 0===n||iM(n)))throw new Error((0,w.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},V$=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ud(e,t,n,r)},ai=function(e,t){if(".info"===We(t))throw new Error(e+" failed = Can't modify data under /.info/")},oM=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Mp(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iM(e)}(n))throw new Error((0,w.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class B${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rp(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null!==n&&!ay(s,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function aM(e,t,n){Rp(e,n),lM(e,r=>ay(r,t))}function Nr(e,t,n){Rp(e,n),lM(e,r=>oi(r,t)||oi(t,r))}function lM(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(U$(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function U$(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Qo&&En("event: "+n.toString()),Ll(r)}}}const cM="repo_interrupt",H$=25;class j${constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fp(),this.transactionQueueTree_=new Hy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uM(e){const n=e.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function dd(e){return A$({timestamp:uM(e)})}function dM(e,t,n,r,i){e.dataUpdateCount++;const s=new pt(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const c=(0,w.UI)(n,d=>Ht(d));o=function I$(e,t,n,r){const i=xy(e,r);if(i){const s=ky(i),o=s.path,a=s.queryId,c=rr(o,t),d=Nt.fromObject(n);return Fy(e,o,new $l(Cy(a),c,d))}return[]}(e.serverSyncTree_,s,c,i)}else{const c=Ht(n);o=YA(e.serverSyncTree_,s,c,i)}else if(r){const c=(0,w.UI)(n,d=>Ht(d));o=function y$(e,t,n){const r=Nt.fromObject(n);return zl(e,new $l({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,c)}else{const c=Ht(n);o=rd(e.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Zl(e,s)),Nr(e.eventQueue_,a,o)}function hM(e,t){Gy(e,"connected",t),!1===t&&function Z$(e){Gl(e,"onDisconnectEvents");const t=dd(e),n=fp();vy(e.onDisconnect_,ot(),(i,s)=>{const o=tM(i,s,e.serverSyncTree_,t);jl(n,i,o)});let r=[];vy(n,ot(),(i,s)=>{r=r.concat(rd(e.serverSyncTree_,i,s));const o=Yy(e,i);Zl(e,o)}),e.onDisconnect_=fp(),Nr(e.eventQueue_,ot(),r)}(e)}function Gy(e,t,n){const r=new pt("/.info/"+t),i=Ht(n);e.infoData_.updateSnapshot(r,i);const s=rd(e.infoSyncTree_,r,i);Nr(e.eventQueue_,r,s)}function Np(e){return e.nextWriteId_++}function Zy(e,t,n,r,i){Gl(e,"set",{path:t.toString(),value:n,priority:r});const s=dd(e),o=Ht(n,r),a=bp(e.serverSyncTree_,t),c=By(o,a,s),d=Np(e),p=Py(e.serverSyncTree_,t,c,d,!0);Rp(e.eventQueue_,p),e.server_.put(t.toString(),o.val(!0),(_,I)=>{const T="ok"===_;T||jn("set at "+t+" failed: "+_);const O=to(e.serverSyncTree_,d,!T);Nr(e.eventQueue_,t,O),no(0,i,_,I)});const g=Yy(e,t);Zl(e,g),Nr(e.eventQueue_,g,[])}function q$(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&_y(e.onDisconnect_,t),no(0,n,r,i)})}function fM(e,t,n,r){const i=Ht(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(s,o)=>{"ok"===s&&jl(e.onDisconnect_,t,i),no(0,r,s,o)})}function qy(e,t,n){let r;r=".info"===We(t._path)?wp(e.infoSyncTree_,t,n):wp(e.serverSyncTree_,t,n),aM(e.eventQueue_,t._path,r)}function pM(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cM)}function Gl(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),En(n,...t)}function no(e,t,n,r){t&&Ll(()=>{if("ok"===n)t(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,t(o)}})}function Ky(e,t,n){return bp(e.serverSyncTree_,t,n)||xe.EMPTY_NODE}function Pp(e,t=e.transactionQueueTree_){if(t||Op(e,t),ia(t)){const n=mM(e,t);(0,w.hu)(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function eW(e,t,n){const r=n.map(d=>d.currentWriteId),i=Ky(e,t,r);let s=i;const o=i.hash();for(let d=0;d<n.length;d++){const p=n[d];(0,w.hu)(0===p.status,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=rr(t,p.path);s=s.updateChild(g,p.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;e.server_.put(c.toString(),a,d=>{Gl(e,"transaction put response",{path:c.toString(),status:d});let p=[];if("ok"===d){const g=[];for(let _=0;_<n.length;_++)n[_].status=2,p=p.concat(to(e.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&g.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();Op(e,Tp(e.transactionQueueTree_,t)),Pp(e,e.transactionQueueTree_),Nr(e.eventQueue_,t,p);for(let _=0;_<g.length;_++)Ll(g[_])}else{if("datastale"===d)for(let g=0;g<n.length;g++)n[g].status=3===n[g].status?4:0;else{jn("transaction at "+c.toString()+" failed: "+d);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=d}Zl(e,t)}},o)}(e,od(t),n)}else nM(t)&&Ap(t,n=>{Pp(e,n)})}function Zl(e,t){const n=gM(e,t),r=od(n);return function tW(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],d=rr(n,c.path);let g,p=!1;if((0,w.hu)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)p=!0,g=c.abortReason,i=i.concat(to(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=H$)p=!0,g="maxretry",i=i.concat(to(e.serverSyncTree_,c.currentWriteId,!0));else{const _=Ky(e,c.path,o);c.currentInputSnapshot=_;const I=t[a].update(_.val());if(void 0!==I){ld("transaction failed: Data returned ",I,c.path);let T=Ht(I);"object"==typeof I&&null!=I&&(0,w.r3)(I,".priority")||(T=T.updatePriority(_.getPriority()));const H=c.currentWriteId,te=dd(e),B=By(T,_,te);c.currentOutputSnapshotRaw=T,c.currentOutputSnapshotResolved=B,c.currentWriteId=Np(e),o.splice(o.indexOf(H),1),i=i.concat(Py(e.serverSyncTree_,c.path,B,c.currentWriteId,c.applyLocally)),i=i.concat(to(e.serverSyncTree_,H,!0))}else p=!0,g="nodata",i=i.concat(to(e.serverSyncTree_,c.currentWriteId,!0))}Nr(e.eventQueue_,n,i),i=[],p&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===g?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(g),!1,null)))}Op(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Ll(r[a]);Pp(e,e.transactionQueueTree_)}(e,mM(e,n),r),r}function gM(e,t){let n,r=e.transactionQueueTree_;for(n=We(t);null!==n&&void 0===ia(r);)r=Tp(r,n),n=We(t=It(t));return r}function mM(e,t){const n=[];return _M(e,t,n),n.sort((r,i)=>r.order-i.order),n}function _M(e,t,n){const r=ia(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ap(t,i=>{_M(e,i,n)})}function Op(e,t){const n=ia(t);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,jy(t,n.length>0?n:void 0)}Ap(t,r=>{Op(e,r)})}function Yy(e,t){const n=od(gM(e,t)),r=Tp(e.transactionQueueTree_,t);return function P$(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{Qy(e,i)}),Qy(e,r),rM(r,i=>{Qy(e,i)}),n}function Qy(e,t){const n=ia(t);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?((0,w.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):((0,w.hu)(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(to(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jy(t,void 0):n.length=s+1,Nr(e.eventQueue_,od(t),i);for(let o=0;o<r.length;o++)Ll(r[o])}}const Jy=function(e,t){const n=iW(e),r=n.namespace;return"firebase.com"===n.domain&&Wi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Wi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ey(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,t,"",r!==n.subdomain),path:new pt(n.pathString)}},iW=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof e){let d=e.indexOf("//");d>=0&&(a=e.substring(0,d-1),e=e.substring(d+2));let p=e.indexOf("/");-1===p&&(p=e.length);let g=e.indexOf("?");-1===g&&(g=e.length),t=e.substring(0,Math.min(p,g)),p<g&&(i=function nW(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(e.substring(p,g)));const _=function rW(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):jn(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,g)));d=t.indexOf(":"),d>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(d+1),10)):d=t.length;const I=t.slice(0,d);if("localhost"===I.toLowerCase())n="localhost";else if(I.split(".").length<=2)n=I;else{const T=t.indexOf(".");r=t.substring(0,T).toLowerCase(),n=t.substring(T+1),s=r}"ns"in _&&(s=_.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},vM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",sW=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=vM.charAt(n%64),n=Math.floor(n/64);(0,w.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=vM.charAt(t[i]);return(0,w.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class yM{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,w.Wl)(this.snapshot.exportVal())}}class EM{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xy{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return(0,w.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class CM{constructor(t,n){this._repo=t,this._path=n}cancel(){const t=new w.BH;return q$(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ai("OnDisconnect.remove",this._path);const t=new w.BH;return fM(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ai("OnDisconnect.set",this._path),Zi("OnDisconnect.set",t,this._path,!1);const n=new w.BH;return fM(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}setWithPriority(t,n){ai("OnDisconnect.setWithPriority",this._path),Zi("OnDisconnect.setWithPriority",t,this._path,!1),zy("OnDisconnect.setWithPriority",n,!1);const r=new w.BH;return function K$(e,t,n,r,i){const s=Ht(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{"ok"===o&&jl(e.onDisconnect_,t,s),no(0,i,o,a)})}(this._repo,this._path,t,n,r.wrapCallback(()=>{})),r.promise}update(t){ai("OnDisconnect.update",this._path),sM("OnDisconnect.update",t,this._path,!1);const n=new w.BH;return function Y$(e,t,n,r){if((0,w.xb)(n))return En("onDisconnect().update() called with empty data.  Don't do anything."),void no(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&Cn(n,(o,a)=>{const c=Ht(a);jl(e.onDisconnect_,Vt(t,o),c)}),no(0,r,i,s)})}(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}}class pr{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ze(this._path)?null:oy(this._path)}get ref(){return new li(this._repo,this._path)}get _queryIdentifier(){const t=bA(this._queryParams),n=Jv(t);return"{}"===n?"default":n}get _queryObject(){return bA(this._queryParams)}isEqual(t){if(!((t=(0,w.m9)(t))instanceof pr))return!1;const n=this._repo===t._repo,r=ay(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function YH(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function xp(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ro(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===zi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==qs)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==ps)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Rt){if(null!=t&&!ad(t)||null!=n&&!ad(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,w.hu)(e.getIndex()instanceof hy||e.getIndex()===fy,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kp(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class li extends pr{constructor(t,n){super(t,n,new up,!1)}get parent(){const t=fA(this._path);return null===t?null:new li(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class sa{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new pt(t),r=oa(this.ref,t);return new sa(this._node.getChild(n),r,Rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new sa(i,oa(this.ref,r),Rt)))}hasChild(t){const n=new pt(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function IM(e,t){return(e=(0,w.m9)(e))._checkNotDeleted("ref"),void 0!==t?oa(e._root,t):e._root}function DM(e,t){(e=(0,w.m9)(e))._checkNotDeleted("refFromURL");const n=Jy(t,e._repo.repoInfo_.nodeAdmin);oM("refFromURL",n);const r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&Wi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),IM(e,n.path.toString())}function oa(e,t){return null===We((e=(0,w.m9)(e))._path)?V$("child","path",t,!1):ud("child","path",t,!1),new li(e._repo,Vt(e._path,t))}function eE(e,t){e=(0,w.m9)(e),ai("set",e._path),Zi("set",t,e._path,!1);const n=new w.BH;return Zy(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function uW(e,t){sM("update",t,e._path,!1);const n=new w.BH;return function G$(e,t,n,r){Gl(e,"update",{path:t.toString(),value:n});let i=!0;const s=dd(e),o={};if(Cn(n,(a,c)=>{i=!1,o[a]=tM(Vt(t,a),Ht(c),e.serverSyncTree_,s)}),i)En("update() called with empty data.  Don't do anything."),no(0,r,"ok",void 0);else{const a=Np(e),c=function v$(e,t,n,r){!function kj(e,t,n,r){(0,w.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Dy(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Nt.fromObject(n);return zl(e,new $l({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,o,a);Rp(e.eventQueue_,c),e.server_.merge(t.toString(),n,(d,p)=>{const g="ok"===d;g||jn("update at "+t+" failed: "+d);const _=to(e.serverSyncTree_,a,!g),I=_.length>0?Zl(e,t):t;Nr(e.eventQueue_,I,_),no(0,r,d,p)}),Cn(n,d=>{const p=Yy(e,Vt(t,d));Zl(e,p)}),Nr(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function dW(e){e=(0,w.m9)(e);const t=new Xy(()=>{}),n=new hd(t);return function z$(e,t,n){const r=function D$(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(d,p)=>{const g=rr(d,n);r=r||Xs(p,g)});let i=e.syncPointTree_.get(n);i?r=r||Xs(i,ot()):(i=new WA,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Qs(r,!0,!1):null;return function o$(e){return mp(e.viewCache_)}(zA(i,t,_p(e.pendingWriteTree_,t._path),s?o.getNode():xe.EMPTY_NODE,s))}(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(i=>{const s=Ht(i).withIndex(t._queryParams.getIndex());let o;if(Oy(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())o=rd(e.serverSyncTree_,t._path,s);else{const a=id(e.serverSyncTree_,t);o=YA(e.serverSyncTree_,t._path,s,a)}return Nr(e.eventQueue_,t._path,o),wp(e.serverSyncTree_,t,n,null,!0),s},i=>(Gl(e,"get for query "+(0,w.Wl)(t)+" failed: "+i),Promise.reject(new Error(i))))}(e._repo,e,n).then(r=>new sa(r,new li(e._repo,e._path),e._queryParams.getIndex()))}class hd{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,n){const r=n._queryParams.getIndex();return new yM("value",this,new sa(t.snapshotNode,new li(n._repo,n._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new EM(this,t,n):null}matches(t){return t instanceof hd&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Fp{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n="children_added"===t?"child_added":t;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new EM(this,t,n):null}createEvent(t,n){(0,w.hu)(null!=t.childName,"Child events should have a childName.");const r=oa(new li(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new yM(t.type,this,new sa(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Fp&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fd(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const c=n,d=(p,g)=>{qy(e._repo,e,a),c(p,g)};d.userCallback=n.userCallback,d.context=n.context,n=d}const o=new Xy(n,s||void 0),a="value"===t?new hd(o):new Fp(t,o);return function Q$(e,t,n){let r;r=".info"===We(t._path)?Oy(e.infoSyncTree_,t,n):Oy(e.serverSyncTree_,t,n),aM(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>qy(e._repo,e,a)}function tE(e,t,n,r){return fd(e,"value",t,n,r)}function wM(e,t,n,r){return fd(e,"child_added",t,n,r)}function bM(e,t,n,r){return fd(e,"child_changed",t,n,r)}function SM(e,t,n,r){return fd(e,"child_moved",t,n,r)}function TM(e,t,n,r){return fd(e,"child_removed",t,n,r)}function AM(e,t,n){let r=null;const i=n?new Xy(n):null;"value"===t?r=new hd(i):t&&(r=new Fp(t,i)),qy(e._repo,e,r)}class Di{}class MM extends Di{constructor(t,n){super(),this._value=t,this._key=n}_apply(t){Zi("endAt",this._value,t._path,!0);const n=my(t._queryParams,this._value,this._key);if(kp(n),ro(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pr(t._repo,t._path,n,t._orderByCalled)}}class fW extends Di{constructor(t,n){super(),this._value=t,this._key=n}_apply(t){Zi("endBefore",this._value,t._path,!1);const n=function Ij(e,t,n){let r;return r=my(e,t,e.index_===zi||n?n:qs),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(kp(n),ro(n),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pr(t._repo,t._path,n,t._orderByCalled)}}class RM extends Di{constructor(t,n){super(),this._value=t,this._key=n}_apply(t){Zi("startAt",this._value,t._path,!0);const n=gy(t._queryParams,this._value,this._key);if(kp(n),ro(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pr(t._repo,t._path,n,t._orderByCalled)}}class mW extends Di{constructor(t,n){super(),this._value=t,this._key=n}_apply(t){Zi("startAfter",this._value,t._path,!1);const n=function Cj(e,t,n){let r;return r=gy(e,t,e.index_===zi||n?n:ps),r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(kp(n),ro(n),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pr(t._repo,t._path,n,t._orderByCalled)}}class vW extends Di{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pr(t._repo,t._path,function yj(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(t._queryParams,this._limit),t._orderByCalled)}}class EW extends Di{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pr(t._repo,t._path,function Ej(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(t._queryParams,this._limit),t._orderByCalled)}}class IW extends Di{constructor(t){super(),this._path=t}_apply(t){xp(t,"orderByChild");const n=new pt(this._path);if(ze(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new hy(n),i=dp(t._queryParams,r);return ro(i),new pr(t._repo,t._path,i,!0)}}class wW extends Di{_apply(t){xp(t,"orderByKey");const n=dp(t._queryParams,zi);return ro(n),new pr(t._repo,t._path,n,!0)}}class SW extends Di{_apply(t){xp(t,"orderByPriority");const n=dp(t._queryParams,Rt);return ro(n),new pr(t._repo,t._path,n,!0)}}class AW extends Di{_apply(t){xp(t,"orderByValue");const n=dp(t._queryParams,fy);return ro(n),new pr(t._repo,t._path,n,!0)}}class RW extends Di{constructor(t,n){super(),this._value=t,this._key=n}_apply(t){if(Zi("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MM(this._value,this._key)._apply(new RM(this._value,this._key)._apply(t))}}function wi(e,...t){let n=(0,w.m9)(e);for(const r of t)n=r._apply(n);return n}(function u$(e){(0,w.hu)(!Cp,"__referenceConstructor has already been defined"),Cp=e})(li),function g$(e){(0,w.hu)(!Dp,"__referenceConstructor has already been defined"),Dp=e}(li);const nE={};function rE(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Wi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c,d,o=Jy(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(d=process.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=Jy(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const p=i&&c?new zu(zu.OWNER):new bH(e.name,e.options,t);oM("Invalid Firebase Database URL",o),ze(o.path)||Wi("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function kW(e,t,n,r){let i=nE[t.name];i||(i={},nE[t.name]=i);let s=i[e.toURLString()];return s&&Wi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new j$(e,false,n,r),i[e.toURLString()]=s,s}(a,e,p,new wH(e.name,n));return new LW(g,e)}class LW{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $$(e,t,n){if(e.stats_=ry(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new hp(e.repoInfo_,(r,i,s,o)=>{dM(e,r,i,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hM(e,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,w.Wl)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ea(e.repoInfo_,t,(r,i,s,o)=>{dM(e,r,i,s,o)},r=>{hM(e,r)},r=>{!function W$(e,t){Cn(t,(n,r)=>{Gy(e,n,r)})}(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=function AH(e,t){const n=e.toString();return ny[n]||(ny[n]=t()),ny[n]}(e.repoInfo_,()=>new Aj(e.stats_,e.server_)),e.infoData_=new Dj,e.infoSyncTree_=new KA({startListening:(r,i,s,o)=>{let a=[];const c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=rd(e.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gy(e,"connected",!1),e.serverSyncTree_=new KA({startListening:(r,i,s,o)=>(e.server_.listen(r,s,i,(a,c)=>{const d=o(a,c);Nr(e.eventQueue_,r._path,d)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new li(this._repo,ot())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xW(e,t){const n=nE[t];(!n||n[e.key]!==e)&&Wi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),pM(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Wi("Cannot call "+t+" on a deleted database.")}}function PM(){tA.IS_TRANSPORT_INITIALIZED&&jn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function VW(){PM(),Ks.forceDisallow()}function BW(){PM(),Vl.forceDisallow(),Ks.forceAllow()}function UW(e=(0,nr.getApp)(),t){const n=(0,nr._getProvider)(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=(0,w.P0)("database");r&&OM(n,...r)}return n}function OM(e,t,n,r={}){(e=(0,w.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Wi("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zu(zu.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,w.Sg)(r.mockUserToken,e.app.options.projectId);s=new zu(o)}!function OW(e,t,n,r){e.repoInfo_=new ey(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function $W(e,t){kT(e,t)}const zW={".sv":"timestamp"};class qW{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ea.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ea.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function WW(e){Kv(nr.SDK_VERSION),(0,nr._registerComponent)(new Ko.wA("database",(t,{instanceIdentifier:n})=>rE(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,nr.registerVersion)(MT,"1.0.1",e),(0,nr.registerVersion)(MT,"1.0.1","esm2017")}();const JW=new Zv.Yd("@firebase/database-compat"),xM=function(e){JW.warn("FIREBASE WARNING: "+e)};class tz{constructor(t){this._delegate=t}cancel(t){(0,w.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,w.Wj)("OnDisconnect.cancel","onComplete",t,!0);const n=this._delegate.cancel();return t&&n.then(()=>t(null),r=>t(r)),n}remove(t){(0,w.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,w.Wj)("OnDisconnect.remove","onComplete",t,!0);const n=this._delegate.remove();return t&&n.then(()=>t(null),r=>t(r)),n}set(t,n){(0,w.Dv)("OnDisconnect.set",1,2,arguments.length),(0,w.Wj)("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){(0,w.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,w.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(t,n){if((0,w.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let s=0;s<t.length;++s)i[""+s]=t[s];t=i,xM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,w.Wj)("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(t);return n&&r.then(()=>n(null),i=>n(i)),r}}class nz{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return(0,w.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class io{constructor(t,n){this._database=t,this._delegate=n}val(){return(0,w.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,w.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,w.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,w.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,w.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),ud("DataSnapshot.child","path",t,!1),new io(this._database,this._delegate.child(t))}hasChild(t){return(0,w.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ud("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,w.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,w.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,w.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(n=>t(new io(this._database,n)))}hasChildren(){return(0,w.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,w.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,w.Dv)("DataSnapshot.ref",0,0,arguments.length),new Pr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class An{constructor(t,n){this.database=t,this._delegate=n}on(t,n,r,i){var s;(0,w.Dv)("Query.on",2,4,arguments.length),(0,w.Wj)("Query.on","callback",n,!1);const o=An.getCancelAndContextArgs_("Query.on",r,i),a=(d,p)=>{n.call(o.context,new io(this.database,d),p)};a.userCallback=n,a.context=o.context;const c=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(t){case"value":return tE(this._delegate,a,c),n;case"child_added":return wM(this._delegate,a,c),n;case"child_removed":return TM(this._delegate,a,c),n;case"child_changed":return bM(this._delegate,a,c),n;case"child_moved":return SM(this._delegate,a,c),n;default:throw new Error((0,w.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,n,r){if((0,w.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,w.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,w.Wj)("Query.off","callback",n,!0),(0,w.lb)("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,AM(this._delegate,t,i)}else AM(this._delegate,t)}get(){return dW(this._delegate).then(t=>new io(this.database,t))}once(t,n,r,i){(0,w.Dv)("Query.once",1,4,arguments.length),(0,w.Wj)("Query.once","callback",n,!0);const s=An.getCancelAndContextArgs_("Query.once",r,i),o=new w.BH,a=(d,p)=>{const g=new io(this.database,d);n&&n.call(s.context,g,p),o.resolve(g)};a.userCallback=n,a.context=s.context;const c=d=>{s.cancel&&s.cancel.call(s.context,d),o.reject(d)};switch(t){case"value":tE(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":wM(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":TM(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":bM(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":SM(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error((0,w.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return(0,w.Dv)("Query.limitToFirst",1,1,arguments.length),new An(this.database,wi(this._delegate,function yW(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vW(e)}(t)))}limitToLast(t){return(0,w.Dv)("Query.limitToLast",1,1,arguments.length),new An(this.database,wi(this._delegate,function CW(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EW(e)}(t)))}orderByChild(t){return(0,w.Dv)("Query.orderByChild",1,1,arguments.length),new An(this.database,wi(this._delegate,function DW(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ud("orderByChild","path",e,!1),new IW(e)}(t)))}orderByKey(){return(0,w.Dv)("Query.orderByKey",0,0,arguments.length),new An(this.database,wi(this._delegate,function bW(){return new wW}()))}orderByPriority(){return(0,w.Dv)("Query.orderByPriority",0,0,arguments.length),new An(this.database,wi(this._delegate,function TW(){return new SW}()))}orderByValue(){return(0,w.Dv)("Query.orderByValue",0,0,arguments.length),new An(this.database,wi(this._delegate,function MW(){return new AW}()))}startAt(t=null,n){return(0,w.Dv)("Query.startAt",0,2,arguments.length),new An(this.database,wi(this._delegate,function gW(e=null,t){return cd("startAt","key",t,!0),new RM(e,t)}(t,n)))}startAfter(t=null,n){return(0,w.Dv)("Query.startAfter",0,2,arguments.length),new An(this.database,wi(this._delegate,function _W(e,t){return cd("startAfter","key",t,!0),new mW(e,t)}(t,n)))}endAt(t=null,n){return(0,w.Dv)("Query.endAt",0,2,arguments.length),new An(this.database,wi(this._delegate,function hW(e,t){return cd("endAt","key",t,!0),new MM(e,t)}(t,n)))}endBefore(t=null,n){return(0,w.Dv)("Query.endBefore",0,2,arguments.length),new An(this.database,wi(this._delegate,function pW(e,t){return cd("endBefore","key",t,!0),new fW(e,t)}(t,n)))}equalTo(t,n){return(0,w.Dv)("Query.equalTo",1,2,arguments.length),new An(this.database,wi(this._delegate,function NW(e,t){return cd("equalTo","key",t,!0),new RW(e,t)}(t,n)))}toString(){return(0,w.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,w.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,w.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof An))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,(0,w.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,w.lb)(t,"context",i.context,!0);else if(n)if("object"==typeof n&&null!==n)i.context=n;else{if("function"!=typeof n)throw new Error((0,w.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=n}return i}get ref(){return new Pr(this.database,new li(this._delegate._repo,this._delegate._path))}}class Pr extends An{constructor(t,n){super(t,new pr(n._repo,n._path,new up,!1)),this.database=t,this._delegate=n}getKey(){return(0,w.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,w.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Pr(this.database,oa(this._delegate,t))}getParent(){(0,w.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Pr(this.database,t):null}getRoot(){return(0,w.Dv)("Reference.root",0,0,arguments.length),new Pr(this.database,this._delegate.root)}set(t,n){(0,w.Dv)("Reference.set",1,2,arguments.length),(0,w.Wj)("Reference.set","onComplete",n,!0);const r=eE(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}update(t,n){if((0,w.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let s=0;s<t.length;++s)i[""+s]=t[s];t=i,xM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ai("Reference.update",this._delegate._path),(0,w.Wj)("Reference.update","onComplete",n,!0);const r=uW(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){(0,w.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,w.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function cW(e,t,n){if(ai("setWithPriority",e._path),Zi("setWithPriority",t,e._path,!1),zy("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new w.BH;return Zy(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(t){(0,w.Dv)("Reference.remove",0,1,arguments.length),(0,w.Wj)("Reference.remove","onComplete",t,!0);const n=function aW(e){return ai("remove",e._path),eE(e,null)}(this._delegate);return t&&n.then(()=>t(null),r=>t(r)),n}transaction(t,n,r){(0,w.Dv)("Reference.transaction",1,3,arguments.length),(0,w.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,w.Wj)("Reference.transaction","onComplete",n,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,w.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function KW(e,t,n){var r;if(e=(0,w.m9)(e),ai("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=n?.applyLocally)||void 0===r||r,s=new w.BH,a=tE(e,()=>{});return function X$(e,t,n,r,i,s){Gl(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:PT(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Ky(e,t,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(void 0===c)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{ld("transaction failed: Data returned ",c,o.path),o.status=0;const d=Tp(e.transactionQueueTree_,t),p=ia(d)||[];let g;p.push(o),jy(d,p),"object"==typeof c&&null!==c&&(0,w.r3)(c,".priority")?(g=(0,w.DV)(c,".priority"),(0,w.hu)(ad(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(bp(e.serverSyncTree_,t)||xe.EMPTY_NODE).getPriority().val();const _=dd(e),I=Ht(c,g),T=By(I,a,_);o.currentOutputSnapshotRaw=I,o.currentOutputSnapshotResolved=T,o.currentWriteId=Np(e);const O=Py(e.serverSyncTree_,t,T,o.currentWriteId,o.applyLocally);Nr(e.eventQueue_,t,O),Pp(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(c,d,p)=>{let g=null;c?s.reject(c):(g=new sa(p,new li(e._repo,e._path),Rt),s.resolve(new qW(d,g)))},a,i),s.promise}(this._delegate,t,{applyLocally:r}).then(s=>new nz(s.committed,new io(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(t,n){(0,w.Dv)("Reference.setPriority",1,2,arguments.length),(0,w.Wj)("Reference.setPriority","onComplete",n,!0);const r=function lW(e,t){e=(0,w.m9)(e),ai("setPriority",e._path),zy("setPriority",t,!1);const n=new w.BH;return Zy(e._repo,Vt(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}push(t,n){(0,w.Dv)("Reference.push",0,2,arguments.length),(0,w.Wj)("Reference.push","onComplete",n,!0);const r=function oW(e,t){e=(0,w.m9)(e),ai("push",e._path),Zi("push",t,e._path,!0);const n=uM(e._repo),r=sW(n),i=oa(e,r),s=oa(e,r);let o;return o=null!=t?eE(s,t).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,t),i=r.then(o=>new Pr(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Pr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ai("Reference.onDisconnect",this._delegate._path),new tz(new CM(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class pd{constructor(t,n){this._delegate=t,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:VW,forceLongPolling:BW}}useEmulator(t,n,r={}){OM(this._delegate,t,n,r)}ref(t){if((0,w.Dv)("database.ref",0,1,arguments.length),t instanceof Pr){const n=DM(this._delegate,t.toString());return new Pr(this,n)}{const n=IM(this._delegate,t);return new Pr(this,n)}}refFromURL(t){(0,w.Dv)("database.refFromURL",1,1,arguments.length);const r=DM(this._delegate,t);return new Pr(this,r)}goOffline(){return(0,w.Dv)("database.goOffline",0,0,arguments.length),function HW(e){(e=(0,w.m9)(e))._checkNotDeleted("goOffline"),pM(e._repo)}(this._delegate)}goOnline(){return(0,w.Dv)("database.goOnline",0,0,arguments.length),function jW(e){(e=(0,w.m9)(e))._checkNotDeleted("goOnline"),function J$(e){e.persistentConnection_&&e.persistentConnection_.resume(cM)}(e._repo)}(this._delegate)}}pd.ServerValue={TIMESTAMP:function GW(){return zW}(),increment:e=>function ZW(e){return{".sv":{increment:e}}}(e)};var iz=Object.freeze({__proto__:null,initStandalone:function rz({app:e,url:t,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){Kv(n);const a=new Ko.H0("database-standalone"),c=new Ko.zt("auth-internal",a);let d;return c.setComponent(new Ko.wA("auth-internal",()=>r,"PRIVATE")),i&&(d=new Ko.zt("app-check-internal",a),d.setComponent(new Ko.wA("app-check-internal",()=>i,"PRIVATE"))),{instance:new pd(rE(e,c,d,t,o),e),namespace:s}}});const sz=pd.ServerValue;function gd(e,t,n="on",r=Uu){return new Oe(i=>{let s=null;return s=e[n](t,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===n&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===n?{unsubscribe(){null!=s&&e.off(t,s)}}:{unsubscribe(){}}}).pipe(Me(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),$())}function kM(e){return null==e}function FM(e){return"function"==typeof e.set}function LM(e,t){return FM(t)?t:e.ref(t)}function VM(e,t){if(function az(e){return"string"==typeof e}(e))return t.stringCase();if(FM(e))return t.firebaseCase();if(function lz(e){return"function"==typeof e.exportVal}(e))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function BM(e){return(kM(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function UM(e,t,n){return C(...(t=BM(t)).map(i=>gd(e,i,"on",n)))}function HM(e,t){return function(r,i){return VM(r,{stringCase:()=>e.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function hz(e){return function(n){return n?VM(n,{stringCase:()=>e.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):e.remove()}}function jM(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function gz(e,t){const{payload:n,prevKey:r,key:i}=t,s=jM(e,i),o=function pz(e,t){if(kM(t))return 0;{const n=jM(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{const d={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,e=[...e,d],!1})}return e;case"child_added":if(s>-1)(e[s-1]?.key||null)!==r&&(e=e.filter(c=>c.payload.key!==n.key)).splice(o,0,t);else{if(null==r)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(a=>a.payload.key!==n.key);case"child_changed":return e.map(a=>a.payload.key===i?t:a);case"child_moved":if(s>-1){const a=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,a),e}return e;default:return e}}function $M(e,t,n){return function fz(e,t,n){return gd(e,"value","once",n).pipe(he(r=>{const i=[P(r)];return t.forEach(s=>i.push(gd(e,s,"on",n))),C(...i).pipe(AT(gz,[]))}),Se())}(e,t=BM(t),n)}function WM(e,t){return function(){return gd(e,"value","on",t)}}!function oz(e){e.INTERNAL.registerComponent(new Ko.wA("database-compat",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:n});return new pd(i,r)},"PUBLIC").setServiceProps({Reference:Pr,Query:An,Database:pd,DataSnapshot:io,enableLogging:$W,INTERNAL:iz,ServerValue:sz}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.1")}(tp.Z);const vz=new se("angularfire2.realtimeDatabaseURL"),yz=new se("angularfire2.database.use-emulator");let Ez=(()=>{class e{schedulers;database;constructor(n,r,i,s,o,a,c,d,p,g,_,I,T,O,H){this.schedulers=a;const te=c,B=Wv(n,o,r);d&&ST(B,o,p,_,I,T,g,O),this.database=gT(`${B.name}.database.${i}`,"AngularFireDatabase",B.name,()=>{const ne=o.runOutsideAngular(()=>B.database(i||void 0));return te&&ne.useEmulator(...te),ne},[te])}list(n,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>LM(this.database,n));let s=i;return r&&(s=r(i)),function mz(e,t){const n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:HM(r,"update"),set:HM(r,"set"),push:i=>r.push(i),remove:hz(r),snapshotChanges:i=>$M(e,i,n).pipe(Zs),stateChanges:i=>UM(e,i,n).pipe(Zs),auditTrail:i=>function cz(e,t,n){return function dz(e,t,n){return function uz(e,t){return gd(e,"value","on",t).pipe(Me(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}(e,n).pipe(function cH(...e){const t=Cr(e);return z((n,r)=>{const i=e.length,s=new Array(i);let o=e.map(()=>!1),a=!1;for(let c=0;c<i;c++)Qe(e[c]).subscribe(ie(r,d=>{s[c]=d,!a&&!o[c]&&(o[c]=!0,(a=o.every(Kt))&&(o=null))},de));n.subscribe(ie(r,c=>{if(a){const d=[c,...s];r.next(t?t(...d):d)}}))})}(t),Me(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function uH(e){return z((t,n)=>{let r=!1,i=0;t.subscribe(ie(n,s=>(r||(r=!e(s,i++)))&&n.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Me(i=>i.actions))}(e,UM(e,t).pipe(AT((i,s)=>[...i,s],[])),n)}(e,i,n).pipe(Zs),valueChanges:(i,s)=>$M(e,i,n).pipe(Me(a=>a.map(c=>s&&s.idField?{...c.payload.val(),[s.idField]:c.key}:c.payload.val())),Zs)}}(s,this)}object(n){return function _z(e,t){return{query:e,snapshotChanges:()=>WM(e,t.schedulers.outsideAngular)().pipe(Zs),update:n=>e.ref.update(n),set:n=>e.ref.set(n),remove:()=>e.ref.remove(),valueChanges:()=>WM(e,t.schedulers.outsideAngular)().pipe(Zs,Me(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>LM(this.database,n)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||e)(re(jv),re($v,8),re(vz,8),re(Fi),re(it),re(ep),re(yz,8),re(TT,8),re(ET,8),re(CT,8),re(IT,8),re(DT,8),re(wT,8),re(bT,8),re(Hv,8))};static \u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),Cz=(()=>{class e{constructor(n){this.db=n}getTodos(){return this.db.list("/todos").valueChanges()}addTodo(n){this.db.list("/todos").push(n)}deleteTodo(n){this.db.object("/todos/"+n).remove()}static#e=this.\u0275fac=function(r){return new(r||e)(re(Ez))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac})}return e})();function so(e){return null!=e&&"false"!=`${e}`}function gr(e){return e instanceof Qn?e.nativeElement:e}const md={schedule(e){let t=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:r}=md;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);const i=t(s=>{n=void 0,e(s)});return new Be(()=>n?.(i))},requestAnimationFrame(...e){const{delegate:t}=md;return(t?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:t}=md;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0},ZM=new class Nz extends Xf{flush(t){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===n&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===n&&r.shift();)t.unsubscribe();throw i}}}(class Rz extends Jf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,r=0){return null!==r&&r>0?super.requestAsyncId(t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=md.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,n,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,n,r);const{actions:s}=t;null!=n&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==n&&(md.cancelAnimationFrame(n),t._scheduled=void 0)}});let sE,Pz=1;const Lp={};function qM(e){return e in Lp&&(delete Lp[e],!0)}const Oz={setImmediate(e){const t=Pz++;return Lp[t]=!0,sE||(sE=Promise.resolve()),sE.then(()=>qM(t)&&e()),t},clearImmediate(e){qM(e)}},{setImmediate:xz,clearImmediate:kz}=Oz,Vp={setImmediate(...e){const{delegate:t}=Vp;return(t?.setImmediate||xz)(...e)},clearImmediate(e){const{delegate:t}=Vp;return(t?.clearImmediate||kz)(e)},delegate:void 0};new class Lz extends Xf{flush(t){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===n&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===n&&r.shift();)t.unsubscribe();throw i}}}(class Fz extends Jf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,r=0){return null!==r&&r>0?super.requestAsyncId(t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Vp.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,n,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,n,r);const{actions:s}=t;null!=n&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==n&&(Vp.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))}});function KM(e=0,t,n=j2){let r=-1;return null!=t&&(Ot(t)?n=t:r=t),new Oe(i=>{let s=function Uz(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}let oE;try{oE=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oE=!1}let _d,aE,QM=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function SB(e){return e===VS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!oE)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||e)(re(Fi))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vd(e){return function Hz(){if(null==_d&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_d=!0}))}finally{_d=_d||!1}return _d}()?e:!!e.capture}function XM(e){if(function jz(){if(null==aE){const e=typeof document<"u"?document.head:null;aE=!(!e||!e.createShadowRoot&&!e.attachShadow)}return aE}()){const t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Up(e){return e.composedPath?e.composedPath()[0]:e.target}let Gz=(()=>{class e{constructor(n,r,i){this._platform=n,this._change=new F,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+i,right:n.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,r=this._getWindow(),i=n.documentElement,s=i.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||n.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(function YM(e,t=Uu){return function Bz(e){return z((t,n)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const d=i;i=null,n.next(d)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};t.subscribe(ie(n,d=>{r=!0,i=d,s||Qe(e(d)).subscribe(s=ie(n,a,c))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}(()=>KM(e,t))}(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||e)(re(QM),re(it),re(Mr,8))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Hp(e){return z((t,n)=>{Qe(e).subscribe(ie(n,()=>n.complete(),de)),!n.closed&&t.subscribe(n)})}function rR(...e){return function cG(){return Vr(1)}()(E(e,Br(e)))}function lE(...e){const t=Br(e);return z((n,r)=>{(t?rR(e,n,t):rR(e,n)).subscribe(r)})}const uG=new se("cdk-dir-doc",{providedIn:"root",factory:function dG(){return _t(Mr)}}),hG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let iR=(()=>{class e{constructor(n){this.value="ltr",this.change=new Et,n&&(this.value=function fG(e){const t=e?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?hG.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||e)(re(uG,8))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function cE(e,t,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];i?e.setProperty(r,i,n?.has(r)?"important":""):e.removeProperty(r)}return e}function Kl(e,t){const n=t?"":"none";cE(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function sR(e,t,n){cE(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function jp(e,t){return t&&"none"!=t?e+" "+t:e}function oR(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function uE(e,t){return e.getPropertyValue(t).split(",").map(r=>r.trim())}function dE(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function hE(e,t,n){const{top:r,bottom:i,left:s,right:o}=e;return n>=r&&n<=i&&t>=s&&t<=o}function yd(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function aR(e,t,n,r){const{top:i,right:s,bottom:o,left:a,width:c,height:d}=e,p=c*t,g=d*t;return r>i-g&&r<o+g&&n>a-p&&n<s+p}class lR{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:dE(n)})})}handleScroll(t){const n=Up(t),r=this.positions.get(n);if(!r)return null;const i=r.scrollPosition;let s,o;if(n===this._document){const d=this.getViewportScrollPosition();s=d.top,o=d.left}else s=n.scrollTop,o=n.scrollLeft;const a=i.top-s,c=i.left-o;return this.positions.forEach((d,p)=>{d.clientRect&&n!==p&&n.contains(p)&&yd(d.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function cR(e){const t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),r=e.nodeName.toLowerCase();t.removeAttribute("id");for(let i=0;i<n.length;i++)n[i].removeAttribute("id");return"canvas"===r?hR(e,t):("input"===r||"select"===r||"textarea"===r)&&dR(e,t),uR("canvas",e,t,hR),uR("input, textarea, select",e,t,dR),t}function uR(e,t,n,r){const i=t.querySelectorAll(e);if(i.length){const s=n.querySelectorAll(e);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let gG=0;function dR(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${gG++}`)}function hR(e,t){const n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch{}}const fR=vd({passive:!0}),$p=vd({passive:!1}),fE=new Set(["position"]);class _G{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const n=so(t);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(r=>Kl(r,n)))}constructor(t,n,r,i,s,o){this._config=n,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new F,this._pointerMoveSubscription=Be.EMPTY,this._pointerUpSubscription=Be.EMPTY,this._scrollSubscription=Be.EMPTY,this._resizeSubscription=Be.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new F,this.started=new F,this.released=new F,this.ended=new F,this.entered=new F,this.exited=new F,this.dropped=new F,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const I=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),T=this._dropContainer;if(!I)return void this._endDragSequence(a);(!T||!T.isDragging()&&!T.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{const p=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,g=this._activeTransform;g.x=d.x-p.x+this._passiveTransform.x,g.y=d.y-p.y+this._passiveTransform.y,this._applyRootElementTransform(g.x,g.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:a,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new lR(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(r=>gr(r)),this._handles.forEach(r=>Kl(r,this.disabled)),this._toggleNativeDragInteractions();const n=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&n.add(r)}),this._disabledHandles=n,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const n=gr(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,$p),n.addEventListener("touchstart",this._pointerDown,fR),n.addEventListener("dragstart",this._nativeDragStart,$p)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?gr(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Kl(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Kl(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const n=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Ed(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const n=this._dropContainer;if(n){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),sR(r,!1,fE),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:t}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(t,n){this._parentDragRef&&n.stopPropagation();const r=this.isDragging(),i=Ed(n),s=!i&&0!==n.button,o=this._rootElement,a=Up(n),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=i?function oG(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(n):function sG(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}(n);if(a&&a.draggable&&"mousedown"===n.type&&n.preventDefault(),r||s||c||d)return;if(this._handles.length){const _=o.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=dE(this._boundaryElement));const p=this._previewTemplate;this._pickupPositionInElement=p&&p.template&&!p.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,n);const g=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:g.x,y:g.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(t){sR(this._rootElement,!0,fE),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const n=this._dropContainer,r=n.getItemIndex(this),i=this._getPointerPositionOnPage(t),s=this._getDragDistance(i),o=n._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:t}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:t}),n.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:n},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,n);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,n)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,n,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,t,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,n):this._applyPreviewTransform(t-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,n=this.previewClass,r=t?t.template:null;let i;if(r&&t){const s=t.matchSize?this._initialClientRect:null,o=t.viewContainer.createEmbeddedView(r,t.context);o.detectChanges(),i=gR(o,this._document),this._previewRef=o,t.matchSize?mR(i,s):i.style.transform=Wp(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=cR(this._rootElement),mR(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return cE(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},fE),Kl(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(s=>i.classList.add(s)):i.classList.add(n)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const n=function pG(e){const t=getComputedStyle(e),n=uE(t,"transition-property"),r=n.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=n.indexOf(r),s=uE(t,"transition-duration"),o=uE(t,"transition-delay");return oR(s[i])+oR(o[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||Up(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*n);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,n=t?t.template:null;let r;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),r=gR(this._placeholderRef,this._document)):r=cR(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(t,n,r){const i=n===this._rootElement?null:n,s=i?i.getBoundingClientRect():t,o=Ed(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-t.left+(o.pageX-s.left-a.left),y:s.top-t.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(t){const n=this._getViewportScrollPosition(),r=Ed(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,i=r.pageX-n.left,s=r.pageY-n.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(t){const n=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===n?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===n)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),p=a.top+o,g=a.bottom-(d-o);r=pR(r,a.left+s,a.right-(c-s)),i=pR(i,p,g)}return{x:r,y:i}}_updatePointerDirectionDelta(t){const{x:n,y:r}=t,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(n-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=n>s.x?1:-1,s.x=n),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Kl(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,$p),t.removeEventListener("touchstart",this._pointerDown,fR),t.removeEventListener("dragstart",this._nativeDragStart,$p)}_applyRootElementTransform(t,n){const r=Wp(t,n),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=jp(r,this._initialTransform)}_applyPreviewTransform(t,n){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=Wp(t,n);this._preview.style.transform=jp(i,r)}_getDragDistance(t){const n=this._pickupPositionOnPage;return n?{x:t.x-n.x,y:t.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:n}=this._passiveTransform;if(0===t&&0===n||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,i.height>r.height?(a>0&&(n+=a),c>0&&(n-=c)):n=0,(t!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:t})}_getDragStartDelay(t){const n=this.dragStartDelay;return"number"==typeof n?n:Ed(t)?n.touch:n?n.mouse:0}_updateOnScroll(t){const n=this._parentPositions.handleScroll(t);if(n){const r=Up(t);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&yd(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=XM(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,n){const r=this._previewContainer||"global";if("parent"===r)return t;if("global"===r){const i=this._document;return n||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return gr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(n=>t.target&&(t.target===n||n.contains(t.target)))}}function Wp(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function pR(e,t,n){return Math.max(t,Math.min(n,e))}function Ed(e){return"t"===e.type[0]}function gR(e,t){const n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];const r=t.createElement("div");return n.forEach(i=>r.appendChild(i)),r}function mR(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=Wp(t.left,t.top)}function Cd(e,t){return Math.max(0,Math.min(t,e))}class yG{constructor(t,n){this._element=t,this._dragDropRegistry=n,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,n,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,n,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,c=s.findIndex(H=>H.drag===t),d=s[o],g=d.clientRect,_=c>o?1:-1,I=this._getItemOffsetPx(s[c].clientRect,g,_),T=this._getSiblingOffsetPx(c,s,_),O=s.slice();return function vG(e,t,n){const r=Cd(t,e.length-1),i=Cd(n,e.length-1);if(r===i)return;const s=e[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)e[a]=e[a+o];e[i]=s}(s,c,o),s.forEach((H,te)=>{if(O[te]===H)return;const B=H.drag===t,ne=B?I:T,fe=B?t.getPlaceholderElement():H.drag.getRootElement();H.offset+=ne,a?(fe.style.transform=jp(`translate3d(${Math.round(H.offset)}px, 0, 0)`,H.initialTransform),yd(H.clientRect,0,ne)):(fe.style.transform=jp(`translate3d(0, ${Math.round(H.offset)}px, 0)`,H.initialTransform),yd(H.clientRect,ne,0))}),this._previousSwap.overlaps=hE(g,n,r),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(t,n,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(t,n,r):i,o=this._activeDraggables,a=o.indexOf(t),c=t.getPlaceholderElement();let d=o[s];if(d===t&&(d=o[s+1]),!d&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(n,r)&&(d=o[0]),a>-1&&o.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){const p=d.getRootElement();p.parentElement.insertBefore(c,p),o.splice(s,0,t)}else gr(this._element).appendChild(c),o.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const n=t.getRootElement();if(n){const r=this._itemPositions.find(i=>i.drag===t)?.initialTransform;n.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===t)}updateOnScroll(t,n){this._itemPositions.forEach(({clientRect:r})=>{yd(r,t,n)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(n=>{const r=n.getVisibleElement();return{drag:n,offset:0,initialTransform:r.style.transform||"",clientRect:dE(r)}}).sort((n,r)=>t?n.clientRect.left-r.clientRect.left:n.clientRect.top-r.clientRect.top)}_getItemOffsetPx(t,n,r){const i="horizontal"===this.orientation;let s=i?n.left-t.left:n.top-t.top;return-1===r&&(s+=i?n.width-t.width:n.height-t.height),s}_getSiblingOffsetPx(t,n,r){const i="horizontal"===this.orientation,s=n[t].clientRect,o=n[t+-1*r];let a=s[i?"width":"height"]*r;if(o){const c=i?"left":"top",d=i?"right":"bottom";-1===r?a-=o.clientRect[c]-s[d]:a+=s[c]-o.clientRect[d]}return a}_shouldEnterAsFirstChild(t,n){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?t>=o.right:n>=o.bottom}{const o=r[0].clientRect;return i?t<=o.left:n<=o.top}}_getItemIndexFromPointerPosition(t,n,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>a!==t&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?n>=Math.floor(c.left)&&n<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom))));return-1!==o&&this._sortPredicate(o,t)?o:-1}}class EG{constructor(t,n,r,i,s){this._dragDropRegistry=n,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new F,this.entered=new F,this.exited=new F,this.dropped=new F,this.sorted=new F,this.receivingStarted=new F,this.receivingStopped=new F,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Be.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new F,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function lG(e=0,t=Uu){return e<0&&(e=0),KM(e,e,t)}(0,ZM).pipe(Hp(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=gr(t),this._document=r,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new lR(r),this._sortStrategy=new yG(this.element,n),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,n,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(t)),this._sortStrategy.enter(t,n,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,n,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:t,currentIndex:n,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(t){const n=this._draggables;return this._draggables=t,t.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(n.filter(i=>i.isDragging()).every(i=>-1===t.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const n=gr(this.element);return this._scrollableElements=-1===t.indexOf(n)?[n,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,n,r,i){if(this.sortingDisabled||!this._clientRect||!aR(this._clientRect,.05,n,r))return;const s=this._sortStrategy.sort(t,n,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,n){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||aR(o.clientRect,.05,t,n)&&([i,s]=function CG(e,t,n,r){const i=yR(t,r),s=ER(t,n);let o=0,a=0;if(i){const c=e.scrollTop;1===i?c>0&&(o=1):e.scrollHeight-c>e.clientHeight&&(o=2)}if(s){const c=e.scrollLeft;1===s?c>0&&(a=1):e.scrollWidth-c>e.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,n),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=yR(c,n),s=ER(c,t),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=gr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=gr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=gr(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,n){return null!=this._clientRect&&hE(this._clientRect,t,n)}_getSiblingContainerFromPosition(t,n,r){return this._siblings.find(i=>i._canReceive(t,n,r))}_canReceive(t,n,r){if(!this._clientRect||!hE(this._clientRect,n,r)||!this.enterPredicate(t,this))return!1;const i=this._getShadowRoot().elementFromPoint(n,r);if(!i)return!1;const s=gr(this.element);return i===s||s.contains(i)}_startReceiving(t,n){const r=this._activeSiblings;!r.has(t)&&n.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:n}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const n=this._parentPositions.handleScroll(t);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=XM(gr(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,t))}}function yR(e,t){const{top:n,bottom:r,height:i}=e,s=.05*i;return t>=n-s&&t<=n+s?1:t>=r-s&&t<=r+s?2:0}function ER(e,t){const{left:n,right:r,width:i}=e,s=.05*i;return t>=n-s&&t<=n+s?1:t>=r-s&&t<=r+s?2:0}const zp=vd({passive:!1,capture:!0});let IG=(()=>{class e{constructor(n,r){this._ngZone=n,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new F,this.pointerUp=new F,this.scroll=new F,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(n){this._dropInstances.has(n)||this._dropInstances.add(n)}registerDragItem(n){this._dragInstances.add(n),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,zp)})}removeDropContainer(n){this._dropInstances.delete(n)}removeDragItem(n){this._dragInstances.delete(n),this.stopDragging(n),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,zp)}startDragging(n,r){if(!(this._activeDragInstances.indexOf(n)>-1)&&(this._activeDragInstances.push(n),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:zp}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:zp}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(n){const r=this._activeDragInstances.indexOf(n);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(n){return this._activeDragInstances.indexOf(n)>-1}scrolled(n){const r=[this.scroll];return n&&n!==this._document&&r.push(new Oe(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&i.next(a)};return n.addEventListener("scroll",o,!0),()=>{n.removeEventListener("scroll",o,!0)}}))),C(...r)}ngOnDestroy(){this._dragInstances.forEach(n=>this.removeDragItem(n)),this._dropInstances.forEach(n=>this.removeDropContainer(n)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((n,r)=>{this._document.removeEventListener(r,n.handler,n.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(re(it),re(Mr))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const DG={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let CR=(()=>{class e{constructor(n,r,i,s){this._document=n,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(n,r=DG){return new _G(n,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(n){return new EG(n,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(r){return new(r||e)(re(Mr),re(it),re(Gz),re(IG))};static#t=this.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const pE=new se("CDK_DRAG_PARENT"),gE=new se("CdkDragHandle"),IR=new se("CdkDragPlaceholder"),DR=new se("CdkDragPreview"),wR=new se("CDK_DRAG_CONFIG"),bR=new se("CdkDropList");let SR=(()=>{class e{static#e=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(n){this._disabled=so(n),this._dragRef.disabled=this._disabled}constructor(n,r,i,s,o,a,c,d,p,g,_){this.element=n,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=p,this._selfHandle=g,this._parentDrag=_,this._destroyed=new F,this.started=new Et,this.released=new Et,this.ended=new Et,this.entered=new Et,this.exited=new Et,this.dropped=new Et,this.moved=new Oe(I=>{const T=this._dragRef.moved.pipe(Me(O=>({source:this,pointerPosition:O.pointerPosition,event:O.event,delta:O.delta,distance:O.distance}))).subscribe(I);return()=>{T.unsubscribe()}}),this._dragRef=d.createDrag(n,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),a&&this._assignDefaults(a),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(n){this._dragRef.setFreeDragPosition(n)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Gv(1),Hp(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(n){const r=n.rootElementSelector,i=n.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const n=e._dragInstances.indexOf(this);n>-1&&e._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const n=this.element.nativeElement;let r=n;this.rootElementSelector&&(r=void 0!==n.closest?n.closest(this.rootElementSelector):n.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||n)}_getBoundaryElement(){const n=this.boundaryElement;return n?"string"==typeof n?this.element.nativeElement.closest(n):gr(n):null}_syncInputs(n){n.beforeStarted.subscribe(()=>{if(!n.isDragging()){const r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.dragStartDelay="object"==typeof i&&i?i:function zM(e,t=0){return function Iz(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}(i),n.constrainPosition=this.constrainPosition,n.previewClass=this.previewClass,n.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&n.withDirection(r.value)}}),n.beforeStarted.pipe(Gv(1)).subscribe(()=>{if(this._parentDrag)return void n.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){n.withParent(e._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(n){n.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),n.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),n.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),n.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),n.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),n.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(n){const{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:p}=n;this.disabled=c??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),p&&(this.previewContainer=p)}_setupHandlesListener(){this._handles.changes.pipe(lE(this._handles),uT(n=>{const r=n.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),he(n=>C(...n.map(r=>r._stateChanges.pipe(lE(r))))),Hp(this._destroyed)).subscribe(n=>{const r=this._dragRef,i=n.element.nativeElement;n.disabled?r.disableHandle(i):r.enableHandle(i)})}static#t=this.\u0275fac=function(r){return new(r||e)(Y(Qn),Y(bR,12),Y(Mr),Y(it),Y(vi),Y(wR,8),Y(iR,8),Y(CR),Y(If),Y(gE,10),Y(pE,12))};static#n=this.\u0275dir=Ce({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(r,i,s){if(1&r&&(mf(s,DR,5),mf(s,IR,5),mf(s,gE,5)),2&r){let o;gf(o=_f())&&(i._previewTemplate=o.first),gf(o=_f())&&(i._placeholderTemplate=o.first),gf(o=_f())&&(i._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){2&r&&Sl("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[ft([{provide:pE,useExisting:e}]),Yr]})}return e})();function RG(e,t){1&e&&(ln(0,"span",22),ji(1,"Valmis"),cn())}function NG(e,t){1&e&&(ln(0,"span",23),ji(1,"\u2022"),cn())}function PG(e,t){if(1&e){const n=s_();ln(0,"textarea",24),Tn("ngModelChange",function(i){return ns(n),Mo(wl().$implicit.newComment=i)}),cn()}2&e&&pi("ngModel",wl().$implicit.newComment)}function OG(e,t){if(1&e&&(ln(0,"div",26),ji(1),cn()),2&e){const n=t.$implicit;ni(1),af(n)}}function xG(e,t){if(1&e&&(ln(0,"div"),Uo(1,OG,2,1,"div",25),cn()),2&e){const n=wl().$implicit;ni(1),pi("ngForOf",n.comments)}}function kG(e,t){if(1&e){const n=s_();ln(0,"li",12)(1,"div",13)(2,"input",14),Tn("ngModelChange",function(i){return Mo(ns(n).$implicit.done=i)}),cn(),ln(3,"span",15),ji(4),cn(),Uo(5,RG,2,0,"span",16),cn(),ln(6,"div")(7,"button",17),Tn("click",function(){const s=ns(n).$implicit;return Mo(wl().toggleComment(s))}),ji(8),Uo(9,NG,2,0,"span",18),cn(),Uo(10,PG,1,1,"textarea",19),Uo(11,xG,2,1,"div",20),ln(12,"button",21),Tn("click",function(){return ns(n),Mo(wl().removeTodo)}),ji(13,"Poista"),cn()()()}if(2&e){const n=t.$implicit;ni(2),pi("ngModel",n.done),ni(2),af(n.text),ni(1),pi("ngIf",n.done),ni(3),lf(" ",n.showComment?"Piilota":"Kommentit"," "),ni(1),pi("ngIf",n.comments&&n.comments.length>0&&!n.showComment),ni(1),pi("ngIf",n.showComment),ni(1),pi("ngIf",n.showComment)}}let FG=(()=>{class e{constructor(n){this.firebaseService=n,this.todos=[],this.newTodoText=""}ngOnInit(){this.firebaseService.getTodos().subscribe(n=>{this.todos=n})}addTodo(){if(this.newTodoText){const n=new k2(this.newTodoText);this.firebaseService.addTodo(n),this.newTodoText=""}}removeTodo(n){this.firebaseService.deleteTodo(n)}toggleComment(n){n.showComment=!n.showComment}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Cz))};static#t=this.\u0275cmp=Eo({type:e,selectors:[["app-todo"]],decls:17,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"flex-container","mt-lg-5"],[1,"card","gradient-background"],[1,"card-header","sticky-top"],[1,"input-group","mb-3"],["placeholder","Uusi teht\xe4v\xe4...",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"input-group-append",2,"margin-left","10px"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"list-group"],["cdkDrag","","class","list-group-item d-flex justify-content-between align-items-center rounded p-3","style","background-color: #f5f5f5;",4,"ngFor","ngForOf"],["cdkDrag","",1,"list-group-item","d-flex","justify-content-between","align-items-center","rounded","p-3",2,"background-color","#f5f5f5"],[1,"d-flex","align-items-center"],["type","checkbox",1,"me-2",3,"ngModel","ngModelChange"],[1,"me-2"],["class","valmis-box btn-sm me-2",4,"ngIf"],[1,"btn","btn-secondary","btn-sm","me-2",3,"click"],["class","comment-indicator",4,"ngIf"],["placeholder","Lis\xe4\xe4 kommentti...","rows","1","class","form-control rounded p-2",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-danger","btn-sm","ml-2",3,"click"],[1,"valmis-box","btn-sm","me-2"],[1,"comment-indicator"],["placeholder","Lis\xe4\xe4 kommentti...","rows","1",1,"form-control","rounded","p-2",3,"ngModel","ngModelChange"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"]],template:function(r,i){1&r&&(ln(0,"html",0)(1,"head"),Ho(2,"meta",1)(3,"meta",2),ln(4,"title"),ji(5,"Teht\xe4v\xe4lista"),cn()(),ln(6,"body")(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"input",7),Tn("ngModelChange",function(o){return i.newTodoText=o})("keyup.enter",function(){return i.addTodo()}),cn(),ln(12,"div",8)(13,"button",9),Tn("click",function(){return i.addTodo()}),ji(14,"Lis\xe4\xe4"),cn()()()(),ln(15,"ul",10),Uo(16,kG,14,7,"li",11),cn()()()()()),2&r&&(ni(11),pi("ngModel",i.newTodoText),ni(5),pi("ngForOf",i.todos))},dependencies:[PS,xS,Uf,_v,N0,Nv,SR],styles:[".valmis-box[_ngcontent-%COMP%]{background-color:#4caf50;padding:5px 10px;border-radius:5px;color:#fff;margin-left:10px;box-shadow:0 1px 5px #00000080}.gradient-background[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,#f5f5f5);box-shadow:0 1px 5px #0000004d}.card-body[_ngcontent-%COMP%]{-ms-box-shadow:0 1px 5px rgba(0,0,0,.3);box-shadow:0 1px 5px #0000004d;border:none;width:100%}.btn[_ngcontent-%COMP%]{box-shadow:0 1px 5px #00000080}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;position:absolute;inset:50px 0 0;overflow-y:auto}.comment-indicator[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin-left:5px}"]})}return e})(),LG=(()=>{class e{constructor(){this.title="todo-app"}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Eo({type:e,selectors:[["app-root"]],decls:10,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","gradient-background"],["href","#",1,"navbar-brand"],[1,"fas","fa-tasks"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-item","active"]],template:function(r,i){1&r&&(ln(0,"nav",0)(1,"a",1),Ho(2,"i",2),ji(3," Teht\xe4v\xe4lista "),cn(),ln(4,"button",3),Ho(5,"span",4),cn(),ln(6,"div",5)(7,"ul",6),Ho(8,"li",7),cn()()(),Ho(9,"app-todo"))},dependencies:[FG],styles:[".gradient-background[_ngcontent-%COMP%]{background:linear-gradient(to right,#31587f,#00c9c9)}.navbar[_ngcontent-%COMP%]{-ms-box-shadow:0 1px 5px rgba(0,0,0,.3);box-shadow:0 1px 5px #0000004d;border:none;width:100%}"]})}return e})();class Id{constructor(t){return t}}class TR{constructor(){return(0,nr.getApps)()}}const _E=new se("angularfire2._apps"),BG={provide:Id,useFactory:function VG(e){return e&&1===e.length?e[0]:new Id((0,nr.getApp)())},deps:[[new ti,_E]]},UG={provide:TR,deps:[[new ti,_E]]};function HG(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Id(r)}}let jG=(()=>{class e{constructor(n){(0,nr.registerVersion)("angularfire",Bv.full,"core"),(0,nr.registerVersion)("angularfire",Bv.full,"app"),(0,nr.registerVersion)("angular",mI.full,n.toString())}static \u0275fac=function(r){return new(r||e)(re(Fi))};static \u0275mod=qn({type:e});static \u0275inj=ar({providers:[BG,UG]})}return e})();function $G(e,...t){return{ngModule:jG,providers:[{provide:_E,useFactory:HG(e),multi:!0,deps:[it,Tr,ep,...t]}]}}const WG=fT(nr.initializeApp,!0);ye(560);class MR{constructor(){return Uv("auth")}}class EE{constructor(t){return t}}const RR="database",CE=new se("angularfire2.database-instances");function YG(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new EE(r)}}const QG={provide:class qG{constructor(){return Uv(RR)}},deps:[[new ti,CE]]},JG={provide:EE,useFactory:function KG(e,t){const n=function dT(e,t,n){if(t){if(1===t.length)return t[0];const s=t.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(e).getImmediate({optional:!0})}(RR,e,t);return n&&new EE(n)},deps:[[new ti,CE],Id]};let XG=(()=>{class e{constructor(){(0,nr.registerVersion)("angularfire",Bv.full,"rtdb")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=qn({type:e});static \u0275inj=ar({providers:[JG,QG]})}return e})();function e3(e,...t){return{ngModule:XG,providers:[{provide:CE,useFactory:YG(e),multi:!0,deps:[it,Tr,ep,TR,[new ti,MR],[new ti,Hv],...t]}]}}const t3=fT(UW,!0);let n3=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=qn({type:e,bootstrap:[LG]});static#n=this.\u0275inj=ar({imports:[yU,x2,$G(()=>WG({projectId:"tm-app-db831",appId:"1:506425400377:web:c45192e7a17430f28c41e8",storageBucket:"tm-app-db831.appspot.com",apiKey:"AIzaSyAZ4LtCvwJ94SGbS38MFs_1ExLlMqzrnjE",authDomain:"tm-app-db831.firebaseapp.com",messagingSenderId:"506425400377",measurementId:"G-85YCPN0Q9L"})),e3(()=>t3())]})}return e})();_U().bootstrapModule(n3).catch(e=>console.error(e))},560:(Or,Zt,ye)=>{ye.d(Zt,{$:()=>_o,A:()=>X,E:()=>rt,J:()=>Yp,K:()=>ao,M:()=>ui,P:()=>Jd,Q:()=>$,R:()=>mg,U:()=>Is,V:()=>tg,W:()=>ng,X:()=>di,Y:()=>go,Z:()=>Je,_:()=>ma,a:()=>Ud,a0:()=>yo,a1:()=>Od,a2:()=>xd,a3:()=>ig,a4:()=>Ce,a5:()=>tt,a6:()=>wn,a7:()=>On,a8:()=>kd,a9:()=>sg,aA:()=>at,aB:()=>J,aC:()=>ih,aD:()=>v,aE:()=>le,aF:()=>Va,aG:()=>nh,aH:()=>Cg,aI:()=>et,aM:()=>wr,aP:()=>_n,aa:()=>Lt,ab:()=>ae,ac:()=>Tt,ad:()=>Dr,ae:()=>Ut,af:()=>ws,ag:()=>Io,aj:()=>Do,ak:()=>zr,al:()=>wo,ao:()=>Nd,ap:()=>qr,ar:()=>kE,as:()=>VE,at:()=>yt,au:()=>M,av:()=>Jt,aw:()=>Ue,ax:()=>Fs,ay:()=>Qr,az:()=>ee,b:()=>Cc,c:()=>Kn,d:()=>Oi,e:()=>yg,f:()=>xs,g:()=>K,h:()=>Dg,i:()=>zd,j:()=>Mo,k:()=>Oo,l:()=>_g,m:()=>fh,p:()=>gt,r:()=>Qd,s:()=>Yr,u:()=>vg});var D=ye(861),j=ye(58),N=ye(534),pe=ye(879),Be=ye(582),Dt=ye(537);const gt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},X={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const rt=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qt=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new pe.Yd("@firebase/auth");function Pt(h,...l){be.logLevel<=pe.in.ERROR&&be.error(`Auth (${N.SDK_VERSION}): ${h}`,...l)}function Ue(h,...l){throw ke(h,...l)}function at(h,...l){return ke(h,...l)}function $n(h,l,u){const f=Object.assign(Object.assign({},qt()),{[l]:u});return new j.LL("auth","Firebase",f).create(l,{appName:h.name})}function jt(h,l,u){if(!(l instanceof u))throw u.name!==l.constructor.name&&Ue(h,"argument-error"),$n(h,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(h,...l){if("string"!=typeof h){const u=l[0],f=[...l.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(u,...f)}return Ge.create(h,...l)}function J(h,l,...u){if(!h)throw ke(l,...u)}function Ke(h){const l="INTERNAL ASSERTION FAILED: "+h;throw Pt(l),new Error(l)}function yt(h,l){h||Ke(l)}function Ft(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function Kt(){return"http:"===xr()||"https:"===xr()}function xr(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Mn{constructor(l,u){this.shortDelay=l,this.longDelay=u,yt(u>l,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function _r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ci(h,l){yt(h.emulator,"Emulator should always be set here");const{url:u}=h.emulator;return l?`${u}${l.startsWith("/")?l.slice(1):l}`:u}class V{static initialize(l,u,f){this.fetchImpl=l,u&&(this.headersImpl=u),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},F=new Mn(3e4,6e4);function L(h,l){return h.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:h.tenantId}):l}function q(h,l,u,f){return z.apply(this,arguments)}function z(){return(z=(0,D.Z)(function*(h,l,u,f,m={}){return ie(h,m,(0,D.Z)(function*(){let y={},R={};f&&("GET"===l?R=f:y={body:JSON.stringify(f)});const k=(0,j.xO)(Object.assign({key:h.config.apiKey},R)).slice(1),Q=yield h._getAdditionalHeaders();return Q["Content-Type"]="application/json",h.languageCode&&(Q["X-Firebase-Locale"]=h.languageCode),V.fetch()(Ye(h,h.config.apiHost,u,k),Object.assign({method:l,headers:Q,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function ie(h,l,u){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,D.Z)(function*(h,l,u){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},U),l);try{const m=new mt(h),y=yield Promise.race([u(),m.promise]);m.clearNetworkTimeout();const R=yield y.json();if("needConfirmation"in R)throw bt(h,"account-exists-with-different-credential",R);if(y.ok&&!("errorMessage"in R))return R;{const k=y.ok?R.errorMessage:R.error.message,[Q,ce]=k.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Q)throw bt(h,"credential-already-in-use",R);if("EMAIL_EXISTS"===Q)throw bt(h,"email-already-in-use",R);if("USER_DISABLED"===Q)throw bt(h,"user-disabled",R);const ve=f[Q]||Q.toLowerCase().replace(/[_\s]+/g,"-");if(ce)throw $n(h,ve,ce);Ue(h,ve)}}catch(m){if(m instanceof j.ZR)throw m;Ue(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Me(h,l,u,f){return _e.apply(this,arguments)}function _e(){return(_e=(0,D.Z)(function*(h,l,u,f,m={}){const y=yield q(h,l,u,f,m);return"mfaPendingCredential"in y&&Ue(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function Ye(h,l,u,f){const m=`${l}${u}?${f}`;return h.config.emulator?ci(h.config,m):`${h.config.apiScheme}://${m}`}function wt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mt{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((u,f)=>{this.timer=setTimeout(()=>f(at(this.auth,"network-request-failed")),F.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bt(h,l,u){const f={appName:h.name};u.email&&(f.email=u.email),u.phoneNumber&&(f.phoneNumber=u.phoneNumber);const m=at(h,l,f);return m.customData._tokenResponse=u,m}function $t(h){return void 0!==h&&void 0!==h.getResponse}function Yt(h){return void 0!==h&&void 0!==h.enterprise}class an{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const u of this.recaptchaEnforcementState)if(u.provider&&u.provider===l)return wt(u.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function ir(){return(ir=(0,D.Z)(function*(h){return(yield q(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kr(h,l){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,D.Z)(function*(h,l){return q(h,"GET","/v2/recaptchaConfig",L(h,l))})).apply(this,arguments)}function Lr(){return(Lr=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function yr(){return(yr=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Wn(){return(Wn=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function zn(h){if(h)try{const l=new Date(Number(h));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function In(){return(In=(0,D.Z)(function*(h,l=!1){const u=(0,j.m9)(h),f=yield u.getIdToken(l),m=Dn(f);J(m&&m.exp&&m.auth_time&&m.iat,u.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,R=y?.sign_in_provider;return{claims:m,token:f,authTime:zn(Vr(m.auth_time)),issuedAtTime:zn(Vr(m.iat)),expirationTime:zn(Vr(m.exp)),signInProvider:R||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function Vr(h){return 1e3*Number(h)}function Dn(h){const[l,u,f]=h.split(".");if(void 0===l||void 0===u||void 0===f)return Pt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,j.tV)(u);return m?JSON.parse(m):(Pt("Failed to decode base64 JWT payload"),null)}catch(m){return Pt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function St(h,l){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(h,l,u=!1){if(u)return l;try{return yield l}catch(f){throw f instanceof j.ZR&&function Er({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class Cr{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var u;if(l){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(u=this.user.stsTokenManager.expirationTime)&&void 0!==u?u:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(l=!1){var u=this;if(!this.isRunning)return;const f=this.getInterval(l);this.timerId=setTimeout((0,D.Z)(function*(){yield u.iteration()}),f)}iteration(){var l=this;return(0,D.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(u){return void("auth/network-request-failed"===u?.code&&l.schedule(!0))}l.schedule()})()}}class Br{constructor(l,u){this.createdAt=l,this.lastLoginAt=u,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(h){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,D.Z)(function*(h){var l;const u=h.auth,f=yield h.getIdToken(),m=yield St(h,function dn(h,l){return Wn.apply(this,arguments)}(u,{idToken:f}));J(m?.users.length,u,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const R=null!==(l=y.providerUserInfo)&&void 0!==l&&l.length?function bi(h){return h.map(l=>{var{providerId:u}=l,f=(0,Be._T)(l,["providerId"]);return{providerId:u,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],k=function _s(h,l){return[...h.filter(f=>!l.some(m=>m.providerId===f.providerId)),...l]}(h.providerData,R),ve=!!h.isAnonymous&&!(h.email&&y.passwordHash||k?.length),Ze={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:k,metadata:new Br(y.createdAt,y.lastLoginAt),isAnonymous:ve};Object.assign(h,Ze)}),Wt.apply(this,arguments)}function Gn(){return(Gn=(0,D.Z)(function*(h){const l=(0,j.m9)(h);yield Qt(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Ur(){return(Ur=(0,D.Z)(function*(h,l){const u=yield ie(h,{},(0,D.Z)(function*(){const f=(0,j.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,R=Ye(h,m,"/v1/token",`key=${y}`),k=yield h._getAdditionalHeaders();return k["Content-Type"]="application/x-www-form-urlencoded",V.fetch()(R,{method:"POST",headers:k,body:f})}));return{accessToken:u.access_token,expiresIn:u.expires_in,refreshToken:u.refresh_token}})).apply(this,arguments)}class S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){J(l.idToken,"internal-error"),J(typeof l.idToken<"u","internal-error"),J(typeof l.refreshToken<"u","internal-error");const u="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):function oo(h){const l=Dn(h);return J(l,"internal-error"),J(typeof l.exp<"u","internal-error"),J(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,u)}getToken(l,u=!1){var f=this;return(0,D.Z)(function*(){return J(!f.accessToken||f.refreshToken,l,"user-token-expired"),u||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(l,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,u){var f=this;return(0,D.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:R}=yield function qi(h,l){return Ur.apply(this,arguments)}(l,u);f.updateTokensAndExpiration(m,y,Number(R))})()}updateTokensAndExpiration(l,u,f){this.refreshToken=u||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(l,u){const{refreshToken:f,accessToken:m,expirationTime:y}=u,R=new S;return f&&(J("string"==typeof f,"internal-error",{appName:l}),R.refreshToken=f),m&&(J("string"==typeof m,"internal-error",{appName:l}),R.accessToken=m),y&&(J("number"==typeof y,"internal-error",{appName:l}),R.expirationTime=y),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new S,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function b(h,l){J("string"==typeof h||typeof h>"u","internal-error",{appName:l})}class E{constructor(l){var{uid:u,auth:f,stsTokenManager:m}=l,y=(0,Be._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=u,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new Br(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(l){var u=this;return(0,D.Z)(function*(){const f=yield St(u,u.stsTokenManager.getToken(u.auth,l));return J(f,u.auth,"internal-error"),u.accessToken!==f&&(u.accessToken=f,yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)),f})()}getIdTokenResult(l){return function hn(h){return In.apply(this,arguments)}(this,l)}reload(){return function mn(h){return Gn.apply(this,arguments)}(this)}_assign(l){this!==l&&(J(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(u=>Object.assign({},u)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const u=new E(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return u.metadata._copy(this.metadata),u}_onReload(l){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,u=!1){var f=this;return(0,D.Z)(function*(){let m=!1;l.idToken&&l.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(l),m=!0),u&&(yield Qt(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var l=this;return(0,D.Z)(function*(){const u=yield l.getIdToken();return yield St(l,function Fr(h,l){return Lr.apply(this,arguments)}(l.auth,{idToken:u})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,u){var f,m,y,R,k,Q,ce,ve;const Ze=null!==(f=u.displayName)&&void 0!==f?f:void 0,fn=null!==(m=u.email)&&void 0!==m?m:void 0,Xr=null!==(y=u.phoneNumber)&&void 0!==y?y:void 0,Za=null!==(R=u.photoURL)&&void 0!==R?R:void 0,Wc=null!==(k=u.tenantId)&&void 0!==k?k:void 0,qa=null!==(Q=u._redirectEventId)&&void 0!==Q?Q:void 0,zc=null!==(ce=u.createdAt)&&void 0!==ce?ce:void 0,Gc=null!==(ve=u.lastLoginAt)&&void 0!==ve?ve:void 0,{uid:Zc,emailVerified:ko,isAnonymous:ki,providerData:qc,stsTokenManager:Kc}=u;J(Zc&&Kc,l,"internal-error");const ph=S.fromJSON(this.name,Kc);J("string"==typeof Zc,l,"internal-error"),b(Ze,l.name),b(fn,l.name),J("boolean"==typeof ko,l,"internal-error"),J("boolean"==typeof ki,l,"internal-error"),b(Xr,l.name),b(Za,l.name),b(Wc,l.name),b(qa,l.name),b(zc,l.name),b(Gc,l.name);const ss=new E({uid:Zc,auth:l,email:fn,emailVerified:ko,displayName:Ze,isAnonymous:ki,photoURL:Za,phoneNumber:Xr,tenantId:Wc,stsTokenManager:ph,createdAt:zc,lastLoginAt:Gc});return qc&&Array.isArray(qc)&&(ss.providerData=qc.map(Bg=>Object.assign({},Bg))),qa&&(ss._redirectEventId=qa),ss}static _fromIdTokenResponse(l,u,f=!1){return(0,D.Z)(function*(){const m=new S;m.updateFromServerResponse(u);const y=new E({uid:u.localId,auth:l,stsTokenManager:m,isAnonymous:f});return yield Qt(y),y})()}}const C=new Map;function v(h){yt(h instanceof Function,"Expected a class definition");let l=C.get(h);return l?(yt(l instanceof h,"Instance stored in cache mismatched with class"),l):(l=new h,C.set(h,l),l)}const $=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(u,f){var m=this;return(0,D.Z)(function*(){m.storage[u]=f})()}_get(u){var f=this;return(0,D.Z)(function*(){const m=f.storage[u];return void 0===m?null:m})()}_remove(u){var f=this;return(0,D.Z)(function*(){delete f.storage[u]})()}_addListener(u,f){}_removeListener(u,f){}}return h.type="NONE",h})();function le(h,l,u){return`firebase:${h}:${l}:${u}`}class he{constructor(l,u,f){this.persistence=l,this.auth=u,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=le(this.userKey,m.apiKey,y),this.fullPersistenceKey=le("persistence",m.apiKey,y),this.boundEventHandler=u._onStorageEvent.bind(u),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,D.Z)(function*(){const u=yield l.persistence._get(l.fullUserKey);return u?E._fromJSON(l.auth,u):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var u=this;return(0,D.Z)(function*(){if(u.persistence===l)return;const f=yield u.getCurrentUser();return yield u.removeCurrentUser(),u.persistence=l,f?u.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,u,f="authUser"){return(0,D.Z)(function*(){if(!u.length)return new he(v($),l,f);const m=(yield Promise.all(u.map(function(){var ce=(0,D.Z)(function*(ve){if(yield ve._isAvailable())return ve});return function(ve){return ce.apply(this,arguments)}}()))).filter(ce=>ce);let y=m[0]||v($);const R=le(f,l.config.apiKey,l.name);let k=null;for(const ce of u)try{const ve=yield ce._get(R);if(ve){const Ze=E._fromJSON(l,ve);ce!==y&&(k=Ze),y=ce;break}}catch{}const Q=m.filter(ce=>ce._shouldAllowMigration);return y._shouldAllowMigration&&Q.length?(y=Q[0],k&&(yield y._set(R,k.toJSON())),yield Promise.all(u.map(function(){var ce=(0,D.Z)(function*(ve){if(ve!==y)try{yield ve._remove(R)}catch{}});return function(ve){return ce.apply(this,arguments)}}())),new he(y,l,f)):new he(y,l,f)})()}}function Se(h){const l=h.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(me(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(st(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Ki(l))return"Blackberry";if(x(l))return"Webos";if(oe(l))return"Safari";if((l.includes("chrome/")||ut(l))&&!l.includes("edge/"))return"Chrome";if(Jt(l))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function st(h=(0,j.z$)()){return/firefox\//i.test(h)}function oe(h=(0,j.z$)()){const l=h.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function ut(h=(0,j.z$)()){return/crios\//i.test(h)}function me(h=(0,j.z$)()){return/iemobile/i.test(h)}function Jt(h=(0,j.z$)()){return/android/i.test(h)}function Ki(h=(0,j.z$)()){return/blackberry/i.test(h)}function x(h=(0,j.z$)()){return/webos/i.test(h)}function M(h=(0,j.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function ee(h=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}function Fe(h=(0,j.z$)()){return M(h)||Jt(h)||x(h)||Ki(h)||/windows phone/i.test(h)||me(h)}function zt(h,l=[]){let u;switch(h){case"Browser":u=Se((0,j.z$)());break;case"Worker":u=`${Se((0,j.z$)())}-${h}`;break;default:u=h}const f=l.length?l.join(","):"FirebaseCore-web";return`${u}/JsCore/${N.SDK_VERSION}/${f}`}class ue{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,u){const f=y=>new Promise((R,k)=>{try{R(l(y))}catch(Q){k(Q)}});f.onAbort=u,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(l){var u=this;return(0,D.Z)(function*(){if(u.auth.currentUser===l)return;const f=[];try{for(const m of u.queue)yield m(l),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw u.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Yi(){return(Yi=(0,D.Z)(function*(h,l={}){return q(h,"GET","/v2/passwordPolicy",L(h,l))})).apply(this,arguments)}class Gp{constructor(l){var u,f,m,y;const R=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(u=R.minPasswordLength)&&void 0!==u?u:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=l.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=l.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=l.schemaVersion}validatePassword(l){var u,f,m,y,R,k;const Q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Q),this.validatePasswordCharacterOptions(l,Q),Q.isValid&&(Q.isValid=null===(u=Q.meetsMinPasswordLength)||void 0===u||u),Q.isValid&&(Q.isValid=null===(f=Q.meetsMaxPasswordLength)||void 0===f||f),Q.isValid&&(Q.isValid=null===(m=Q.containsLowercaseLetter)||void 0===m||m),Q.isValid&&(Q.isValid=null===(y=Q.containsUppercaseLetter)||void 0===y||y),Q.isValid&&(Q.isValid=null===(R=Q.containsNumericCharacter)||void 0===R||R),Q.isValid&&(Q.isValid=null===(k=Q.containsNonAlphanumericCharacter)||void 0===k||k),Q}validatePasswordLengthOptions(l,u){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(u.meetsMinPasswordLength=l.length>=f),m&&(u.meetsMaxPasswordLength=l.length<=m)}validatePasswordCharacterOptions(l,u){let f;this.updatePasswordCharacterOptionsStatuses(u,!1,!1,!1,!1);for(let m=0;m<l.length;m++)f=l.charAt(m),this.updatePasswordCharacterOptionsStatuses(u,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(l,u,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=u)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=y))}}class Ql{constructor(l,u,f,m){this.app=l,this.heartbeatServiceProvider=u,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zp(this),this.idTokenSubscription=new Zp(this),this.beforeStateQueue=new ue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(l,u){var f=this;return u&&(this._popupRedirectResolver=v(u)),this._initializationPromise=this.queue((0,D.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield he.create(f,l),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(u),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,D.Z)(function*(){if(l._deleted)return;const u=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||u){if(l.currentUser&&u&&l.currentUser.uid===u.uid)return l._currentUser._assign(u),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(u,!0)}})()}initializeCurrentUser(l){var u=this;return(0,D.Z)(function*(){var f;const m=yield u.assertedPersistence.getCurrentUser();let y=m,R=!1;if(l&&u.config.authDomain){yield u.getOrInitRedirectPersistenceManager();const k=null===(f=u.redirectUser)||void 0===f?void 0:f._redirectEventId,Q=y?._redirectEventId,ce=yield u.tryRedirectSignIn(l);(!k||k===Q)&&ce?.user&&(y=ce.user,R=!0)}if(!y)return u.directlySetCurrentUser(null);if(!y._redirectEventId){if(R)try{yield u.beforeStateQueue.runMiddleware(y)}catch(k){y=m,u._popupRedirectResolver._overrideRedirectResult(u,()=>Promise.reject(k))}return y?u.reloadAndSetCurrentUserOrClear(y):u.directlySetCurrentUser(null)}return J(u._popupRedirectResolver,u,"argument-error"),yield u.getOrInitRedirectPersistenceManager(),u.redirectUser&&u.redirectUser._redirectEventId===y._redirectEventId?u.directlySetCurrentUser(y):u.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(l){var u=this;return(0,D.Z)(function*(){let f=null;try{f=yield u._popupRedirectResolver._completeRedirectFn(u,l,!0)}catch{yield u._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(l){var u=this;return(0,D.Z)(function*(){try{yield Qt(l)}catch(f){if("auth/network-request-failed"!==f?.code)return u.directlySetCurrentUser(null)}return u.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Oe(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var l=this;return(0,D.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var u=this;return(0,D.Z)(function*(){const f=l?(0,j.m9)(l):null;return f&&J(f.auth.config.apiKey===u.config.apiKey,u,"invalid-user-token"),u._updateCurrentUser(f&&f._clone(u))})()}_updateCurrentUser(l,u=!1){var f=this;return(0,D.Z)(function*(){if(!f._deleted)return l&&J(f.tenantId===l.tenantId,f,"tenant-id-mismatch"),u||(yield f.beforeStateQueue.runMiddleware(l)),f.queue((0,D.Z)(function*(){yield f.directlySetCurrentUser(l),f.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,D.Z)(function*(){return yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0)})()}setPersistence(l){var u=this;return this.queue((0,D.Z)(function*(){yield u.assertedPersistence.setPersistence(v(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var u=this;return(0,D.Z)(function*(){u._getPasswordPolicyInternal()||(yield u._updatePasswordPolicy());const f=u._getPasswordPolicyInternal();return f.schemaVersion!==u.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(u._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,D.Z)(function*(){const u=yield function He(h){return Yi.apply(this,arguments)}(l),f=new Gp(u);null===l.tenantId?l._projectPasswordPolicy=f:l._tenantPasswordPolicies[l.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new j.LL("auth","Firebase",l())}onAuthStateChanged(l,u,f){return this.registerStateListener(this.authStateSubscription,l,u,f)}beforeAuthStateChanged(l,u){return this.beforeStateQueue.pushCallback(l,u)}onIdTokenChanged(l,u,f){return this.registerStateListener(this.idTokenSubscription,l,u,f)}authStateReady(){return new Promise((l,u)=>{if(this.currentUser)l();else{const f=this.onAuthStateChanged(()=>{f(),l()},u)}})}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,u){var f=this;return(0,D.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(u);return null===l?m.removeCurrentUser():m.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var u=this;return(0,D.Z)(function*(){if(!u.redirectPersistenceManager){const f=l&&v(l)||u._popupRedirectResolver;J(f,u,"argument-error"),u.redirectPersistenceManager=yield he.create(u,[v(f._redirectPersistence)],"redirectUser"),u.redirectUser=yield u.redirectPersistenceManager.getCurrentUser()}return u.redirectPersistenceManager})()}_redirectUserForId(l){var u=this;return(0,D.Z)(function*(){var f,m;return u._isInitialized&&(yield u.queue((0,D.Z)(function*(){}))),(null===(f=u._currentUser)||void 0===f?void 0:f._redirectEventId)===l?u._currentUser:(null===(m=u.redirectUser)||void 0===m?void 0:m._redirectEventId)===l?u.redirectUser:null})()}_persistUserIfCurrent(l){var u=this;return(0,D.Z)(function*(){if(l===u.currentUser)return u.queue((0,D.Z)(function*(){return u.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,u;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(u=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==u?u:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,u,f,m){if(this._deleted)return()=>{};const y="function"==typeof u?u:u.next.bind(u);let R=!1;const k=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(k,this,"internal-error"),k.then(()=>{R||y(this.currentUser)}),"function"==typeof u){const Q=l.addObserver(u,f,m);return()=>{R=!0,Q()}}{const Q=l.addObserver(u);return()=>{R=!0,Q()}}}directlySetCurrentUser(l){var u=this;return(0,D.Z)(function*(){u.currentUser&&u.currentUser!==l&&u._currentUser._stopProactiveRefresh(),l&&u.isProactiveRefreshEnabled&&l._startProactiveRefresh(),u.currentUser=l,l?yield u.assertedPersistence.setCurrentUser(l):yield u.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,D.Z)(function*(){var u;const f={"X-Client-Version":l.clientVersion};l.app.options.appId&&(f["X-Firebase-gmpid"]=l.app.options.appId);const m=yield null===(u=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===u?void 0:u.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield l._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var l=this;return(0,D.Z)(function*(){var u;const f=yield null===(u=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===u?void 0:u.getToken();return f?.error&&function on(h,...l){be.logLevel<=pe.in.WARN&&be.warn(`Auth (${N.SDK_VERSION}): ${h}`,...l)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function et(h){return(0,j.m9)(h)}class Zp{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,j.ne)(u=>this.observer=u)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dd(h){return new Promise((l,u)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=l,f.onerror=m=>{const y=at("internal-error");y.customData=m,u(y)},f.type="text/javascript",f.charset="UTF-8",function qp(){var h,l;return null!==(l=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==l?l:document}().appendChild(f)})}function Si(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Kp{constructor(l){this.type="recaptcha-enterprise",this.auth=et(l)}verify(l="verify",u=!1){var f=this;return(0,D.Z)(function*(){function y(){return y=(0,D.Z)(function*(k){if(!u){if(null==k.tenantId&&null!=k._agentRecaptchaConfig)return k._agentRecaptchaConfig.siteKey;if(null!=k.tenantId&&void 0!==k._tenantRecaptchaConfigs[k.tenantId])return k._tenantRecaptchaConfigs[k.tenantId].siteKey}return new Promise(function(){var Q=(0,D.Z)(function*(ce,ve){kr(k,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ze=>{if(void 0!==Ze.recaptchaKey){const fn=new an(Ze);return null==k.tenantId?k._agentRecaptchaConfig=fn:k._tenantRecaptchaConfigs[k.tenantId]=fn,ce(fn.siteKey)}ve(new Error("recaptcha Enterprise site key undefined"))}).catch(Ze=>{ve(Ze)})});return function(ce,ve){return Q.apply(this,arguments)}}())}),y.apply(this,arguments)}function R(k,Q,ce){const ve=window.grecaptcha;Yt(ve)?ve.enterprise.ready(()=>{ve.enterprise.execute(k,{action:l}).then(Ze=>{Q(Ze)}).catch(()=>{Q("NO_RECAPTCHA")})}):ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((k,Q)=>{(function m(k){return y.apply(this,arguments)})(f.auth).then(ce=>{if(!u&&Yt(window.grecaptcha))R(ce,k,Q);else{if(typeof window>"u")return void Q(new Error("RecaptchaVerifier is only supported in browser"));Dd("https://www.google.com/recaptcha/enterprise.js?render="+ce).then(()=>{R(ce,k,Q)}).catch(ve=>{Q(ve)})}}).catch(ce=>{Q(ce)})})})()}}function wd(h,l,u){return bd.apply(this,arguments)}function bd(){return(bd=(0,D.Z)(function*(h,l,u,f=!1){const m=new Kp(h);let y;try{y=yield m.verify(u)}catch{y=yield m.verify(u,!0)}const R=Object.assign({},l);return Object.assign(R,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function la(h,l,u,f){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,D.Z)(function*(h,l,u,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield wd(h,l,u,"getOobCode"===u);return f(h,y)}return f(h,l).catch(function(){var y=(0,D.Z)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${u} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const k=yield wd(h,l,u,"getOobCode"===u);return f(h,k)}return Promise.reject(R)});return function(R){return y.apply(this,arguments)}}())}),Sd.apply(this,arguments)}function Yp(h,l,u){const f=et(h);J(f._canInitEmulator,f,"emulator-config-failed"),J(/^https?:\/\//.test(l),f,"invalid-emulator-scheme");const m=!!u?.disableWarnings,y=Le(l),{host:R,port:k}=function ME(h){const l=Le(h),u=/(\/\/)?([^?#/]+)/.exec(h.substr(l.length));if(!u)return{host:"",port:null};const f=u[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:ar(f.substr(y.length+1))}}{const[y,R]=f.split(":");return{host:y,port:ar(R)}}}(l);f.config.emulator={url:`${y}//${R}${null===k?"":`:${k}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:R,port:k,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function ca(){function h(){const l=document.createElement("p"),u=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",u.position="fixed",u.width="100%",u.backgroundColor="#ffffff",u.border=".1em solid #000000",u.color="#b50000",u.bottom="0px",u.left="0px",u.margin="0px",u.zIndex="10000",u.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}function Le(h){const l=h.indexOf(":");return l<0?"":h.substr(0,l+1)}function ar(h){if(!h)return null;const l=Number(h);return isNaN(l)?null:l}class ao{constructor(l,u){this.providerId=l,this.signInMethod=u}toJSON(){return Ke("not implemented")}_getIdTokenResponse(l){return Ke("not implemented")}_linkToIdToken(l,u){return Ke("not implemented")}_getReauthenticationResolver(l){return Ke("not implemented")}}function Jl(h,l){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:resetPassword",L(h,l))})).apply(this,arguments)}function lo(h,l){return vs.apply(this,arguments)}function vs(){return(vs=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ua(){return(ua=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:update",L(h,l))})).apply(this,arguments)}function Qp(h,l){return je.apply(this,arguments)}function je(){return(je=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithPassword",L(h,l))})).apply(this,arguments)}function ys(h,l){return da.apply(this,arguments)}function da(){return(da=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:sendOobCode",L(h,l))})).apply(this,arguments)}function ha(){return(ha=(0,D.Z)(function*(h,l){return ys(h,l)})).apply(this,arguments)}function RE(h,l){return dt.apply(this,arguments)}function dt(){return(dt=(0,D.Z)(function*(h,l){return ys(h,l)})).apply(this,arguments)}function NE(h,l){return Td.apply(this,arguments)}function Td(){return(Td=(0,D.Z)(function*(h,l){return ys(h,l)})).apply(this,arguments)}function co(){return(co=(0,D.Z)(function*(h,l){return ys(h,l)})).apply(this,arguments)}function uo(){return(uo=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithEmailLink",L(h,l))})).apply(this,arguments)}function ho(){return(ho=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithEmailLink",L(h,l))})).apply(this,arguments)}class fa extends ao{constructor(l,u,f,m=null){super("password",f),this._email=l,this._password=u,this._tenantId=m}static _fromEmailAndPassword(l,u){return new fa(l,u,"password")}static _fromEmailAndCode(l,u,f=null){return new fa(l,u,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const u="string"==typeof l?JSON.parse(l):l;if(u?.email&&u?.password){if("password"===u.signInMethod)return this._fromEmailAndPassword(u.email,u.password);if("emailLink"===u.signInMethod)return this._fromEmailAndCode(u.email,u.password,u.tenantId)}return null}_getIdTokenResponse(l){var u=this;return(0,D.Z)(function*(){switch(u.signInMethod){case"password":return la(l,{returnSecureToken:!0,email:u._email,password:u._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qp);case"emailLink":return function Ad(h,l){return uo.apply(this,arguments)}(l,{email:u._email,oobCode:u._password});default:Ue(l,"internal-error")}})()}_linkToIdToken(l,u){var f=this;return(0,D.Z)(function*(){switch(f.signInMethod){case"password":return lo(l,{idToken:u,returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Jp(h,l){return ho.apply(this,arguments)}(l,{idToken:u,email:f._email,oobCode:f._password});default:Ue(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Ti(h,l){return Md.apply(this,arguments)}function Md(){return(Md=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithIdp",L(h,l))})).apply(this,arguments)}class ui extends ao{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const u=new ui(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(u.idToken=l.idToken),l.accessToken&&(u.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(u.nonce=l.nonce),l.pendingToken&&(u.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(u.accessToken=l.oauthToken,u.secret=l.oauthTokenSecret):Ue("argument-error"),u}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const u="string"==typeof l?JSON.parse(l):l,{providerId:f,signInMethod:m}=u,y=(0,Be._T)(u,["providerId","signInMethod"]);if(!f||!m)return null;const R=new ui(f,m);return R.idToken=y.idToken||void 0,R.accessToken=y.accessToken||void 0,R.secret=y.secret,R.nonce=y.nonce,R.pendingToken=y.pendingToken||null,R}_getIdTokenResponse(l){return Ti(l,this.buildRequest())}_linkToIdToken(l,u){const f=this.buildRequest();return f.idToken=u,Ti(l,f)}_getReauthenticationResolver(l){const u=this.buildRequest();return u.autoCreate=!1,Ti(l,u)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const u={};this.idToken&&(u.id_token=this.idToken),this.accessToken&&(u.access_token=this.accessToken),this.secret&&(u.oauth_token_secret=this.secret),u.providerId=this.providerId,this.nonce&&!this.pendingToken&&(u.nonce=this.nonce),l.postBody=(0,j.xO)(u)}return l}}function po(){return(po=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:sendVerificationCode",L(h,l))})).apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithPhoneNumber",L(h,l))})).apply(this,arguments)}function rc(){return(rc=(0,D.Z)(function*(h,l){const u=yield Me(h,"POST","/v1/accounts:signInWithPhoneNumber",L(h,l));if(u.temporaryProof)throw bt(h,"account-exists-with-different-credential",u);return u})).apply(this,arguments)}const Rd={USER_NOT_FOUND:"user-not-found"};function ic(){return(ic=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithPhoneNumber",L(h,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Rd)})).apply(this,arguments)}class Pn extends ao{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,u){return new Pn({verificationId:l,verificationCode:u})}static _fromTokenResponse(l,u){return new Pn({phoneNumber:l,temporaryProof:u})}_getIdTokenResponse(l){return function pa(h,l){return nc.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,u){return function Xp(h,l){return rc.apply(this,arguments)}(l,Object.assign({idToken:u},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Es(h,l){return ic.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:u,verificationId:f,verificationCode:m}=this.params;return l&&u?{temporaryProof:l,phoneNumber:u}:{sessionInfo:f,code:m}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:u,verificationCode:f,phoneNumber:m,temporaryProof:y}=l;return f||u||m||y?new Pn({verificationId:u,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class Cs{constructor(l){var u,f,m,y,R,k;const Q=(0,j.zd)((0,j.pd)(l)),ce=null!==(u=Q.apiKey)&&void 0!==u?u:null,ve=null!==(f=Q.oobCode)&&void 0!==f?f:null,Ze=function eg(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=Q.mode)&&void 0!==m?m:null);J(ce&&ve&&Ze,"argument-error"),this.apiKey=ce,this.operation=Ze,this.code=ve,this.continueUrl=null!==(y=Q.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(R=Q.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(k=Q.tenantId)&&void 0!==k?k:null}static parseLink(l){const u=function re(h){const l=(0,j.zd)((0,j.pd)(h)).link,u=l?(0,j.zd)((0,j.pd)(l)).deep_link_id:null,f=(0,j.zd)((0,j.pd)(h)).deep_link_id;return(f?(0,j.zd)((0,j.pd)(f)).link:null)||f||u||l||h}(l);try{return new Cs(u)}catch{return null}}}let Is=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(u,f){return fa._fromEmailAndPassword(u,f)}static credentialWithLink(u,f){const m=Cs.parseLink(f);return J(m,"argument-error"),fa._fromEmailAndCode(u,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Ir{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Hr extends Ir{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class go extends Hr{static credentialFromJSON(l){const u="string"==typeof l?JSON.parse(l):l;return J("providerId"in u&&"signInMethod"in u,"argument-error"),ui._fromParams(u)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return J(l.idToken||l.accessToken,"argument-error"),ui._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return go.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return go.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:u,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:R,providerId:k}=l;if(!f&&!m&&!u&&!y||!k)return null;try{return new go(k)._credential({idToken:u,accessToken:f,nonce:R,pendingToken:y})}catch{return null}}}let tg=(()=>{class h extends Hr{constructor(){super("facebook.com")}static credential(u){return ui._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:u})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u||!("oauthAccessToken"in u)||!u.oauthAccessToken)return null;try{return h.credential(u.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ng=(()=>{class h extends Hr{constructor(){super("google.com"),this.addScope("profile")}static credential(u,f){return ui._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:u,accessToken:f})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:f,oauthAccessToken:m}=u;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),di=(()=>{class h extends Hr{constructor(){super("github.com")}static credential(u){return ui._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:u})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u||!("oauthAccessToken"in u)||!u.oauthAccessToken)return null;try{return h.credential(u.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class _n extends ao{constructor(l,u){super(l,l),this.pendingToken=u}_getIdTokenResponse(l){return Ti(l,this.buildRequest())}_linkToIdToken(l,u){const f=this.buildRequest();return f.idToken=u,Ti(l,f)}_getReauthenticationResolver(l){const u=this.buildRequest();return u.autoCreate=!1,Ti(l,u)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const u="string"==typeof l?JSON.parse(l):l,{providerId:f,signInMethod:m,pendingToken:y}=u;return f&&m&&y&&f===m?new _n(f,y):null}static _create(l,u){return new _n(l,u)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Je extends Ir{constructor(l){J(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Je.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Je.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const u=_n.fromJSON(l);return J(u,"argument-error"),u}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:u,providerId:f}=l;if(!u||!f)return null;try{return _n._create(f,u)}catch{return null}}}let ma=(()=>{class h extends Hr{constructor(){super("twitter.com")}static credential(u,f){return ui._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:u,oauthTokenSecret:f})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=u;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function _a(h,l){return mo.apply(this,arguments)}function mo(){return(mo=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signUp",L(h,l))})).apply(this,arguments)}class Zn{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,u,f,m=!1){return(0,D.Z)(function*(){const y=yield E._fromIdTokenResponse(l,f,m),R=$r(f);return new Zn({user:y,providerId:R,_tokenResponse:f,operationType:u})})()}static _forOperation(l,u,f){return(0,D.Z)(function*(){yield l._updateTokensIfNecessary(f,!0);const m=$r(f);return new Zn({user:l,providerId:m,_tokenResponse:f,operationType:u})})()}}function $r(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function _o(h){return va.apply(this,arguments)}function va(){return(va=(0,D.Z)(function*(h){var l;const u=et(h);if(yield u._initializationPromise,null!==(l=u.currentUser)&&void 0!==l&&l.isAnonymous)return new Zn({user:u.currentUser,providerId:null,operationType:"signIn"});const f=yield _a(u,{returnSecureToken:!0}),m=yield Zn._fromIdTokenResponse(u,"signIn",f,!0);return yield u._updateCurrentUser(m.user),m})).apply(this,arguments)}class vo extends j.ZR{constructor(l,u,f,m){var y;super(u.code,u.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:l.name,tenantId:null!==(y=l.tenantId)&&void 0!==y?y:void 0,_serverResponse:u.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(l,u,f,m){return new vo(l,u,f,m)}}function ya(h,l,u,f){return("reauthenticate"===l?u._getReauthenticationResolver(h):u._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?vo._fromErrorAndOperation(h,y,l,f):y})}function sc(h){return new Set(h.map(({providerId:l})=>l).filter(l=>!!l))}function Nd(h,l){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,D.Z)(function*(h,l){const u=(0,j.m9)(h);yield Ia(!0,u,l);const{providerUserInfo:f}=yield function vr(h,l){return yr.apply(this,arguments)}(u.auth,{idToken:yield u.getIdToken(),deleteProvider:[l]}),m=sc(f||[]);return u.providerData=u.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(u.phoneNumber=null),yield u.auth._persistUserIfCurrent(u),u}),Qi.apply(this,arguments)}function Ea(h,l){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,D.Z)(function*(h,l,u=!1){const f=yield St(h,l._linkToIdToken(h.auth,yield h.getIdToken()),u);return Zn._forOperation(h,"link",f)})).apply(this,arguments)}function Ia(h,l,u){return Da.apply(this,arguments)}function Da(){return(Da=(0,D.Z)(function*(h,l,u){yield Qt(l);const m=!1===h?"provider-already-linked":"no-such-provider";J(sc(l.providerData).has(u)===h,l.auth,m)})).apply(this,arguments)}function Pd(h,l){return oc.apply(this,arguments)}function oc(){return(oc=(0,D.Z)(function*(h,l,u=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield St(h,ya(f,m,l,h),u);J(y.idToken,f,"internal-error");const R=Dn(y.idToken);J(R,f,"internal-error");const{sub:k}=R;return J(h.uid===k,f,"user-mismatch"),Zn._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&Ue(f,"user-mismatch"),y}})).apply(this,arguments)}function lr(h,l){return ac.apply(this,arguments)}function ac(){return(ac=(0,D.Z)(function*(h,l,u=!1){const f="signIn",m=yield ya(h,f,l),y=yield Zn._fromIdTokenResponse(h,f,m);return u||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function yo(h,l){return lc.apply(this,arguments)}function lc(){return(lc=(0,D.Z)(function*(h,l){return lr(et(h),l)})).apply(this,arguments)}function Od(h,l){return cc.apply(this,arguments)}function cc(){return(cc=(0,D.Z)(function*(h,l){const u=(0,j.m9)(h);return yield Ia(!1,u,l.providerId),Ea(u,l)})).apply(this,arguments)}function xd(h,l){return wa.apply(this,arguments)}function wa(){return(wa=(0,D.Z)(function*(h,l){return Pd((0,j.m9)(h),l)})).apply(this,arguments)}function uc(){return(uc=(0,D.Z)(function*(h,l){return Me(h,"POST","/v1/accounts:signInWithCustomToken",L(h,l))})).apply(this,arguments)}function ig(h,l){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,D.Z)(function*(h,l){const u=et(h),f=yield function rg(h,l){return uc.apply(this,arguments)}(u,{token:l,returnSecureToken:!0}),m=yield Zn._fromIdTokenResponse(u,"signIn",f);return yield u._updateCurrentUser(m.user),m}),Eo.apply(this,arguments)}class Co{constructor(l,u){this.factorId=l,this.uid=u.mfaEnrollmentId,this.enrollmentTime=new Date(u.enrolledAt).toUTCString(),this.displayName=u.displayName}static _fromServerResponse(l,u){return"phoneInfo"in u?dc._fromServerResponse(l,u):"totpInfo"in u?hc._fromServerResponse(l,u):Ue(l,"internal-error")}}class dc extends Co{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,u){return new dc(u)}}class hc extends Co{constructor(l){super("totp",l)}static _fromServerResponse(l,u){return new hc(u)}}function qn(h,l,u){var f;J((null===(f=u.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),J(typeof u.dynamicLinkDomain>"u"||u.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),l.continueUrl=u.url,l.dynamicLinkDomain=u.dynamicLinkDomain,l.canHandleCodeInApp=u.handleCodeInApp,u.iOS&&(J(u.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),l.iOSBundleId=u.iOS.bundleId),u.android&&(J(u.android.packageName.length>0,h,"missing-android-pkg-name"),l.androidInstallApp=u.android.installApp,l.androidMinimumVersionCode=u.android.minimumVersion,l.androidPackageName=u.android.packageName)}function fc(h){return ba.apply(this,arguments)}function ba(){return(ba=(0,D.Z)(function*(h){const l=et(h);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Ce(h,l,u){return vn.apply(this,arguments)}function vn(){return(vn=(0,D.Z)(function*(h,l,u){const f=et(h),m={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};u&&qn(f,m,u),yield la(f,m,"getOobCode",RE)})).apply(this,arguments)}function tt(h,l,u){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,D.Z)(function*(h,l,u){yield Jl((0,j.m9)(h),{oobCode:l,newPassword:u}).catch(function(){var f=(0,D.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&fc(h),m});return function(m){return f.apply(this,arguments)}}())}),Xt.apply(this,arguments)}function wn(h,l){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,D.Z)(function*(h,l){yield function ec(h,l){return ua.apply(this,arguments)}((0,j.m9)(h),{oobCode:l})}),Ji.apply(this,arguments)}function On(h,l){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,D.Z)(function*(h,l){const u=(0,j.m9)(h),f=yield Jl(u,{oobCode:l}),m=f.requestType;switch(J(m,u,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(f.newEmail,u,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(f.mfaInfo,u,"internal-error");default:J(f.email,u,"internal-error")}let y=null;return f.mfaInfo&&(y=Co._fromServerResponse(et(u),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function kd(h,l){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,D.Z)(function*(h,l){const{data:u}=yield On((0,j.m9)(h),l);return u.email})).apply(this,arguments)}function sg(h,l,u){return pc.apply(this,arguments)}function pc(){return(pc=(0,D.Z)(function*(h,l,u){const f=et(h),R=yield la(f,{returnSecureToken:!0,email:l,password:u,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_a).catch(Q=>{throw"auth/password-does-not-meet-requirements"===Q.code&&fc(h),Q}),k=yield Zn._fromIdTokenResponse(f,"signIn",R);return yield f._updateCurrentUser(k.user),k})).apply(this,arguments)}function Lt(h,l,u){return yo((0,j.m9)(h),Is.credential(l,u)).catch(function(){var f=(0,D.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&fc(h),m});return function(m){return f.apply(this,arguments)}}())}function ae(h,l,u){return Te.apply(this,arguments)}function Te(){return(Te=(0,D.Z)(function*(h,l,u){const f=et(h),m={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function y(R,k){J(k.handleCodeInApp,f,"argument-error"),k&&qn(f,R,k)})(m,u),yield la(f,m,"getOobCode",NE)})).apply(this,arguments)}function Tt(h,l){const u=Cs.parseLink(l);return"EMAIL_SIGNIN"===u?.operation}function Dr(h,l,u){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h),m=Is.credentialWithLink(l,u||Ft());return J(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),yo(f,m)})).apply(this,arguments)}function Ai(){return(Ai=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:createAuthUri",L(h,l))})).apply(this,arguments)}function Ut(h,l){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,D.Z)(function*(h,l){const f={identifier:l,continueUri:Kt()?Ft():"http://localhost"},{signinMethods:m}=yield function yn(h,l){return Ai.apply(this,arguments)}((0,j.m9)(h),f);return m||[]}),Wr.apply(this,arguments)}function ws(h,l){return De.apply(this,arguments)}function De(){return De=(0,D.Z)(function*(h,l){const u=(0,j.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};l&&qn(u.auth,m,l);const{email:y}=yield function Nn(h,l){return ha.apply(this,arguments)}(u.auth,m);y!==h.email&&(yield h.reload())}),De.apply(this,arguments)}function Io(h,l,u){return Ta.apply(this,arguments)}function Ta(){return Ta=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:l};u&&qn(f.auth,y,u);const{email:R}=yield function tc(h,l){return co.apply(this,arguments)}(f.auth,y);R!==h.email&&(yield h.reload())}),Ta.apply(this,arguments)}function xt(){return(xt=(0,D.Z)(function*(h,l){return q(h,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Do(h,l){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,D.Z)(function*(h,{displayName:l,photoURL:u}){if(void 0===l&&void 0===u)return;const f=(0,j.m9)(h),y={idToken:yield f.getIdToken(),displayName:l,photoUrl:u,returnSecureToken:!0},R=yield St(f,function bs(h,l){return xt.apply(this,arguments)}(f.auth,y));f.displayName=R.displayName||null,f.photoURL=R.photoUrl||null;const k=f.providerData.find(({providerId:Q})=>"password"===Q);k&&(k.displayName=f.displayName,k.photoURL=f.photoURL),yield f._updateTokensIfNecessary(R)}),Mi.apply(this,arguments)}function zr(h,l){return gc((0,j.m9)(h),l,null)}function wo(h,l){return gc((0,j.m9)(h),null,l)}function gc(h,l,u){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,D.Z)(function*(h,l,u){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};l&&(y.email=l),u&&(y.password=u);const R=yield St(h,lo(f,y));yield h._updateTokensIfNecessary(R,!0)})).apply(this,arguments)}class Zr{constructor(l,u,f={}){this.isNewUser=l,this.providerId=u,this.profile=f}}class Ss extends Zr{constructor(l,u,f,m){super(l,u,f),this.username=m}}class $e extends Zr{constructor(l,u){super(l,"facebook.com",u)}}class OE extends Ss{constructor(l,u){super(l,"github.com",u,"string"==typeof u?.login?u?.login:null)}}class mc extends Zr{constructor(l,u){super(l,"google.com",u)}}class Fd extends Ss{constructor(l,u,f){super(l,"twitter.com",u,f)}}function qr(h){const{user:l,_tokenResponse:u}=h;return l.isAnonymous&&!u?{providerId:null,isNewUser:!1,profile:null}:function hi(h){var l,u;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const R=null===(u=null===(l=Dn(h.idToken))||void 0===l?void 0:l.firebase)||void 0===u?void 0:u.sign_in_provider;if(R)return new Zr(y,"anonymous"!==R&&"custom"!==R?R:null)}if(!f)return null;switch(f){case"facebook.com":return new $e(y,m);case"github.com":return new OE(y,m);case"google.com":return new mc(y,m);case"twitter.com":return new Fd(y,m,h.screenName||null);case"custom":case"anonymous":return new Zr(y,null);default:return new Zr(y,f,m)}}(u)}class es{constructor(l,u,f){this.type=l,this.credential=u,this.user=f}static _fromIdtoken(l,u){return new es("enroll",l,u)}static _fromMfaPendingCredential(l){return new es("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var u,f;if(l?.multiFactorSession){if(null!==(u=l.multiFactorSession)&&void 0!==u&&u.pendingCredential)return es._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(f=l.multiFactorSession)&&void 0!==f&&f.idToken)return es._fromIdtoken(l.multiFactorSession.idToken)}return null}}class yc{constructor(l,u,f){this.session=l,this.hints=u,this.signInResolver=f}static _fromError(l,u){const f=et(l),m=u.customData._serverResponse,y=(m.mfaInfo||[]).map(k=>Co._fromServerResponse(f,k));J(m.mfaPendingCredential,f,"internal-error");const R=es._fromMfaPendingCredential(m.mfaPendingCredential);return new yc(R,y,function(){var k=(0,D.Z)(function*(Q){const ce=yield Q._process(f,R);delete m.mfaInfo,delete m.mfaPendingCredential;const ve=Object.assign(Object.assign({},m),{idToken:ce.idToken,refreshToken:ce.refreshToken});switch(u.operationType){case"signIn":const Ze=yield Zn._fromIdTokenResponse(f,u.operationType,ve);return yield f._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return J(u.user,f,"internal-error"),Zn._forOperation(u.user,u.operationType,ve);default:Ue(f,"internal-error")}});return function(Q){return k.apply(this,arguments)}}())}resolveSignIn(l){var u=this;return(0,D.Z)(function*(){return u.signInResolver(l)})()}}function kE(h,l){var u;const f=(0,j.m9)(h),m=l;return J(l.customData.operationType,f,"argument-error"),J(null===(u=m.customData._serverResponse)||void 0===u?void 0:u.mfaPendingCredential,f,"argument-error"),yc._fromError(f,m)}class Vd{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(u=>{u.mfaInfo&&(this.enrolledFactors=u.mfaInfo.map(f=>Co._fromServerResponse(l.auth,f)))})}static _fromUser(l){return new Vd(l)}getSession(){var l=this;return(0,D.Z)(function*(){return es._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,u){var f=this;return(0,D.Z)(function*(){const m=l,y=yield f.getSession(),R=yield St(f.user,m._process(f.user.auth,y,u));return yield f.user._updateTokensIfNecessary(R),f.user.reload()})()}unenroll(l){var u=this;return(0,D.Z)(function*(){const f="string"==typeof l?l:l.uid,m=yield u.user.getIdToken();try{const y=yield St(u.user,function LE(h,l){return q(h,"POST","/v2/accounts/mfaEnrollment:withdraw",L(h,l))}(u.user.auth,{idToken:m,mfaEnrollmentId:f}));u.enrolledFactors=u.enrolledFactors.filter(({uid:R})=>R!==f),yield u.user._updateTokensIfNecessary(y),yield u.user.reload()}catch(y){throw y}})()}}const Bd=new WeakMap;function VE(h){const l=(0,j.m9)(h);return Bd.has(l)||Bd.set(l,Vd._fromUser(l)),Bd.get(l)}const Ec="__sak";class lg{constructor(l,u){this.storageRetriever=l,this.type=u}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,u){return this.storage.setItem(l,JSON.stringify(u)),Promise.resolve()}_get(l){const u=this.storage.getItem(l);return Promise.resolve(u?JSON.parse(u):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cc=(()=>{class h extends lg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(u,f)=>this.onStorageEvent(u,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function BE(){const h=(0,j.z$)();return oe(h)||M(h)}()&&function G(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fe(),this._shouldAllowMigration=!0}forAllChangedKeys(u){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&u(f,y,m)}}onStorageEvent(u,f=!1){if(!u.key)return void this.forAllChangedKeys((k,Q,ce)=>{this.notifyListeners(k,ce)});const m=u.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const k=this.storage.getItem(m);if(u.newValue!==k)null!==u.newValue?this.storage.setItem(m,u.newValue):this.storage.removeItem(m);else if(this.localCache[m]===u.newValue&&!f)return}const y=()=>{const k=this.storage.getItem(m);!f&&this.localCache[m]===k||this.notifyListeners(m,k)},R=this.storage.getItem(m);!function Re(){return(0,j.w1)()&&10===document.documentMode}()||R===u.newValue||u.newValue===u.oldValue?y():setTimeout(y,10)}notifyListeners(u,f){this.localCache[u]=f;const m=this.listeners[u];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((u,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:u,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(u,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[u]||(this.listeners[u]=new Set,this.localCache[u]=this.storage.getItem(u)),this.listeners[u].add(f)}_removeListener(u,f){this.listeners[u]&&(this.listeners[u].delete(f),0===this.listeners[u].size&&delete this.listeners[u]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(u,f){var m=()=>super._set,y=this;return(0,D.Z)(function*(){yield m().call(y,u,f),y.localCache[u]=JSON.stringify(f)})()}_get(u){var f=()=>super._get,m=this;return(0,D.Z)(function*(){const y=yield f().call(m,u);return m.localCache[u]=JSON.stringify(y),y})()}_remove(u){var f=()=>super._remove,m=this;return(0,D.Z)(function*(){yield f().call(m,u),delete m.localCache[u]})()}}return h.type="LOCAL",h})(),Ud=(()=>{class h extends lg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(u,f){}_removeListener(u,f){}}return h.type="SESSION",h})();let $E=(()=>{class h{constructor(u){this.eventTarget=u,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(u){const f=this.receivers.find(y=>y.isListeningto(u));if(f)return f;const m=new h(u);return this.receivers.push(m),m}isListeningto(u){return this.eventTarget===u}handleEvent(u){var f=this;return(0,D.Z)(function*(){const m=u,{eventId:y,eventType:R,data:k}=m.data,Q=f.handlersMap[R];if(!Q?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:R});const ce=Array.from(Q).map(function(){var Ze=(0,D.Z)(function*(fn){return fn(m.origin,k)});return function(fn){return Ze.apply(this,arguments)}}()),ve=yield function jE(h){return Promise.all(h.map(function(){var l=(0,D.Z)(function*(u){try{return{fulfilled:!0,value:yield u}}catch(f){return{fulfilled:!1,reason:f}}});return function(u){return l.apply(this,arguments)}}()))}(ce);m.ports[0].postMessage({status:"done",eventId:y,eventType:R,response:ve})})()}_subscribe(u,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[u]||(this.handlersMap[u]=new Set),this.handlersMap[u].add(f)}_unsubscribe(u,f){this.handlersMap[u]&&f&&this.handlersMap[u].delete(f),(!f||0===this.handlersMap[u].size)&&delete this.handlersMap[u],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function wr(h="",l=10){let u="";for(let f=0;f<l;f++)u+=Math.floor(10*Math.random());return h+u}class Ri{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,u,f=50){var m=this;return(0,D.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let R,k;return new Promise((Q,ce)=>{const ve=wr("",20);y.port1.start();const Ze=setTimeout(()=>{ce(new Error("unsupported_event"))},f);k={messageChannel:y,onMessage(fn){const Xr=fn;if(Xr.data.eventId===ve)switch(Xr.data.status){case"ack":clearTimeout(Ze),R=setTimeout(()=>{ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),Q(Xr.data.response);break;default:clearTimeout(Ze),clearTimeout(R),ce(new Error("invalid_response"))}}},m.handlers.add(k),y.port1.addEventListener("message",k.onMessage),m.target.postMessage({eventType:l,eventId:ve,data:u},[y.port2])}).finally(()=>{k&&m.removeMessageHandler(k)})})()}}function tn(){return window}function nn(){return typeof tn().WorkerGlobalScope<"u"&&"function"==typeof tn().importScripts}function Fn(){return(Fn=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ic="firebaseLocalStorageDb",As="firebaseLocalStorage",Dc="fbase_key";class ts{constructor(l){this.request=l}toPromise(){return new Promise((l,u)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{u(this.request.error)})})}}function Ms(h,l){return h.transaction([As],l?"readwrite":"readonly").objectStore(As)}function Ra(){const h=indexedDB.open(Ic,1);return new Promise((l,u)=>{h.addEventListener("error",()=>{u(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(As,{keyPath:Dc})}catch(m){u(m)}}),h.addEventListener("success",(0,D.Z)(function*(){const f=h.result;f.objectStoreNames.contains(As)?l(f):(f.close(),yield function Wd(){const h=indexedDB.deleteDatabase(Ic);return new ts(h).toPromise()}(),l(yield Ra()))}))})}function wc(h,l,u){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,D.Z)(function*(h,l,u){const f=Ms(h,!0).put({[Dc]:l,value:u});return new ts(f).toPromise()})).apply(this,arguments)}function Ni(){return(Ni=(0,D.Z)(function*(h,l){const u=Ms(h,!1).get(l),f=yield new ts(u).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function bc(h,l){const u=Ms(h,!0).delete(l);return new ts(u).toPromise()}const zd=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var u=this;return(0,D.Z)(function*(){return u.db||(u.db=yield Ra()),u.db})()}_withRetries(u){var f=this;return(0,D.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield u(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var u=this;return(0,D.Z)(function*(){return nn()?u.initializeReceiver():u.initializeSender()})()}initializeReceiver(){var u=this;return(0,D.Z)(function*(){u.receiver=$E._getInstance(function jd(){return nn()?self:null}()),u.receiver._subscribe("keyChanged",function(){var f=(0,D.Z)(function*(m,y){return{keyProcessed:(yield u._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),u.receiver._subscribe("ping",function(){var f=(0,D.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var u=this;return(0,D.Z)(function*(){var f,m;if(u.activeServiceWorker=yield function Ma(){return Fn.apply(this,arguments)}(),!u.activeServiceWorker)return;u.sender=new Ri(u.activeServiceWorker);const y=yield u.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(u.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(u){var f=this;return(0,D.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function Hd(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:u},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const u=yield Ra();return yield wc(u,Ec,"1"),yield bc(u,Ec),!0}catch{}return!1})()}_withPendingWrite(u){var f=this;return(0,D.Z)(function*(){f.pendingWrites++;try{yield u()}finally{f.pendingWrites--}})()}_set(u,f){var m=this;return(0,D.Z)(function*(){return m._withPendingWrite((0,D.Z)(function*(){return yield m._withRetries(y=>wc(y,u,f)),m.localCache[u]=f,m.notifyServiceWorker(u)}))})()}_get(u){var f=this;return(0,D.Z)(function*(){const m=yield f._withRetries(y=>function To(h,l){return Ni.apply(this,arguments)}(y,u));return f.localCache[u]=m,m})()}_remove(u){var f=this;return(0,D.Z)(function*(){return f._withPendingWrite((0,D.Z)(function*(){return yield f._withRetries(m=>bc(m,u)),delete f.localCache[u],f.notifyServiceWorker(u)}))})()}_poll(){var u=this;return(0,D.Z)(function*(){const f=yield u._withRetries(R=>{const k=Ms(R,!1).getAll();return new ts(k).toPromise()});if(!f)return[];if(0!==u.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:R,value:k}of f)y.add(R),JSON.stringify(u.localCache[R])!==JSON.stringify(k)&&(u.notifyListeners(R,k),m.push(R));for(const R of Object.keys(u.localCache))u.localCache[R]&&!y.has(R)&&(u.notifyListeners(R,null),m.push(R));return m})()}notifyListeners(u,f){this.localCache[u]=f;const m=this.listeners[u];if(m)for(const y of Array.from(m))y(f)}startPolling(){var u=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return u._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(u,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[u]||(this.listeners[u]=new Set,this._get(u)),this.listeners[u].add(f)}_removeListener(u,f){this.listeners[u]&&(this.listeners[u].delete(f),0===this.listeners[u].size&&delete this.listeners[u]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Ns=1e12;class qE{constructor(l){this.auth=l,this.counter=Ns,this._widgets=new Map}render(l,u){const f=this.counter;return this._widgets.set(f,new KE(l,this.auth.name,u||{})),this.counter++,f}reset(l){var u;const f=l||Ns;null===(u=this._widgets.get(f))||void 0===u||u.delete(),this._widgets.delete(f)}getResponse(l){var u;return(null===(u=this._widgets.get(l||Ns))||void 0===u?void 0:u.getResponse())||""}execute(l){var u=this;return(0,D.Z)(function*(){var f;return null===(f=u._widgets.get(l||Ns))||void 0===f||f.execute(),""})()}}class KE{constructor(l,u,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof l?document.getElementById(l):l;J(m,"argument-error",{appName:u}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hg(h){const l=[],u="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)l.push(u.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":u}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,u)try{u()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Na=Si("rcb"),Zd=new Mn(3e4,6e4);class pg{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=tn().grecaptcha)||void 0===l||!l.render)}load(l,u=""){return J(function gg(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(u),l,"argument-error"),this.shouldResolveImmediately(u)&&$t(tn().grecaptcha)?Promise.resolve(tn().grecaptcha):new Promise((f,m)=>{const y=tn().setTimeout(()=>{m(at(l,"network-request-failed"))},Zd.get());tn()[Na]=()=>{tn().clearTimeout(y),delete tn()[Na];const k=tn().grecaptcha;if(!k||!$t(k))return void m(at(l,"internal-error"));const Q=k.render;k.render=(ce,ve)=>{const Ze=Q(ce,ve);return this.counter++,Ze},this.hostLanguage=u,f(k)},Dd(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Na,render:"explicit",hl:u})}`).catch(()=>{clearTimeout(y),m(at(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var u;return!(null===(u=tn().grecaptcha)||void 0===u||!u.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qd{load(l){return(0,D.Z)(function*(){return new qE(l)})()}clearedOneInstance(){}}const Kd="recaptcha",Yd={theme:"light",type:"image"};class mg{constructor(l,u,f=Object.assign({},Yd)){this.parameters=f,this.type=Kd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=et(l),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof u?document.getElementById(u):u;J(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qd:new pg,this.validateStartingState()}verify(){var l=this;return(0,D.Z)(function*(){l.assertNotDestroyed();const u=yield l.render(),f=l.getAssertedRecaptcha();return f.getResponse(u)||new Promise(y=>{const R=k=>{k&&(l.tokenChangeListeners.delete(R),y(k))};l.tokenChangeListeners.add(R),l.isInvisible&&f.execute(u)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return u=>{if(this.tokenChangeListeners.forEach(f=>f(u)),"function"==typeof l)l(u);else if("string"==typeof l){const f=tn()[l];"function"==typeof f&&f(u)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,D.Z)(function*(){if(yield l.init(),!l.widgetId){let u=l.container;if(!l.isInvisible){const f=document.createElement("div");u.appendChild(f),u=f}l.widgetId=l.getAssertedRecaptcha().render(u,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,D.Z)(function*(){J(Kt()&&!nn(),l.auth,"internal-error"),yield function YE(){let h=null;return new Promise(l=>{"complete"!==document.readyState?(h=()=>l(),window.addEventListener("load",h)):l()}).catch(l=>{throw h&&window.removeEventListener("load",h),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const u=yield function Rn(h){return ir.apply(this,arguments)}(l.auth);J(u,l.auth,"internal-error"),l.parameters.sitekey=u})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tc{constructor(l,u){this.verificationId=l,this.onConfirmation=u}confirm(l){const u=Pn._fromVerification(this.verificationId,l);return this.onConfirmation(u)}}function Yr(h,l,u){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,D.Z)(function*(h,l,u){const f=et(h),m=yield xa(f,l,(0,j.m9)(u));return new Tc(m,y=>yo(f,y))})).apply(this,arguments)}function _g(h,l,u){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h);yield Ia(!1,f,"phone");const m=yield xa(f.auth,l,(0,j.m9)(u));return new Tc(m,y=>Od(f,y))})).apply(this,arguments)}function Qd(h,l,u){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h),m=yield xa(f.auth,l,(0,j.m9)(u));return new Tc(m,y=>xd(f,y))})).apply(this,arguments)}function xa(h,l,u){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,D.Z)(function*(h,l,u){var f;const m=yield u.verify();try{let y;if(J("string"==typeof m,h,"argument-error"),J(u.type===Kd,h,"argument-error"),y="string"==typeof l?{phoneNumber:l}:l,"session"in y){const R=y.session;if("phoneNumber"in y)return J("enroll"===R.type,h,"internal-error"),(yield function og(h,l){return q(h,"POST","/v2/accounts/mfaEnrollment:start",L(h,l))}(h,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{J("signin"===R.type,h,"internal-error");const k=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return J(k,h,"missing-multi-factor-info"),(yield function ug(h,l){return q(h,"POST","/v2/accounts/mfaSignIn:start",L(h,l))}(h,{mfaPendingCredential:R.credential,mfaEnrollmentId:k,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function fo(h,l){return po.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return R}}finally{u._reset()}}),Ao.apply(this,arguments)}function vg(h,l){return cr.apply(this,arguments)}function cr(){return(cr=(0,D.Z)(function*(h,l){yield Ea((0,j.m9)(h),l)})).apply(this,arguments)}let Jd=(()=>{class h{constructor(u){this.providerId=h.PROVIDER_ID,this.auth=et(u)}verifyPhoneNumber(u,f){return xa(this.auth,u,(0,j.m9)(f))}static credential(u,f){return Pn._fromVerification(u,f)}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{phoneNumber:f,temporaryProof:m}=u;return f&&m?Pn._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Pi(h,l){return l?v(l):(J(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class ht extends ao{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Ti(l,this._buildIdpRequest())}_linkToIdToken(l,u){return Ti(l,this._buildIdpRequest(u))}_getReauthenticationResolver(l){return Ti(l,this._buildIdpRequest())}_buildIdpRequest(l){const u={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(u.idToken=l),u}}function Mc(h){return lr(h.auth,new ht(h),h.bypassAuthState)}function ka(h){const{auth:l,user:u}=h;return J(u,l,"internal-error"),Pd(u,new ht(h),h.bypassAuthState)}function Ln(h){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,D.Z)(function*(h){const{auth:l,user:u}=h;return J(u,l,"internal-error"),Ea(u,new ht(h),h.bypassAuthState)})).apply(this,arguments)}class Nc{constructor(l,u,f,m,y=!1){this.auth=l,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(u)?u:[u]}execute(){var l=this;return new Promise(function(){var u=(0,D.Z)(function*(f,m){l.pendingPromise={resolve:f,reject:m};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(y){l.reject(y)}});return function(f,m){return u.apply(this,arguments)}}())}onAuthEvent(l){var u=this;return(0,D.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:R,error:k,type:Q}=l;if(k)return void u.reject(k);const ce={auth:u.auth,requestUri:f,sessionId:m,tenantId:R||void 0,postBody:y||void 0,user:u.user,bypassAuthState:u.bypassAuthState};try{u.resolve(yield u.getIdpTask(Q)(ce))}catch(ve){u.reject(ve)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Mc;case"linkViaPopup":case"linkViaRedirect":return Ln;case"reauthViaPopup":case"reauthViaRedirect":return ka;default:Ue(this.auth,"internal-error")}}resolve(l){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ps=new Mn(2e3,1e4);function Kn(h,l,u){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,D.Z)(function*(h,l,u){const f=et(h);jt(h,l,Ir);const m=Pi(f,u);return new xc(f,"signInViaPopup",l,m).executeNotNull()})).apply(this,arguments)}function yg(h,l,u){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h);jt(f.auth,l,Ir);const m=Pi(f.auth,u);return new xc(f.auth,"reauthViaPopup",l,m,f).executeNotNull()})).apply(this,arguments)}function Oi(h,l,u){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h);jt(f.auth,l,Ir);const m=Pi(f.auth,u);return new xc(f.auth,"linkViaPopup",l,m,f).executeNotNull()})).apply(this,arguments)}let xc=(()=>{class h extends Nc{constructor(u,f,m,y,R){super(u,f,y,R),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var u=this;return(0,D.Z)(function*(){const f=yield u.execute();return J(f,u.auth,"internal-error"),f})()}onExecution(){var u=this;return(0,D.Z)(function*(){yt(1===u.filter.length,"Popup operations only handle one event");const f=wr();u.authWindow=yield u.resolver._openPopup(u.auth,u.provider,u.filter[0],f),u.authWindow.associatedEvent=f,u.resolver._originValidation(u.auth).catch(m=>{u.reject(m)}),u.resolver._isIframeWebStorageSupported(u.auth,m=>{m||u.reject(at(u.auth,"web-storage-unsupported"))}),u.pollUserCancellation()})()}get eventId(){var u;return(null===(u=this.authWindow)||void 0===u?void 0:u.associatedEvent)||null}cancel(){this.reject(at(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const u=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(at(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(u,Ps.get())};u()}}return h.currentPopupAction=null,h})();const Xd="pendingRedirect",Os=new Map;class eh extends Nc{constructor(l,u,f=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],u,void 0,f),this.eventId=null}execute(){var l=()=>super.execute,u=this;return(0,D.Z)(function*(){let f=Os.get(u.auth._key());if(!f){try{const y=(yield function Eg(h,l){return Ie.apply(this,arguments)}(u.resolver,u.auth))?yield l().call(u):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}Os.set(u.auth._key(),f)}return u.bypassAuthState||Os.set(u.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(l){var u=()=>super.onAuthEvent,f=this;return(0,D.Z)(function*(){if("signInViaRedirect"===l.type)return u().call(f,l);if("unknown"!==l.type){if(l.eventId){const m=yield f.auth._redirectUserForId(l.eventId);if(m)return f.user=m,u().call(f,l);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Ie(){return(Ie=(0,D.Z)(function*(h,l){const u=kc(l),f=rh(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(u));return yield f._remove(u),m})).apply(this,arguments)}function La(h,l){return th.apply(this,arguments)}function th(){return(th=(0,D.Z)(function*(h,l){return rh(h)._set(kc(l),"true")})).apply(this,arguments)}function Cg(){Os.clear()}function nh(h,l){Os.set(h._key(),l)}function rh(h){return v(h._redirectPersistence)}function kc(h){return le(Xd,h.config.apiKey,h.name)}function xs(h,l,u){return function Ig(h,l,u){return Fc.apply(this,arguments)}(h,l,u)}function Fc(){return(Fc=(0,D.Z)(function*(h,l,u){const f=et(h);jt(h,l,Ir),yield f._initializationPromise;const m=Pi(f,u);return yield La(m,f),m._openRedirect(f,l,"signInViaRedirect")})).apply(this,arguments)}function Dg(h,l,u){return function wg(h,l,u){return Lc.apply(this,arguments)}(h,l,u)}function Lc(){return(Lc=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h);jt(f.auth,l,Ir),yield f.auth._initializationPromise;const m=Pi(f.auth,u);yield La(m,f.auth);const y=yield br(f);return m._openRedirect(f.auth,l,"reauthViaRedirect",y)})).apply(this,arguments)}function K(h,l,u){return function nt(h,l,u){return ns.apply(this,arguments)}(h,l,u)}function ns(){return(ns=(0,D.Z)(function*(h,l,u){const f=(0,j.m9)(h);jt(f.auth,l,Ir),yield f.auth._initializationPromise;const m=Pi(f.auth,u);yield Ia(!1,f,l.providerId),yield La(m,f.auth);const y=yield br(f);return m._openRedirect(f.auth,l,"linkViaRedirect",y)})).apply(this,arguments)}function Mo(h,l){return rn.apply(this,arguments)}function rn(){return(rn=(0,D.Z)(function*(h,l){return yield et(h)._initializationPromise,Va(h,l,!1)})).apply(this,arguments)}function Va(h,l){return rs.apply(this,arguments)}function rs(){return(rs=(0,D.Z)(function*(h,l,u=!1){const f=et(h),m=Pi(f,l),R=yield new eh(f,m,u).execute();return R&&!u&&(delete R.user._redirectEventId,yield f._persistUserIfCurrent(R.user),yield f._setRedirectUser(null,l)),R})).apply(this,arguments)}function br(h){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,D.Z)(function*(h){const l=wr(`${h.uid}:::`);return h._redirectEventId=l,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),l})).apply(this,arguments)}class ih{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let u=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(l,f)&&(u=!0,this.sendToConsumer(l,f),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function bn(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bc(h);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,u||(this.queuedRedirectEvent=l,u=!0)),u}sendToConsumer(l,u){var f;if(l.error&&!Bc(l)){const m=(null===(f=l.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";u.onError(at(this.auth,m))}else u.onAuthEvent(l)}isEventForConsumer(l,u){const f=null===u.eventId||!!l.eventId&&l.eventId===u.eventId;return u.filter.includes(l.type)&&f}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bg(l))}saveEventToCache(l){this.cachedEventUids.add(bg(l)),this.lastProcessedEventTime=Date.now()}}function bg(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(l=>l).join("-")}function Bc({type:h,error:l}){return"unknown"===h&&"auth/no-auth-event"===l?.code}function Qr(h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,D.Z)(function*(h,l={}){return q(h,"GET","/v1/projects",l)})).apply(this,arguments)}const ks=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fi=/^https?/;function Ua(){return(Ua=(0,D.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:l}=yield Qr(h);for(const u of l)try{if(Tg(u))return}catch{}Ue(h,"unauthorized-domain")})).apply(this,arguments)}function Tg(h){const l=Ft(),{protocol:u,hostname:f}=new URL(l);if(h.startsWith("chrome-extension://")){const R=new URL(h);return""===R.hostname&&""===f?"chrome-extension:"===u&&h.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===u&&R.hostname===f}if(!fi.test(u))return!1;if(ks.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const Ag=new Mn(3e4,6e4);function Ha(){const h=tn().___jsl;if(h?.H)for(const l of Object.keys(h.H))if(h.H[l].r=h.H[l].r||[],h.H[l].L=h.H[l].L||[],h.H[l].r=[...h.H[l].L],h.CP)for(let u=0;u<h.CP.length;u++)h.CP[u]=null}let No=null;const Mg=new Mn(5e3,15e3),sh="__/auth/iframe",jc="emulator/auth/iframe",oh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ah=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lh(h){const l=h.config;J(l.authDomain,h,"auth-domain-config-required");const u=l.emulator?ci(l,jc):`https://${h.config.authDomain}/${sh}`,f={apiKey:l.apiKey,appName:h.name,v:N.SDK_VERSION},m=ah.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${u}?${(0,j.xO)(f).slice(1)}`}function Po(){return Po=(0,D.Z)(function*(h){const l=yield function Hc(h){return No=No||function Uc(h){return new Promise((l,u)=>{var f,m,y;function R(){Ha(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Ha(),u(at(h,"network-request-failed"))},timeout:Ag.get()})}if(null!==(m=null===(f=tn().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)l(gapi.iframes.getContext());else{if(null===(y=tn().gapi)||void 0===y||!y.load){const k=Si("iframefcb");return tn()[k]=()=>{gapi.load?R():u(at(h,"network-request-failed"))},Dd(`https://apis.google.com/js/api.js?onload=${k}`).catch(Q=>u(Q))}R()}}).catch(l=>{throw No=null,l})}(h),No}(h),u=tn().gapi;return J(u,h,"internal-error"),l.open({where:document.body,url:lh(h),messageHandlersFilter:u.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oh,dontclear:!0},f=>new Promise(function(){var m=(0,D.Z)(function*(y,R){yield f.restyle({setHideOnLeave:!1});const k=at(h,"network-request-failed"),Q=tn().setTimeout(()=>{R(k)},Mg.get());function ce(){tn().clearTimeout(Q),y(f)}f.ping(ce).then(ce,()=>{R(k)})});return function(y,R){return m.apply(this,arguments)}}()))}),Po.apply(this,arguments)}const Rg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xg="__/auth/handler",dh="emulator/auth/handler",hh=encodeURIComponent("fac");function Fs(h,l,u,f,m,y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,D.Z)(function*(h,l,u,f,m,y){J(h.config.authDomain,h,"auth-domain-config-required"),J(h.config.apiKey,h,"invalid-api-key");const R={apiKey:h.config.apiKey,appName:h.name,authType:u,redirectUrl:f,v:N.SDK_VERSION,eventId:m};if(l instanceof Ir){l.setDefaultLanguage(h.languageCode),R.providerId=l.providerId||"",(0,j.xb)(l.getCustomParameters())||(R.customParameters=JSON.stringify(l.getCustomParameters()));for(const[ve,Ze]of Object.entries(y||{}))R[ve]=Ze}if(l instanceof Hr){const ve=l.getScopes().filter(Ze=>""!==Ze);ve.length>0&&(R.scopes=ve.join(","))}h.tenantId&&(R.tid=h.tenantId);const k=R;for(const ve of Object.keys(k))void 0===k[ve]&&delete k[ve];const Q=yield h._getAppCheckToken(),ce=Q?`#${hh}=${encodeURIComponent(Q)}`:"";return`${function kg({config:h}){return h.emulator?ci(h,dh):`https://${h.authDomain}/${xg}`}(h)}?${(0,j.xO)(k).slice(1)}${ce}`})).apply(this,arguments)}const Ls="webStorageSupport",Oo=class ja{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ud,this._completeRedirectFn=Va,this._overrideRedirectResult=nh}_openPopup(l,u,f,m){var y=this;return(0,D.Z)(function*(){var R;yt(null===(R=y.eventManagers[l._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const k=yield Fs(l,u,f,Ft(),m);return function Pg(h,l,u,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),R=Math.max((window.screen.availWidth-f)/2,0).toString();let k="";const Q=Object.assign(Object.assign({},Rg),{width:f.toString(),height:m.toString(),top:y,left:R}),ce=(0,j.z$)().toLowerCase();u&&(k=ut(ce)?"_blank":u),st(ce)&&(l=l||"http://localhost",Q.scrollbars="yes");const ve=Object.entries(Q).reduce((fn,[Xr,Za])=>`${fn}${Xr}=${Za},`,"");if(function ge(h=(0,j.z$)()){var l;return M(h)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(ce)&&"_self"!==k)return function Og(h,l){const u=document.createElement("a");u.href=h,u.target=l;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),u.dispatchEvent(f)}(l||"",k),new uh(null);const Ze=window.open(l||"",k,ve);J(Ze,h,"popup-blocked");try{Ze.focus()}catch{}return new uh(Ze)}(l,k,wr())})()}_openRedirect(l,u,f,m){var y=this;return(0,D.Z)(function*(){return yield y._originValidation(l),function WE(h){tn().location.href=h}(yield Fs(l,u,f,Ft(),m)),new Promise(()=>{})})()}_initialize(l){const u=l._key();if(this.eventManagers[u]){const{manager:m,promise:y}=this.eventManagers[u];return m?Promise.resolve(m):(yt(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(l);return this.eventManagers[u]={promise:f},f.catch(()=>{delete this.eventManagers[u]}),f}initAndGetManager(l){var u=this;return(0,D.Z)(function*(){const f=yield function ch(h){return Po.apply(this,arguments)}(l),m=new ih(l);return f.register("authEvent",y=>(J(y?.authEvent,l,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),u.eventManagers[l._key()]={manager:m},u.iframes[l._key()]=f,m})()}_isIframeWebStorageSupported(l,u){this.iframes[l._key()].send(Ls,{type:Ls},m=>{var y;const R=null===(y=m?.[0])||void 0===y?void 0:y[Ls];void 0!==R&&u(!!R),Ue(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const u=l._key();return this.originValidationPromises[u]||(this.originValidationPromises[u]=function Sg(h){return Ua.apply(this,arguments)}(l)),this.originValidationPromises[u]}get _shouldInitProactively(){return Fe()||oe()||M()}};class $c{constructor(l){this.factorId=l}_process(l,u,f){switch(u.type){case"enroll":return this._finalizeEnroll(l,u.credential,f);case"signin":return this._finalizeSignIn(l,u.credential);default:return Ke("unexpected MultiFactorSessionType")}}}class $a extends $c{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new $a(l)}_finalizeEnroll(l,u,f){return function ag(h,l){return q(h,"POST","/v2/accounts/mfaEnrollment:finalize",L(h,l))}(l,{idToken:u,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,u){return function ZE(h,l){return q(h,"POST","/v2/accounts/mfaSignIn:finalize",L(h,l))}(l,{mfaPendingCredential:u,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fh=(()=>{class h{constructor(){}static assertion(u){return $a._fromCredential(u)}}return h.FACTOR_ID="phone",h})();var Fg="@firebase/auth";class JE{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var u=this;return(0,D.Z)(function*(){return u.assertAuthConfigured(),yield u.auth._initializationPromise,u.auth.currentUser?{accessToken:yield u.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const u=this.auth.onIdTokenChanged(f=>{l(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,u),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const u=this.internalListeners.get(l);u&&(this.internalListeners.delete(l),u(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function Vg(h){(0,N._registerComponent)(new Dt.wA("auth",(l,{options:u})=>{const f=l.getProvider("app").getImmediate(),m=l.getProvider("heartbeat"),y=l.getProvider("app-check-internal"),{apiKey:R,authDomain:k}=f.options;J(R&&!R.includes(":"),"invalid-api-key",{appName:f.name});const Q={apiKey:R,authDomain:k,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zt(h)},ce=new Ql(f,m,y,Q);return function AE(h,l){const u=l?.persistence||[],f=(Array.isArray(u)?u:[u]).map(v);l?.errorMap&&h._updateErrorMap(l.errorMap),h._initializeWithPersistence(f,l?.popupRedirectResolver)}(ce,u),ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,u,f)=>{l.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Dt.wA("auth-internal",l=>{const u=et(l.getProvider("auth").getImmediate());return new JE(u)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Fg,"1.3.2",function Lg(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,N.registerVersion)(Fg,"1.3.2","esm2017")}("Browser")},58:(Or,Zt,ye)=>{ye.d(Zt,{BH:()=>$n,DV:()=>an,Dv:()=>Vr,GJ:()=>$t,L:()=>Xe,LL:()=>z,P0:()=>Pt,Pz:()=>at,Sg:()=>jt,UG:()=>Ke,UI:()=>ir,US:()=>Dt,Wj:()=>St,Wl:()=>_e,Yr:()=>Mn,ZB:()=>de,ZR:()=>q,aH:()=>Ue,b$:()=>Kt,cI:()=>Me,dS:()=>Er,eu:()=>U,g5:()=>N,gK:()=>Dn,gQ:()=>dn,h$:()=>gt,hl:()=>V,hu:()=>j,jU:()=>yt,lb:()=>Ot,m9:()=>Ur,ne:()=>Wn,p$:()=>X,pd:()=>yr,r3:()=>Yt,ru:()=>Ft,tV:()=>W,uI:()=>J,ug:()=>Cr,vZ:()=>kr,w1:()=>_r,w9:()=>bt,xO:()=>Lr,xb:()=>Rn,z$:()=>ke,zd:()=>vr});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},j=function(S,b){if(!S)throw N(b)},N=function(S){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+S)},pe=function(S){const b=[];let E=0;for(let C=0;C<S.length;C++){let v=S.charCodeAt(C);v<128?b[E++]=v:v<2048?(b[E++]=v>>6|192,b[E++]=63&v|128):55296==(64512&v)&&C+1<S.length&&56320==(64512&S.charCodeAt(C+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++C)),b[E++]=v>>18|240,b[E++]=v>>12&63|128,b[E++]=v>>6&63|128,b[E++]=63&v|128):(b[E++]=v>>12|224,b[E++]=v>>6&63|128,b[E++]=63&v|128)}return b},Dt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,b){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const E=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,C=[];for(let v=0;v<S.length;v+=3){const P=S[v],$=v+1<S.length,le=$?S[v+1]:0,he=v+2<S.length,Se=he?S[v+2]:0;let ut=(15&le)<<2|Se>>6,me=63&Se;he||(me=64,$||(ut=64)),C.push(E[P>>2],E[(3&P)<<4|le>>4],E[ut],E[me])}return C.join("")},encodeString(S,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(S):this.encodeByteArray(pe(S),b)},decodeString(S,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(S):function(S){const b=[];let E=0,C=0;for(;E<S.length;){const v=S[E++];if(v<128)b[C++]=String.fromCharCode(v);else if(v>191&&v<224){const P=S[E++];b[C++]=String.fromCharCode((31&v)<<6|63&P)}else if(v>239&&v<365){const he=((7&v)<<18|(63&S[E++])<<12|(63&S[E++])<<6|63&S[E++])-65536;b[C++]=String.fromCharCode(55296+(he>>10)),b[C++]=String.fromCharCode(56320+(1023&he))}else{const P=S[E++],$=S[E++];b[C++]=String.fromCharCode((15&v)<<12|(63&P)<<6|63&$)}}return b.join("")}(this.decodeStringToByteArray(S,b))},decodeStringToByteArray(S,b){this.init_();const E=b?this.charToByteMapWebSafe_:this.charToByteMap_,C=[];for(let v=0;v<S.length;){const P=E[S.charAt(v++)],le=v<S.length?E[S.charAt(v)]:0;++v;const Se=v<S.length?E[S.charAt(v)]:64;++v;const oe=v<S.length?E[S.charAt(v)]:64;if(++v,null==P||null==le||null==Se||null==oe)throw new Bt;C.push(P<<2|le>>4),64!==Se&&(C.push(le<<4&240|Se>>2),64!==oe&&C.push(Se<<6&192|oe))}return C},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class Bt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gt=function(S){const b=pe(S);return Dt.encodeByteArray(b,!0)},Xe=function(S){return gt(S).replace(/\./g,"")},W=function(S){try{return Dt.decodeString(S,!0)}catch(b){console.error("base64Decode failed: ",b)}return null};function X(S){return de(void 0,S)}function de(S,b){if(!(b instanceof Object))return b;switch(b.constructor){case Date:return new Date(b.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return b}for(const E in b)!b.hasOwnProperty(E)||!Ae(E)||(S[E]=de(S[E],b[E]));return S}function Ae(S){return"__proto__"!==S}const be=()=>{try{return function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const b=S&&W(S[1]);return b&&JSON.parse(b)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Pt=S=>{const b=(S=>{var b,E;return null===(E=null===(b=be())||void 0===b?void 0:b.emulatorHosts)||void 0===E?void 0:E[S]})(S);if(!b)return;const E=b.lastIndexOf(":");if(E<=0||E+1===b.length)throw new Error(`Invalid host ${b} with no separate hostname and port!`);const C=parseInt(b.substring(E+1),10);return"["===b[0]?[b.substring(1,E-1),C]:[b.substring(0,E),C]},Ue=()=>{var S;return null===(S=be())||void 0===S?void 0:S.config},at=S=>{var b;return null===(b=be())||void 0===b?void 0:b[`_${S}`]};class $n{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((b,E)=>{this.resolve=b,this.reject=E})}wrapCallback(b){return(E,C)=>{E?this.reject(E):this.resolve(C),"function"==typeof b&&(this.promise.catch(()=>{}),1===b.length?b(E):b(E,C))}}}function jt(S,b){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const C=b||"demo-project",v=S.iat||0,P=S.sub||S.user_id;if(!P)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $=Object.assign({iss:`https://securetoken.google.com/${C}`,aud:C,iat:v,exp:v+3600,auth_time:v,sub:P,user_id:P,firebase:{sign_in_provider:"custom",identities:{}}},S);return[Xe(JSON.stringify({alg:"none",type:"JWT"})),Xe(JSON.stringify($)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ke(){var S;const b=null===(S=be())||void 0===S?void 0:S.forceEnvironment;if("node"===b)return!0;if("browser"===b)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function yt(){return"object"==typeof self&&self.self===self}function Ft(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _r(){const S=ke();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Mn(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function U(){return new Promise((S,b)=>{try{let E=!0;const C="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(C);v.onsuccess=()=>{v.result.close(),E||self.indexedDB.deleteDatabase(C),S(!0)},v.onupgradeneeded=()=>{E=!1},v.onerror=()=>{var P;b((null===(P=v.error)||void 0===P?void 0:P.message)||"")}}catch(E){b(E)}})}class q extends Error{constructor(b,E,C){super(E),this.code=b,this.customData=C,this.name="FirebaseError",Object.setPrototypeOf(this,q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z.prototype.create)}}class z{constructor(b,E,C){this.service=b,this.serviceName=E,this.errors=C}create(b,...E){const C=E[0]||{},v=`${this.service}/${b}`,P=this.errors[b],$=P?function ie(S,b){return S.replace(Ve,(E,C)=>{const v=b[C];return null!=v?String(v):`<${C}?>`})}(P,C):"Error";return new q(v,`${this.serviceName}: ${$} (${v}).`,C)}}const Ve=/\{\$([^}]+)}/g;function Me(S){return JSON.parse(S)}function _e(S){return JSON.stringify(S)}const Ye=function(S){let b={},E={},C={},v="";try{const P=S.split(".");b=Me(W(P[0])||""),E=Me(W(P[1])||""),v=P[2],C=E.d||{},delete E.d}catch{}return{header:b,claims:E,data:C,signature:v}},bt=function(S){const E=Ye(S).claims;return!!E&&"object"==typeof E&&E.hasOwnProperty("iat")},$t=function(S){const b=Ye(S).claims;return"object"==typeof b&&!0===b.admin};function Yt(S,b){return Object.prototype.hasOwnProperty.call(S,b)}function an(S,b){if(Object.prototype.hasOwnProperty.call(S,b))return S[b]}function Rn(S){for(const b in S)if(Object.prototype.hasOwnProperty.call(S,b))return!1;return!0}function ir(S,b,E){const C={};for(const v in S)Object.prototype.hasOwnProperty.call(S,v)&&(C[v]=b.call(E,S[v],v,S));return C}function kr(S,b){if(S===b)return!0;const E=Object.keys(S),C=Object.keys(b);for(const v of E){if(!C.includes(v))return!1;const P=S[v],$=b[v];if(Qe(P)&&Qe($)){if(!kr(P,$))return!1}else if(P!==$)return!1}for(const v of C)if(!E.includes(v))return!1;return!0}function Qe(S){return null!==S&&"object"==typeof S}function Lr(S){const b=[];for(const[E,C]of Object.entries(S))Array.isArray(C)?C.forEach(v=>{b.push(encodeURIComponent(E)+"="+encodeURIComponent(v))}):b.push(encodeURIComponent(E)+"="+encodeURIComponent(C));return b.length?"&"+b.join("&"):""}function vr(S){const b={};return S.replace(/^\?/,"").split("&").forEach(C=>{if(C){const[v,P]=C.split("=");b[decodeURIComponent(v)]=decodeURIComponent(P)}}),b}function yr(S){const b=S.indexOf("?");if(!b)return"";const E=S.indexOf("#",b);return S.substring(b,E>0?E:void 0)}class dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let b=1;b<this.blockSize;++b)this.pad_[b]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(b,E){E||(E=0);const C=this.W_;if("string"==typeof b)for(let oe=0;oe<16;oe++)C[oe]=b.charCodeAt(E)<<24|b.charCodeAt(E+1)<<16|b.charCodeAt(E+2)<<8|b.charCodeAt(E+3),E+=4;else for(let oe=0;oe<16;oe++)C[oe]=b[E]<<24|b[E+1]<<16|b[E+2]<<8|b[E+3],E+=4;for(let oe=16;oe<80;oe++){const ut=C[oe-3]^C[oe-8]^C[oe-14]^C[oe-16];C[oe]=4294967295&(ut<<1|ut>>>31)}let Se,st,v=this.chain_[0],P=this.chain_[1],$=this.chain_[2],le=this.chain_[3],he=this.chain_[4];for(let oe=0;oe<80;oe++){oe<40?oe<20?(Se=le^P&($^le),st=1518500249):(Se=P^$^le,st=1859775393):oe<60?(Se=P&$|le&(P|$),st=2400959708):(Se=P^$^le,st=3395469782);const ut=(v<<5|v>>>27)+Se+he+st+C[oe]&4294967295;he=le,le=$,$=4294967295&(P<<30|P>>>2),P=v,v=ut}this.chain_[0]=this.chain_[0]+v&4294967295,this.chain_[1]=this.chain_[1]+P&4294967295,this.chain_[2]=this.chain_[2]+$&4294967295,this.chain_[3]=this.chain_[3]+le&4294967295,this.chain_[4]=this.chain_[4]+he&4294967295}update(b,E){if(null==b)return;void 0===E&&(E=b.length);const C=E-this.blockSize;let v=0;const P=this.buf_;let $=this.inbuf_;for(;v<E;){if(0===$)for(;v<=C;)this.compress_(b,v),v+=this.blockSize;if("string"==typeof b){for(;v<E;)if(P[$]=b.charCodeAt(v),++$,++v,$===this.blockSize){this.compress_(P),$=0;break}}else for(;v<E;)if(P[$]=b[v],++$,++v,$===this.blockSize){this.compress_(P),$=0;break}}this.inbuf_=$,this.total_+=E}digest(){const b=[];let E=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let v=this.blockSize-1;v>=56;v--)this.buf_[v]=255&E,E/=256;this.compress_(this.buf_);let C=0;for(let v=0;v<5;v++)for(let P=24;P>=0;P-=8)b[C]=this.chain_[v]>>P&255,++C;return b}}function Wn(S,b){const E=new zn(S,b);return E.subscribe.bind(E)}class zn{constructor(b,E){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=E,this.task.then(()=>{b(this)}).catch(C=>{this.error(C)})}next(b){this.forEachObserver(E=>{E.next(b)})}error(b){this.forEachObserver(E=>{E.error(b)}),this.close(b)}complete(){this.forEachObserver(b=>{b.complete()}),this.close()}subscribe(b,E,C){let v;if(void 0===b&&void 0===E&&void 0===C)throw new Error("Missing Observer.");v=function hn(S,b){if("object"!=typeof S||null===S)return!1;for(const E of b)if(E in S&&"function"==typeof S[E])return!0;return!1}(b,["next","error","complete"])?b:{next:b,error:E,complete:C},void 0===v.next&&(v.next=In),void 0===v.error&&(v.error=In),void 0===v.complete&&(v.complete=In);const P=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),P}unsubscribeOne(b){void 0===this.observers||void 0===this.observers[b]||(delete this.observers[b],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(b){if(!this.finalized)for(let E=0;E<this.observers.length;E++)this.sendOne(E,b)}sendOne(b,E){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[b])try{E(this.observers[b])}catch(C){typeof console<"u"&&console.error&&console.error(C)}})}close(b){this.finalized||(this.finalized=!0,void 0!==b&&(this.finalError=b),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}const Vr=function(S,b,E,C){let v;if(C<b?v="at least "+b:C>E&&(v=0===E?"none":"no more than "+E),v)throw new Error(S+" failed: Was called with "+C+(1===C?" argument.":" arguments.")+" Expects "+v+".")};function Dn(S,b){return`${S} failed: ${b} argument `}function St(S,b,E,C){if((!C||E)&&"function"!=typeof E)throw new Error(Dn(S,b)+"must be a valid function.")}function Ot(S,b,E,C){if((!C||E)&&("object"!=typeof E||null===E))throw new Error(Dn(S,b)+"must be a valid context object.")}const Er=function(S){const b=[];let E=0;for(let C=0;C<S.length;C++){let v=S.charCodeAt(C);if(v>=55296&&v<=56319){const P=v-55296;C++,j(C<S.length,"Surrogate pair missing trail surrogate."),v=65536+(P<<10)+(S.charCodeAt(C)-56320)}v<128?b[E++]=v:v<2048?(b[E++]=v>>6|192,b[E++]=63&v|128):v<65536?(b[E++]=v>>12|224,b[E++]=v>>6&63|128,b[E++]=63&v|128):(b[E++]=v>>18|240,b[E++]=v>>12&63|128,b[E++]=v>>6&63|128,b[E++]=63&v|128)}return b},Cr=function(S){let b=0;for(let E=0;E<S.length;E++){const C=S.charCodeAt(E);C<128?b++:C<2048?b+=2:C>=55296&&C<=56319?(b+=4,E++):b+=3}return b};function Ur(S){return S&&S._delegate?S._delegate:S}},106:(Or,Zt,ye)=>{ye.d(Zt,{Z:()=>qt});var D=ye(58),j=ye(537),N=ye(534),pe=ye(879);class Be{constructor(we,be){this._delegate=we,this.firebase=be,(0,N._addComponent)(we,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(we,be=N._DEFAULT_ENTRY_NAME){var on;this._delegate.checkDestroyed();const Pt=this._delegate.container.getProvider(we);return!Pt.isInitialized()&&"EXPLICIT"===(null===(on=Pt.getComponent())||void 0===on?void 0:on.instantiationMode)&&Pt.initialize(),Pt.getImmediate({identifier:be})}_removeServiceInstance(we,be=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(be)}_addComponent(we){(0,N._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,N._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Bt=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Xe(){const Ge=function gt(Ge){const we={},be={__esModule:!0,initializeApp:function Ue(ke,J={}){const Ke=N.initializeApp(ke,J);if((0,D.r3)(we,Ke.name))return we[Ke.name];const yt=new Ge(Ke,be);return we[Ke.name]=yt,yt},app:Pt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function $n(ke){const J=ke.name,Ke=J.replace("-compat","");if(N._registerComponent(ke)&&"PUBLIC"===ke.type){const yt=(Ft=Pt())=>{if("function"!=typeof Ft[Ke])throw Bt.create("invalid-app-argument",{appName:J});return Ft[Ke]()};void 0!==ke.serviceProps&&(0,D.ZB)(yt,ke.serviceProps),be[Ke]=yt,Ge.prototype[Ke]=function(...Ft){return this._getService.bind(this,J).apply(this,ke.multipleInstances?Ft:[])}}return"PUBLIC"===ke.type?be[Ke]:null},removeApp:function on(ke){delete we[ke]},useAsService:function jt(ke,J){return"serverAuth"===J?null:J},modularAPIs:N}};function Pt(ke){if(!(0,D.r3)(we,ke=ke||N._DEFAULT_ENTRY_NAME))throw Bt.create("no-app",{appName:ke});return we[ke]}return be.default=be,Object.defineProperty(be,"apps",{get:function at(){return Object.keys(we).map(ke=>we[ke])}}),Pt.App=Ge,be}(Be);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:Xe,extendNamespace:function we(be){(0,D.ZB)(Ge,be)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Ge}(),X=new pe.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qt=W;!function rt(Ge){(0,N.registerVersion)("@firebase/app-compat","0.2.22",Ge)}()},534:(Or,Zt,ye)=>{ye.r(Zt),ye.d(Zt,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Er,_DEFAULT_ENTRY_NAME:()=>vr,_addComponent:()=>zn,_addOrOverwriteComponent:()=>sr,_apps:()=>dn,_clearComponents:()=>Dn,_components:()=>Wn,_getProvider:()=>In,_registerComponent:()=>hn,_removeServiceInstance:()=>Vr,deleteApp:()=>Wt,getApp:()=>Br,getApps:()=>Qt,initializeApp:()=>Cr,onLog:()=>_s,registerVersion:()=>Gn,setLogLevel:()=>bi});var D=ye(861),j=ye(537),N=ye(879),pe=ye(58);const Be=(x,M)=>M.some(ee=>x instanceof ee);let Dt,Bt;const W=new WeakMap,X=new WeakMap,de=new WeakMap,Ae=new WeakMap,rt=new WeakMap;let we={get(x,M,ee){if(x instanceof IDBTransaction){if("done"===M)return X.get(x);if("objectStoreNames"===M)return x.objectStoreNames||de.get(x);if("store"===M)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Ue(x[M])},set:(x,M,ee)=>(x[M]=ee,!0),has:(x,M)=>x instanceof IDBTransaction&&("done"===M||"store"===M)||M in x};function Pt(x){return"function"==typeof x?function on(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xe(){return Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...M){return x.apply(at(this),M),Ue(W.get(this))}:function(...M){return Ue(x.apply(at(this),M))}:function(M,...ee){const ge=x.call(at(this),M,...ee);return de.set(ge,M.sort?M.sort():[M]),Ue(ge)}}(x):(x instanceof IDBTransaction&&function Ge(x){if(X.has(x))return;const M=new Promise((ee,ge)=>{const Re=()=>{x.removeEventListener("complete",Fe),x.removeEventListener("error",G),x.removeEventListener("abort",G)},Fe=()=>{ee(),Re()},G=()=>{ge(x.error||new DOMException("AbortError","AbortError")),Re()};x.addEventListener("complete",Fe),x.addEventListener("error",G),x.addEventListener("abort",G)});X.set(x,M)}(x),Be(x,function gt(){return Dt||(Dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,we):x)}function Ue(x){if(x instanceof IDBRequest)return function qt(x){const M=new Promise((ee,ge)=>{const Re=()=>{x.removeEventListener("success",Fe),x.removeEventListener("error",G)},Fe=()=>{ee(Ue(x.result)),Re()},G=()=>{ge(x.error),Re()};x.addEventListener("success",Fe),x.addEventListener("error",G)});return M.then(ee=>{ee instanceof IDBCursor&&W.set(ee,x)}).catch(()=>{}),rt.set(M,x),M}(x);if(Ae.has(x))return Ae.get(x);const M=Pt(x);return M!==x&&(Ae.set(x,M),rt.set(M,x)),M}const at=x=>rt.get(x),ke=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],Ke=new Map;function yt(x,M){if(!(x instanceof IDBDatabase)||M in x||"string"!=typeof M)return;if(Ke.get(M))return Ke.get(M);const ee=M.replace(/FromIndex$/,""),ge=M!==ee,Re=J.includes(ee);if(!(ee in(ge?IDBIndex:IDBObjectStore).prototype)||!Re&&!ke.includes(ee))return;const Fe=function(){var G=(0,D.Z)(function*(zt,...ue){const He=this.transaction(zt,Re?"readwrite":"readonly");let Yi=He.store;return ge&&(Yi=Yi.index(ue.shift())),(yield Promise.all([Yi[ee](...ue),Re&&He.done]))[0]});return function(ue){return G.apply(this,arguments)}}();return Ke.set(M,Fe),Fe}!function be(x){we=x(we)}(x=>({...x,get:(M,ee,ge)=>yt(M,ee)||x.get(M,ee,ge),has:(M,ee)=>!!yt(M,ee)||x.has(M,ee)}));class Ft{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function Kt(x){const M=x.getComponent();return"VERSION"===M?.type}(ee)){const ge=ee.getImmediate();return`${ge.library}/${ge.version}`}return null}).filter(ee=>ee).join(" ")}}const xr="@firebase/app",Oe=new N.Yd("@firebase/app"),vr="[DEFAULT]",yr={[xr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Wn=new Map;function zn(x,M){try{x.container.addComponent(M)}catch(ee){Oe.debug(`Component ${M.name} failed to register with FirebaseApp ${x.name}`,ee)}}function sr(x,M){x.container.addOrOverwriteComponent(M)}function hn(x){const M=x.name;if(Wn.has(M))return Oe.debug(`There were multiple attempts to register component ${M}.`),!1;Wn.set(M,x);for(const ee of dn.values())zn(ee,x);return!0}function In(x,M){const ee=x.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),x.container.getProvider(M)}function Vr(x,M,ee=vr){In(x,M).clearInstance(ee)}function Dn(){Wn.clear()}const St=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ot{constructor(M,ee,ge){this._isDeleted=!1,this._options=Object.assign({},M),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=ge,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(M){this.checkDestroyed(),this._automaticDataCollectionEnabled=M}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(M){this._isDeleted=M}checkDestroyed(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}}const Er="10.5.2";function Cr(x,M={}){let ee=x;"object"!=typeof M&&(M={name:M});const ge=Object.assign({name:vr,automaticDataCollectionEnabled:!1},M),Re=ge.name;if("string"!=typeof Re||!Re)throw St.create("bad-app-name",{appName:String(Re)});if(ee||(ee=(0,pe.aH)()),!ee)throw St.create("no-options");const Fe=dn.get(Re);if(Fe){if((0,pe.vZ)(ee,Fe.options)&&(0,pe.vZ)(ge,Fe.config))return Fe;throw St.create("duplicate-app",{appName:Re})}const G=new j.H0(Re);for(const ue of Wn.values())G.addComponent(ue);const zt=new Ot(ee,ge,G);return dn.set(Re,zt),zt}function Br(x=vr){const M=dn.get(x);if(!M&&x===vr&&(0,pe.aH)())return Cr();if(!M)throw St.create("no-app",{appName:x});return M}function Qt(){return Array.from(dn.values())}function Wt(x){return mn.apply(this,arguments)}function mn(){return(mn=(0,D.Z)(function*(x){const M=x.name;dn.has(M)&&(dn.delete(M),yield Promise.all(x.container.getProviders().map(ee=>ee.delete())),x.isDeleted=!0)})).apply(this,arguments)}function Gn(x,M,ee){var ge;let Re=null!==(ge=yr[x])&&void 0!==ge?ge:x;ee&&(Re+=`-${ee}`);const Fe=Re.match(/\s|\//),G=M.match(/\s|\//);if(Fe||G){const zt=[`Unable to register library "${Re}" with version "${M}":`];return Fe&&zt.push(`library name "${Re}" contains illegal characters (whitespace or "/")`),Fe&&G&&zt.push("and"),G&&zt.push(`version name "${M}" contains illegal characters (whitespace or "/")`),void Oe.warn(zt.join(" "))}hn(new j.wA(`${Re}-version`,()=>({library:Re,version:M}),"VERSION"))}function _s(x,M){if(null!==x&&"function"!=typeof x)throw St.create("invalid-log-argument");(0,N.Am)(x,M)}function bi(x){(0,N.Ub)(x)}const qi="firebase-heartbeat-database",Ur=1,S="firebase-heartbeat-store";let b=null;function E(){return b||(b=function $n(x,M,{blocked:ee,upgrade:ge,blocking:Re,terminated:Fe}={}){const G=indexedDB.open(x,M),zt=Ue(G);return ge&&G.addEventListener("upgradeneeded",ue=>{ge(Ue(G.result),ue.oldVersion,ue.newVersion,Ue(G.transaction),ue)}),ee&&G.addEventListener("blocked",ue=>ee(ue.oldVersion,ue.newVersion,ue)),zt.then(ue=>{Fe&&ue.addEventListener("close",()=>Fe()),Re&&ue.addEventListener("versionchange",He=>Re(He.oldVersion,He.newVersion,He))}).catch(()=>{}),zt}(qi,Ur,{upgrade:(x,M)=>{0===M&&x.createObjectStore(S)}}).catch(x=>{throw St.create("idb-open",{originalErrorMessage:x.message})})),b}function v(){return(v=(0,D.Z)(function*(x){try{return yield(yield E()).transaction(S).objectStore(S).get(le(x))}catch(M){if(M instanceof pe.ZR)Oe.warn(M.message);else{const ee=St.create("idb-get",{originalErrorMessage:M?.message});Oe.warn(ee.message)}}})).apply(this,arguments)}function P(x,M){return $.apply(this,arguments)}function $(){return($=(0,D.Z)(function*(x,M){try{const ge=(yield E()).transaction(S,"readwrite");yield ge.objectStore(S).put(M,le(x)),yield ge.done}catch(ee){if(ee instanceof pe.ZR)Oe.warn(ee.message);else{const ge=St.create("idb-set",{originalErrorMessage:ee?.message});Oe.warn(ge.message)}}})).apply(this,arguments)}function le(x){return`${x.name}!${x.options.appId}`}class st{constructor(M){this.container=M,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new me(ee),this._heartbeatsCachePromise=this._storage.read().then(ge=>(this._heartbeatsCache=ge,ge))}triggerHeartbeat(){var M=this;return(0,D.Z)(function*(){const ge=M.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Re=oe();if(null===M._heartbeatsCache&&(M._heartbeatsCache=yield M._heartbeatsCachePromise),M._heartbeatsCache.lastSentHeartbeatDate!==Re&&!M._heartbeatsCache.heartbeats.some(Fe=>Fe.date===Re))return M._heartbeatsCache.heartbeats.push({date:Re,agent:ge}),M._heartbeatsCache.heartbeats=M._heartbeatsCache.heartbeats.filter(Fe=>{const G=new Date(Fe.date).valueOf();return Date.now()-G<=2592e6}),M._storage.overwrite(M._heartbeatsCache)})()}getHeartbeatsHeader(){var M=this;return(0,D.Z)(function*(){if(null===M._heartbeatsCache&&(yield M._heartbeatsCachePromise),null===M._heartbeatsCache||0===M._heartbeatsCache.heartbeats.length)return"";const ee=oe(),{heartbeatsToSend:ge,unsentEntries:Re}=function ut(x,M=1024){const ee=[];let ge=x.slice();for(const Re of x){const Fe=ee.find(G=>G.agent===Re.agent);if(Fe){if(Fe.dates.push(Re.date),Jt(ee)>M){Fe.dates.pop();break}}else if(ee.push({agent:Re.agent,dates:[Re.date]}),Jt(ee)>M){ee.pop();break}ge=ge.slice(1)}return{heartbeatsToSend:ee,unsentEntries:ge}}(M._heartbeatsCache.heartbeats),Fe=(0,pe.L)(JSON.stringify({version:2,heartbeats:ge}));return M._heartbeatsCache.lastSentHeartbeatDate=ee,Re.length>0?(M._heartbeatsCache.heartbeats=Re,yield M._storage.overwrite(M._heartbeatsCache)):(M._heartbeatsCache.heartbeats=[],M._storage.overwrite(M._heartbeatsCache)),Fe})()}}function oe(){return(new Date).toISOString().substring(0,10)}class me{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var M=this;return(0,D.Z)(function*(){return(yield M._canUseIndexedDBPromise)&&(yield function C(x){return v.apply(this,arguments)}(M.app))||{heartbeats:[]}})()}overwrite(M){var ee=this;return(0,D.Z)(function*(){var ge;if(yield ee._canUseIndexedDBPromise){const Fe=yield ee.read();return P(ee.app,{lastSentHeartbeatDate:null!==(ge=M.lastSentHeartbeatDate)&&void 0!==ge?ge:Fe.lastSentHeartbeatDate,heartbeats:M.heartbeats})}})()}add(M){var ee=this;return(0,D.Z)(function*(){var ge;if(yield ee._canUseIndexedDBPromise){const Fe=yield ee.read();return P(ee.app,{lastSentHeartbeatDate:null!==(ge=M.lastSentHeartbeatDate)&&void 0!==ge?ge:Fe.lastSentHeartbeatDate,heartbeats:[...Fe.heartbeats,...M.heartbeats]})}})()}}function Jt(x){return(0,pe.L)(JSON.stringify({version:2,heartbeats:x})).length}!function Ki(x){hn(new j.wA("platform-logger",M=>new Ft(M),"PRIVATE")),hn(new j.wA("heartbeat",M=>new st(M),"PRIVATE")),Gn(xr,"0.9.22",x),Gn(xr,"0.9.22","esm2017"),Gn("fire-js","")}("")},537:(Or,Zt,ye)=>{ye.d(Zt,{H0:()=>gt,wA:()=>N,zt:()=>Be});var D=ye(861),j=ye(58);class N{constructor(W,X,de){this.name=W,this.instanceFactory=X,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const pe="[DEFAULT]";class Be{constructor(W,X){this.name=W,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const X=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(X)){const de=new j.BH;if(this.instancesDeferred.set(X,de),this.isInitialized(X)||this.shouldAutoInitialize())try{const Ae=this.getOrInitializeService({instanceIdentifier:X});Ae&&de.resolve(Ae)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(W){var X;const de=this.normalizeInstanceIdentifier(W?.identifier),Ae=null!==(X=W?.optional)&&void 0!==X&&X;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(rt){if(Ae)return null;throw rt}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function Bt(Xe){return"EAGER"===Xe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[X,de]of this.instancesDeferred.entries()){const Ae=this.normalizeInstanceIdentifier(X);try{const rt=this.getOrInitializeService({instanceIdentifier:Ae});de.resolve(rt)}catch{}}}}clearInstance(W=pe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,D.Z)(function*(){const X=Array.from(W.instances.values());yield Promise.all([...X.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...X.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=pe){return this.instances.has(W)}getOptions(W=pe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:X={}}=W,de=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ae=this.getOrInitializeService({instanceIdentifier:de,options:X});for(const[rt,qt]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(rt)&&qt.resolve(Ae);return Ae}onInit(W,X){var de;const Ae=this.normalizeInstanceIdentifier(X),rt=null!==(de=this.onInitCallbacks.get(Ae))&&void 0!==de?de:new Set;rt.add(W),this.onInitCallbacks.set(Ae,rt);const qt=this.instances.get(Ae);return qt&&W(qt,Ae),()=>{rt.delete(W)}}invokeOnInitCallbacks(W,X){const de=this.onInitCallbacks.get(X);if(de)for(const Ae of de)try{Ae(W,X)}catch{}}getOrInitializeService({instanceIdentifier:W,options:X={}}){let de=this.instances.get(W);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Xe=W,Xe===pe?void 0:Xe),options:X}),this.instances.set(W,de),this.instancesOptions.set(W,X),this.invokeOnInitCallbacks(de,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,de)}catch{}var Xe;return de||null}normalizeInstanceIdentifier(W=pe){return this.component?this.component.multipleInstances?W:pe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gt{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const X=this.getProvider(W.name);if(X.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);X.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const X=new Be(W,this);return this.providers.set(W,X),X}getProviders(){return Array.from(this.providers.values())}}},879:(Or,Zt,ye)=>{ye.d(Zt,{Am:()=>Xe,Ub:()=>gt,Yd:()=>Bt,in:()=>j});const D=[];var j=function(W){return W[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W}(j||{});const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},pe=j.INFO,Be={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},Dt=(W,X,...de)=>{if(X<W.logLevel)return;const Ae=(new Date).toISOString(),rt=Be[X];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[rt](`[${Ae}]  ${W.name}:`,...de)};class Bt{constructor(X){this.name=X,this._logLevel=pe,this._logHandler=Dt,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in j))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?N[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...X),this._logHandler(this,j.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...X),this._logHandler(this,j.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,j.INFO,...X),this._logHandler(this,j.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,j.WARN,...X),this._logHandler(this,j.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...X),this._logHandler(this,j.ERROR,...X)}}function gt(W){D.forEach(X=>{X.setLogLevel(W)})}function Xe(W,X){for(const de of D){let Ae=null;X&&X.level&&(Ae=N[X.level]),de.userLogHandler=null===W?null:(rt,qt,...Ge)=>{const we=Ge.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");qt>=(Ae??rt.logLevel)&&W({level:j[qt].toLowerCase(),message:we,args:Ge,type:rt.name})}}}},365:(Or,Zt,ye)=>{ye.r(Zt);var D=ye(861),j=ye(106),N=ye(560),pe=ye(58),Bt=(ye(534),ye(879),ye(537));function gt(){return window}function X(){return X=(0,D.Z)(function*(E,C,v){var P;const{BuildInfo:$}=gt();(0,N.at)(C.sessionId,"AuthEvent did not contain a session ID");const le=yield function be(E){return on.apply(this,arguments)}(C.sessionId),he={};return(0,N.au)()?he.ibi=$.packageName:(0,N.av)()?he.apn=$.packageName:(0,N.aw)(E,"operation-not-supported-in-this-environment"),$.displayName&&(he.appDisplayName=$.displayName),he.sessionId=le,(0,N.ax)(E,v,C.type,void 0,null!==(P=C.eventId)&&void 0!==P?P:void 0,he)}),X.apply(this,arguments)}function Ae(){return(Ae=(0,D.Z)(function*(E){const{BuildInfo:C}=gt(),v={};(0,N.au)()?v.iosBundleId=C.packageName:(0,N.av)()?v.androidPackageName=C.packageName:(0,N.aw)(E,"operation-not-supported-in-this-environment"),yield(0,N.ay)(E,v)})).apply(this,arguments)}function Ge(){return(Ge=(0,D.Z)(function*(E,C,v){const{cordova:P}=gt();let $=()=>{};try{yield new Promise((le,he)=>{let Se=null;function st(){var me;le();const Jt=null===(me=P.plugins.browsertab)||void 0===me?void 0:me.close;"function"==typeof Jt&&Jt(),"function"==typeof v?.close&&v.close()}function oe(){Se||(Se=window.setTimeout(()=>{he((0,N.aA)(E,"redirect-cancelled-by-user"))},2e3))}function ut(){"visible"===document?.visibilityState&&oe()}C.addPassiveListener(st),document.addEventListener("resume",oe,!1),(0,N.av)()&&document.addEventListener("visibilitychange",ut,!1),$=()=>{C.removePassiveListener(st),document.removeEventListener("resume",oe,!1),document.removeEventListener("visibilitychange",ut,!1),Se&&window.clearTimeout(Se)}})}finally{$()}})).apply(this,arguments)}function on(){return(on=(0,D.Z)(function*(E){const C=function Pt(E){if((0,N.at)(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(E);const C=new ArrayBuffer(E.length),v=new Uint8Array(C);for(let P=0;P<E.length;P++)v[P]=E.charCodeAt(P);return v}(E),v=yield crypto.subtle.digest("SHA-256",C);return Array.from(new Uint8Array(v)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class at extends N.aC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(C=>{this.resolveInialized=C})}addPassiveListener(C){this.passiveListeners.add(C)}removePassiveListener(C){this.passiveListeners.delete(C)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(C){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(C)),super.onEvent(C)}initialized(){var C=this;return(0,D.Z)(function*(){yield C.initPromise})()}}function ke(E){return J.apply(this,arguments)}function J(){return(J=(0,D.Z)(function*(E){const C=yield Ft()._get(Kt(E));return C&&(yield Ft()._remove(Kt(E))),C})).apply(this,arguments)}function yt(){const E=[];for(let v=0;v<20;v++){const P=Math.floor(62*Math.random());E.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(P))}return E.join("")}function Ft(){return(0,N.aD)(N.b)}function Kt(E){return(0,N.aE)("authEvent",E.config.apiKey,E.name)}function Oe(E){if(!E?.includes("?"))return{};const[C,...v]=E.split("?");return(0,pe.zd)(v.join("?"))}const V=class ci{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aF,this._overrideRedirectResult=N.aG}_initialize(C){var v=this;return(0,D.Z)(function*(){const P=C._key();let $=v.eventManagers.get(P);return $||($=new at(C),v.eventManagers.set(P,$),v.attachCallbackListeners(C,$)),$})()}_openPopup(C){(0,N.aw)(C,"operation-not-supported-in-this-environment")}_openRedirect(C,v,P,$){var le=this;return(0,D.Z)(function*(){!function we(E){var C,v,P,$,le,he,Se,st,oe,ut;const me=gt();(0,N.aB)("function"==typeof(null===(C=me?.universalLinks)||void 0===C?void 0:C.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aB)(typeof(null===(v=me?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aB)("function"==typeof(null===(le=null===($=null===(P=me?.cordova)||void 0===P?void 0:P.plugins)||void 0===$?void 0:$.browsertab)||void 0===le?void 0:le.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aB)("function"==typeof(null===(st=null===(Se=null===(he=me?.cordova)||void 0===he?void 0:he.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===st?void 0:st.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aB)("function"==typeof(null===(ut=null===(oe=me?.cordova)||void 0===oe?void 0:oe.InAppBrowser)||void 0===ut?void 0:ut.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(C);const he=yield le._initialize(C);yield he.initialized(),he.resetRedirect(),(0,N.aH)(),yield le._originValidation(C);const Se=function $n(E,C,v=null){return{type:C,eventId:v,urlResponse:null,sessionId:yt(),postBody:null,tenantId:E.tenantId,error:(0,N.aA)(E,"no-auth-event")}}(C,P,$);yield function jt(E,C){return Ft()._set(Kt(E),C)}(C,Se);const st=yield function W(E,C,v){return X.apply(this,arguments)}(C,Se,v),oe=yield function rt(E){const{cordova:C}=gt();return new Promise(v=>{C.plugins.browsertab.isAvailable(P=>{let $=null;P?C.plugins.browsertab.openUrl(E):$=C.InAppBrowser.open(E,(0,N.az)()?"_blank":"_system","location=yes"),v($)})})}(st);return function qt(E,C,v){return Ge.apply(this,arguments)}(C,he,oe)})()}_isIframeWebStorageSupported(C,v){throw new Error("Method not implemented.")}_originValidation(C){const v=C._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function de(E){return Ae.apply(this,arguments)}(C)),this.originValidationPromises[v]}attachCallbackListeners(C,v){const{universalLinks:P,handleOpenURL:$,BuildInfo:le}=gt(),he=setTimeout((0,D.Z)(function*(){yield ke(C),v.onEvent(U())}),500),Se=function(){var ut=(0,D.Z)(function*(me){clearTimeout(he);const Jt=yield ke(C);let Ki=null;Jt&&me?.url&&(Ki=function Ke(E,C){var v,P;const $=function _r(E){const C=Oe(E),v=C.link?decodeURIComponent(C.link):void 0,P=Oe(v).link,$=C.deep_link_id?decodeURIComponent(C.deep_link_id):void 0;return Oe($).link||$||P||v||E}(C);if($.includes("/__/auth/callback")){const le=Oe($),he=le.firebaseError?function xr(E){try{return JSON.parse(E)}catch{return null}}(decodeURIComponent(le.firebaseError)):null,Se=null===(P=null===(v=he?.code)||void 0===v?void 0:v.split("auth/"))||void 0===P?void 0:P[1],st=Se?(0,N.aA)(Se):null;return st?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:st,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:$,postBody:null}}return null}(Jt,me.url)),v.onEvent(Ki||U())});return function(Jt){return ut.apply(this,arguments)}}();typeof P<"u"&&"function"==typeof P.subscribe&&P.subscribe(null,Se);const st=$,oe=`${le.packageName.toLowerCase()}://`;gt().handleOpenURL=function(){var ut=(0,D.Z)(function*(me){if(me.toLowerCase().startsWith(oe)&&Se({url:me}),"function"==typeof st)try{st(me)}catch(Jt){console.error(Jt)}});return function(me){return ut.apply(this,arguments)}}()}};function U(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aA)("no-auth-event")}}function ie(){var E;return(null===(E=self?.location)||void 0===E?void 0:E.protocol)||null}function Me(E=(0,pe.z$)()){return!("file:"!==ie()&&"ionic:"!==ie()&&"capacitor:"!==ie()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function bt(){try{const E=self.localStorage,C=N.aM();if(E)return E.setItem(C,"1"),E.removeItem(C),!function mt(E=(0,pe.z$)()){return function Ye(){return(0,pe.w1)()&&11===document?.documentMode}()||function wt(E=(0,pe.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,pe.hl)()}catch{return $t()&&(0,pe.hl)()}return!1}function $t(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yt(){return(function Ve(){return"http:"===ie()||"https:"===ie()}()||(0,pe.ru)()||Me())&&!function _e(){return(0,pe.b$)()||(0,pe.UG)()}()&&bt()&&!$t()}function an(){return Me()&&typeof document<"u"}function ir(){return(ir=(0,D.Z)(function*(){return!!an()&&new Promise(E=>{const C=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(C),E(!0)})})})).apply(this,arguments)}const Qe={LOCAL:"local",NONE:"none",SESSION:"session"},Fr=N.aB,Lr="persistence";function yr(E){return dn.apply(this,arguments)}function dn(){return(dn=(0,D.Z)(function*(E){yield E._initializationPromise;const C=zn(),v=N.aE(Lr,E.config.apiKey,E.name);C&&C.setItem(v,E._getPersistence())})).apply(this,arguments)}function zn(){var E;try{return(null===(E=function kr(){return typeof window<"u"?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch{return null}}const sr=N.aB;class hn{constructor(){this.browserResolver=N.aD(N.k),this.cordovaResolver=N.aD(V),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aF,this._overrideRedirectResult=N.aG}_initialize(C){var v=this;return(0,D.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(C)})()}_openPopup(C,v,P,$){var le=this;return(0,D.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openPopup(C,v,P,$)})()}_openRedirect(C,v,P,$){var le=this;return(0,D.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openRedirect(C,v,P,$)})()}_isIframeWebStorageSupported(C,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(C,v)}_originValidation(C){return this.assertedUnderlyingResolver._originValidation(C)}get _shouldInitProactively(){return an()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var C=this;return(0,D.Z)(function*(){if(C.underlyingResolver)return;const v=yield function Rn(){return ir.apply(this,arguments)}();C.underlyingResolver=v?C.cordovaResolver:C.browserResolver})()}}function In(E){return E.unwrap()}function Dn(E){return St(E)}function St(E){const{_tokenResponse:C}=E instanceof pe.ZR?E.customData:E;if(!C)return null;if(!(E instanceof pe.ZR)&&"temporaryProof"in C&&"phoneNumber"in C)return N.P.credentialFromResult(E);const v=C.providerId;if(!v||v===N.p.PASSWORD)return null;let P;switch(v){case N.p.GOOGLE:P=N.W;break;case N.p.FACEBOOK:P=N.V;break;case N.p.GITHUB:P=N.X;break;case N.p.TWITTER:P=N._;break;default:const{oauthIdToken:$,oauthAccessToken:le,oauthTokenSecret:he,pendingToken:Se,nonce:st}=C;return le||he||$||Se?Se?v.startsWith("saml.")?N.aP._create(v,Se):N.M._fromParams({providerId:v,signInMethod:v,pendingToken:Se,idToken:$,accessToken:le}):new N.Y(v).credential({idToken:$,accessToken:le,rawNonce:st}):null}return E instanceof pe.ZR?P.credentialFromError(E):P.credentialFromResult(E)}function Ot(E,C){return C.catch(v=>{throw v instanceof pe.ZR&&function oo(E,C){var v;const P=null===(v=C.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===C?.code)C.resolver=new Br(E,N.ar(E,C));else if(P){const $=St(C),le=C;$&&(le.credential=$,le.tenantId=P.tenantId||void 0,le.email=P.email||void 0,le.phoneNumber=P.phoneNumber||void 0)}}(E,v),v}).then(v=>{const $=v.user;return{operationType:v.operationType,credential:Dn(v),additionalUserInfo:N.ap(v),user:Qt.getOrCreate($)}})}function Er(E,C){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,D.Z)(function*(E,C){const v=yield C;return{verificationId:v.verificationId,confirm:P=>Ot(E,v.confirm(P))}})).apply(this,arguments)}class Br{constructor(C,v){this.resolver=v,this.auth=function Vr(E){return E.wrapped()}(C)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(C){return Ot(In(this.auth),this.resolver.resolveSignIn(C))}}class Qt{constructor(C){this._delegate=C,this.multiFactor=N.as(C)}static getOrCreate(C){return Qt.USER_MAP.has(C)||Qt.USER_MAP.set(C,new Qt(C)),Qt.USER_MAP.get(C)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(C){return this._delegate.getIdTokenResult(C)}getIdToken(C){return this._delegate.getIdToken(C)}linkAndRetrieveDataWithCredential(C){return this.linkWithCredential(C)}linkWithCredential(C){var v=this;return(0,D.Z)(function*(){return Ot(v.auth,N.a1(v._delegate,C))})()}linkWithPhoneNumber(C,v){var P=this;return(0,D.Z)(function*(){return Er(P.auth,N.l(P._delegate,C,v))})()}linkWithPopup(C){var v=this;return(0,D.Z)(function*(){return Ot(v.auth,N.d(v._delegate,C,hn))})()}linkWithRedirect(C){var v=this;return(0,D.Z)(function*(){return yield yr(N.aI(v.auth)),N.g(v._delegate,C,hn)})()}reauthenticateAndRetrieveDataWithCredential(C){return this.reauthenticateWithCredential(C)}reauthenticateWithCredential(C){var v=this;return(0,D.Z)(function*(){return Ot(v.auth,N.a2(v._delegate,C))})()}reauthenticateWithPhoneNumber(C,v){return Er(this.auth,N.r(this._delegate,C,v))}reauthenticateWithPopup(C){return Ot(this.auth,N.e(this._delegate,C,hn))}reauthenticateWithRedirect(C){var v=this;return(0,D.Z)(function*(){return yield yr(N.aI(v.auth)),N.h(v._delegate,C,hn)})()}sendEmailVerification(C){return N.af(this._delegate,C)}unlink(C){var v=this;return(0,D.Z)(function*(){return yield N.ao(v._delegate,C),v})()}updateEmail(C){return N.ak(this._delegate,C)}updatePassword(C){return N.al(this._delegate,C)}updatePhoneNumber(C){return N.u(this._delegate,C)}updateProfile(C){return N.aj(this._delegate,C)}verifyBeforeUpdateEmail(C,v){return N.ag(this._delegate,C,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qt.USER_MAP=new WeakMap;const Wt=N.aB;let mn=(()=>{class E{constructor(v,P){if(this.app=v,P.isInitialized())return this._delegate=P.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=v.options;Wt($,"invalid-api-key",{appName:v.name}),Wt($,"invalid-api-key",{appName:v.name});const le=typeof window<"u"?hn:void 0;this._delegate=P.initialize({options:{persistence:_s($,v.name),popupRedirectResolver:le}}),this._delegate._updateErrorMap(N.E),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,P){N.J(this._delegate,v,P)}applyActionCode(v){return N.a6(this._delegate,v)}checkActionCode(v){return N.a7(this._delegate,v)}confirmPasswordReset(v,P){return N.a5(this._delegate,v,P)}createUserWithEmailAndPassword(v,P){var $=this;return(0,D.Z)(function*(){return Ot($._delegate,N.a9($._delegate,v,P))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return N.ae(this._delegate,v)}isSignInWithEmailLink(v){return N.ac(this._delegate,v)}getRedirectResult(){var v=this;return(0,D.Z)(function*(){Wt(Yt(),v._delegate,"operation-not-supported-in-this-environment");const P=yield N.j(v._delegate,hn);return P?Ot(v._delegate,Promise.resolve(P)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function F(E,C){(0,N.aI)(E)._logFramework(C)}(this._delegate,v)}onAuthStateChanged(v,P,$){const{next:le,error:he,complete:Se}=Gn(v,P,$);return this._delegate.onAuthStateChanged(le,he,Se)}onIdTokenChanged(v,P,$){const{next:le,error:he,complete:Se}=Gn(v,P,$);return this._delegate.onIdTokenChanged(le,he,Se)}sendSignInLinkToEmail(v,P){return N.ab(this._delegate,v,P)}sendPasswordResetEmail(v,P){return N.a4(this._delegate,v,P||void 0)}setPersistence(v){var P=this;return(0,D.Z)(function*(){let $;switch(function vr(E,C){Fr(Object.values(Qe).includes(C),E,"invalid-persistence-type"),(0,pe.b$)()?Fr(C!==Qe.SESSION,E,"unsupported-persistence-type"):(0,pe.UG)()?Fr(C===Qe.NONE,E,"unsupported-persistence-type"):$t()?Fr(C===Qe.NONE||C===Qe.LOCAL&&(0,pe.hl)(),E,"unsupported-persistence-type"):Fr(C===Qe.NONE||bt(),E,"unsupported-persistence-type")}(P._delegate,v),v){case Qe.SESSION:$=N.a;break;case Qe.LOCAL:$=(yield N.aD(N.i)._isAvailable())?N.i:N.b;break;case Qe.NONE:$=N.Q;break;default:return N.aw("argument-error",{appName:P._delegate.name})}return P._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Ot(this._delegate,N.$(this._delegate))}signInWithCredential(v){return Ot(this._delegate,N.a0(this._delegate,v))}signInWithCustomToken(v){return Ot(this._delegate,N.a3(this._delegate,v))}signInWithEmailAndPassword(v,P){return Ot(this._delegate,N.aa(this._delegate,v,P))}signInWithEmailLink(v,P){return Ot(this._delegate,N.ad(this._delegate,v,P))}signInWithPhoneNumber(v,P){return Er(this._delegate,N.s(this._delegate,v,P))}signInWithPopup(v){var P=this;return(0,D.Z)(function*(){return Wt(Yt(),P._delegate,"operation-not-supported-in-this-environment"),Ot(P._delegate,N.c(P._delegate,v,hn))})()}signInWithRedirect(v){var P=this;return(0,D.Z)(function*(){return Wt(Yt(),P._delegate,"operation-not-supported-in-this-environment"),yield yr(P._delegate),N.f(P._delegate,v,hn)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return N.a8(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=Qe,E})();function Gn(E,C,v){let P=E;"function"!=typeof E&&({next:P,error:C,complete:v}=E);const $=P;return{next:he=>$(he&&Qt.getOrCreate(he)),error:C,complete:v}}function _s(E,C){const v=function Wn(E,C){const v=zn();if(!v)return[];const P=N.aE(Lr,E,C);switch(v.getItem(P)){case Qe.NONE:return[N.Q];case Qe.LOCAL:return[N.i,N.a];case Qe.SESSION:return[N.a];default:return[]}}(E,C);if(typeof self<"u"&&!v.includes(N.i)&&v.push(N.i),typeof window<"u")for(const P of[N.b,N.a])v.includes(P)||v.push(P);return v.includes(N.Q)||v.push(N.Q),v}class bi{constructor(){this.providerId="phone",this._delegate=new N.P(In(j.Z.auth()))}static credential(C,v){return N.P.credential(C,v)}verifyPhoneNumber(C,v){return this._delegate.verifyPhoneNumber(C,v)}unwrap(){return this._delegate}}bi.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,bi.PROVIDER_ID=N.P.PROVIDER_ID;const qi=N.aB;class Ur{constructor(C,v,P=j.Z.app()){var $;qi(null===($=P.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:P.name}),this._delegate=new N.R(P.auth(),C,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function b(E){E.INTERNAL.registerComponent(new Bt.wA("auth-compat",C=>{const v=C.getProvider("app-compat").getImmediate(),P=C.getProvider("auth");return new mn(v,P)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.U,FacebookAuthProvider:N.V,GithubAuthProvider:N.X,GoogleAuthProvider:N.W,OAuthProvider:N.Y,SAMLAuthProvider:N.Z,PhoneAuthProvider:bi,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Ur,TwitterAuthProvider:N._,Auth:mn,AuthCredential:N.K,Error:pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.4.8")}(j.Z)},861:(Or,Zt,ye)=>{function D(N,pe,Be,Dt,Bt,gt,Xe){try{var W=N[gt](Xe),X=W.value}catch(de){return void Be(de)}W.done?pe(X):Promise.resolve(X).then(Dt,Bt)}function j(N){return function(){var pe=this,Be=arguments;return new Promise(function(Dt,Bt){var gt=N.apply(pe,Be);function Xe(X){D(gt,Dt,Bt,Xe,W,"next",X)}function W(X){D(gt,Dt,Bt,Xe,W,"throw",X)}Xe(void 0)})}}ye.d(Zt,{Z:()=>j})},582:(Or,Zt,ye)=>{function pe(V,U){var F={};for(var L in V)Object.prototype.hasOwnProperty.call(V,L)&&U.indexOf(L)<0&&(F[L]=V[L]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var q=0;for(L=Object.getOwnPropertySymbols(V);q<L.length;q++)U.indexOf(L[q])<0&&Object.prototype.propertyIsEnumerable.call(V,L[q])&&(F[L[q]]=V[L[q]])}return F}function de(V,U,F,L){return new(F||(F=Promise))(function(z,ie){function Ve(Ye){try{_e(L.next(Ye))}catch(wt){ie(wt)}}function Me(Ye){try{_e(L.throw(Ye))}catch(wt){ie(wt)}}function _e(Ye){Ye.done?z(Ye.value):function q(z){return z instanceof F?z:new F(function(ie){ie(z)})}(Ye.value).then(Ve,Me)}_e((L=L.apply(V,U||[])).next())})}function Ue(V){return this instanceof Ue?(this.v=V,this):new Ue(V)}function at(V,U,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q,L=F.apply(V,U||[]),z=[];return q={},ie("next"),ie("throw"),ie("return"),q[Symbol.asyncIterator]=function(){return this},q;function ie(mt){L[mt]&&(q[mt]=function(bt){return new Promise(function($t,Yt){z.push([mt,bt,$t,Yt])>1||Ve(mt,bt)})})}function Ve(mt,bt){try{!function Me(mt){mt.value instanceof Ue?Promise.resolve(mt.value.v).then(_e,Ye):wt(z[0][2],mt)}(L[mt](bt))}catch($t){wt(z[0][3],$t)}}function _e(mt){Ve("next",mt)}function Ye(mt){Ve("throw",mt)}function wt(mt,bt){mt(bt),z.shift(),z.length&&Ve(z[0][0],z[0][1])}}function jt(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,U=V[Symbol.asyncIterator];return U?U.call(V):(V=function Ge(V){var U="function"==typeof Symbol&&Symbol.iterator,F=U&&V[U],L=0;if(F)return F.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&L>=V.length&&(V=void 0),{value:V&&V[L++],done:!V}}};throw new TypeError(U?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),F={},L("next"),L("throw"),L("return"),F[Symbol.asyncIterator]=function(){return this},F);function L(z){F[z]=V[z]&&function(ie){return new Promise(function(Ve,Me){!function q(z,ie,Ve,Me){Promise.resolve(Me).then(function(_e){z({value:_e,done:Ve})},ie)}(Ve,Me,(ie=V[z](ie)).done,ie.value)})}}}ye.d(Zt,{FC:()=>at,KL:()=>jt,_T:()=>pe,mG:()=>de,qq:()=>Ue}),"function"==typeof SuppressedError&&SuppressedError}},Or=>{Or(Or.s=937)}]);